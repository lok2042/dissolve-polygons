let t;!function(t){function e(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var n,i,r,o,s,a,u,l,h,c,f=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function d(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var p=0;function g(t){return"_leaflet_id"in t||(t._leaflet_id=++p),t._leaflet_id}function v(t,e,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)}}function y(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function _(){return!1}function m(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function x(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function b(t){return x(t).split(/\s+/)}function E(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{}),e)t.options[n]=e[n];return t.options}function k(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function I(t,e){return t.replace(w,function(t,n){var i=e[n];if(void 0===i)throw Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i})}var P=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function S(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return -1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function N(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var T=0;function C(t){var e=+new Date,n=Math.max(0,16-(e-T));return T=e+n,window.setTimeout(t,n)}var O=window.requestAnimationFrame||N("RequestAnimationFrame")||C,R=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function A(t,e,n){if(!n||O!==C)return O.call(window,d(t,e));t.call(e)}function D(t){t&&R.call(window,t)}function z(){}z.extend=function(t){var n=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=n.__super__=this.prototype,r=f(i);for(var o in r.constructor=n,n.prototype=r,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(n[o]=this[o]);return t.statics&&e(n,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=P(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",Error().stack)}}(t.includes),e.apply(null,[r].concat(t.includes))),e(r,t),delete r.statics,delete r.includes,r.options&&(r.options=i.options?f(i.options):{},e(r.options,t.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},n},z.include=function(t){var n=this.prototype.options;return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},z.mergeOptions=function(t){return e(this.prototype.options,t),this},z.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var B={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else{t=b(t);for(var r=0,o=t.length;r<o;r++)this._on(t[r],e,n)}return this},off:function(t,e,n){if(arguments.length){if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=b(t);for(var r=1==arguments.length,o=0,s=t.length;o<s;o++)r?this._off(t[o]):this._off(t[o],e,n)}}else delete this._events;return this},_on:function(t,e,n,i){if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}if(!1===this._listens(t,e,n)){n===this&&(n=void 0);var r={fn:e,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}},_off:function(t,e,n){if(this._events&&(i=this._events[t])){if(1==arguments.length){if(this._firingCount)for(r=0,o=i.length;r<o;r++)i[r].fn=_;delete this._events[t];return}if("function"!=typeof e){console.warn("wrong listener type: "+typeof e);return}var i,r,o,s=this._listens(t,e,n);if(!1!==s){var a=i[s];this._firingCount&&(a.fn=_,this._events[t]=i=i.slice()),i.splice(s,1)}}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var u=o[s],l=u.fn;u.once&&this.off(t,l,u.ctx),l.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,n,i){"string"!=typeof t&&console.warn('"string" type argument expected');var r=e;"function"!=typeof e&&(i=!!e,r=void 0,n=void 0);var o=this._events&&this._events[t];if(o&&o.length&&!1!==this._listens(t,r,n))return!0;if(i){for(var s in this._eventParents)if(this._eventParents[s].listens(t,e,n,i))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var i=this._events[t]||[];if(!e)return!!i.length;n===this&&(n=void 0);for(var r=0,o=i.length;r<o;r++)if(i[r].fn===e&&i[r].ctx===n)return r;return!1},once:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e,!0);else{t=b(t);for(var r=0,o=t.length;r<o;r++)this._on(t[r],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[g(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[g(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var F=z.extend(B);function q(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var V=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function G(t,e,n){return t instanceof q?t:P(t)?new q(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new q(t.x,t.y):new q(t,e,n)}function Z(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(t,e){return!t||t instanceof Z?t:new Z(t,e)}function Y(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function U(t,e){return t instanceof Y?t:new Y(t,e)}function X(t,e,n){if(isNaN(t)||isNaN(e))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function H(t,e,n){return t instanceof X?t:P(t)&&"object"!=typeof t[0]?3===t.length?new X(t[0],t[1],t[2]):2===t.length?new X(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new X(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new X(t,e,n)}q.prototype={clone:function(){return new q(this.x,this.y)},add:function(t){return this.clone()._add(G(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(G(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=V(this.x),this.y=V(this.y),this},distanceTo:function(t){var e=(t=G(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=G(t)).x===this.x&&t.y===this.y},contains:function(t){return Math.abs((t=G(t)).x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}},Z.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof q||"number"==typeof t[0]||"x"in t)e=n=G(t);else if(e=(t=j(t)).min,n=t.max,!e||!n)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return G((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return G(this.min.x,this.max.y)},getTopRight:function(){return G(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof q?G(t):j(t))instanceof Z?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=j(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y;return o&&s},overlaps:function(t){t=j(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y;return o&&s},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t,r=Math.abs(e.y-n.y)*t;return j(G(e.x-i,e.y-r),G(n.x+i,n.y+r))},equals:function(t){return!!t&&(t=j(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},Y.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof X)e=t,n=t;else if(!(t instanceof Y))return t?this.extend(H(t)||U(t)):this;else if(e=t._southWest,n=t._northEast,!e||!n)return this;return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new X(e.lat,e.lng),this._northEast=new X(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new Y(new X(e.lat-i,e.lng-r),new X(n.lat+i,n.lng+r))},getCenter:function(){return new X((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new X(this.getNorth(),this.getWest())},getSouthEast:function(){return new X(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof X||"lat"in t?H(t):U(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof Y?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng;return o&&s},overlaps:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=U(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!!(this._southWest&&this._northEast)}},X.prototype={equals:function(t,e){return!!t&&(t=H(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+m(this.lat,t)+", "+m(this.lng,t)+")"},distanceTo:function(t){return K.distance(this,H(t))},wrap:function(){return K.wrapLatLng(this)},toBounds:function(t){var e=180*t/0x2637f09,n=e/Math.cos(Math.PI/180*this.lat);return U([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new X(this.lat,this.lng,this.alt)}};var W={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new Z(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng;return new X(this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new Y(new X(o.lat-i,o.lng-r),new X(s.lat-i,s.lng-r))}},K=e({},W,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,u=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*u}}),J={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.sin(Math.max(Math.min(n,t.lat),-n)*e);return new q(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new X((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new Z([-(u=6378137*Math.PI),-u],[u,u])};function Q(t,e,n,i){if(P(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=i}function $(t,e,n,i){return new Q(t,e,n,i)}Q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return t.x=(e=e||1)*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new q((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var tt=e({},K,{code:"EPSG:3857",projection:J,transformation:$(l=.5/(Math.PI*J.R),.5,-l,.5)}),te=e({},tt,{code:"EPSG:900913"});function tn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ti(t,e){var n,i,r,o,s,a,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(s=t[n]).length;i<o;i++)a=s[i],u+=(i?"L":"M")+a.x+" "+a.y;u+=e?tD.svg?"z":"x":""}return u||"M0 0"}var tr=document.documentElement.style,to="ActiveXObject"in window,ts=to&&!document.addEventListener,ta="msLaunchUri"in navigator&&!("documentMode"in document),tu=tA("webkit"),tl=tA("android"),th=tA("android 2")||tA("android 3"),tc=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),tf=tl&&tA("Google")&&tc<537&&!("AudioNode"in window),td=!!window.opera,tp=!ta&&tA("chrome"),tg=tA("gecko")&&!tu&&!td&&!to,tv=!tp&&tA("safari"),ty=tA("phantom"),t_="OTransition"in tr,tm=0===navigator.platform.indexOf("Win"),tx=to&&"transition"in tr,tb="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!th,tE="MozPerspective"in tr,tk=!window.L_DISABLE_3D&&(tx||tb||tE)&&!t_&&!ty,tw="undefined"!=typeof orientation||tA("mobile"),tI=!window.PointerEvent&&window.MSPointerEvent,tL=!!(window.PointerEvent||tI),tP="ontouchstart"in window||!!window.TouchEvent,tS=!window.L_NO_TOUCH&&(tP||tL),tM=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,tN=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,e),window.removeEventListener("testPassiveEventSupport",_,e)}catch(t){}return t}(),tT=!!document.createElement("canvas").getContext,tC=!!(document.createElementNS&&tn("svg").createSVGRect),tO=!!tC&&((h=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(h.firstChild&&h.firstChild.namespaceURI)),tR=!tC&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function tA(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var tD={ie:to,ielt9:ts,edge:ta,webkit:tu,android:tl,android23:th,androidStock:tf,opera:td,chrome:tp,gecko:tg,safari:tv,phantom:ty,opera12:t_,win:tm,ie3d:tx,webkit3d:tb,gecko3d:tE,any3d:tk,mobile:tw,mobileWebkit:tw&&tu,mobileWebkit3d:tw&&tb,msPointer:tI,pointer:tL,touch:tS,touchNative:tP,mobileOpera:tw&&td,mobileGecko:tw&&tg,retina:tM,passiveEvents:tN,canvas:tT,svg:tC,vml:tR,inlineSvg:tO,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},tz=tD.msPointer?"MSPointerDown":"pointerdown",tB=tD.msPointer?"MSPointerMove":"pointermove",tF=tD.msPointer?"MSPointerUp":"pointerup",tq=tD.msPointer?"MSPointerCancel":"pointercancel",tV={touchstart:tz,touchmove:tB,touchend:tF,touchcancel:tq},tG={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&eE(e),tH(t,e)},touchmove:tH,touchend:tH,touchcancel:tH},tZ={},tj=!1;function tY(t){tZ[t.pointerId]=t}function tU(t){tZ[t.pointerId]&&(tZ[t.pointerId]=t)}function tX(t){delete tZ[t.pointerId]}function tH(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],tZ)e.touches.push(tZ[n]);e.changedTouches=[e],t(e)}}var tW=ee(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tK=ee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tJ="webkitTransition"===tK||"OTransition"===tK?tK+"End":"transitionend";function tQ(t){return"string"==typeof t?document.getElementById(t):t}function t$(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function t0(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function t1(t){var e=t.parentNode;e&&e.removeChild(t)}function t2(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function t3(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function t4(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function t8(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=t9(t);return n.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function t6(t,e){if(void 0!==t.classList)for(var n=b(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!t8(t,e)){var o=t9(t);t7(t,(o?o+" ":"")+e)}}function t5(t,e){void 0!==t.classList?t.classList.remove(e):t7(t,x((" "+t9(t)+" ").replace(" "+e+" "," ")))}function t7(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function t9(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function et(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ee(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function en(t,e,n){var i=e||new q(0,0);t.style[tW]=(tD.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ei(t,e){t._leaflet_pos=e,tD.any3d?en(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function er(t){return t._leaflet_pos||new q(0,0)}if("onselectstart"in document)n=function(){ef(window,"selectstart",eE)},i=function(){ep(window,"selectstart",eE)};else{var eo=ee(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);n=function(){if(eo){var t=document.documentElement.style;r=t[eo],t[eo]="none"}},i=function(){eo&&(document.documentElement.style[eo]=r,r=void 0)}}function es(){ef(window,"dragstart",eE)}function ea(){ep(window,"dragstart",eE)}function eu(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(el(),o=t,s=t.style.outlineStyle,t.style.outlineStyle="none",ef(window,"keydown",el))}function el(){o&&(o.style.outlineStyle=s,o=void 0,s=void 0,ep(window,"keydown",el))}function eh(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body)return t}function ec(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}function ef(t,e,n,i){if(e&&"object"==typeof e)for(var r in e)ey(t,r,e[r],n);else{e=b(e);for(var o=0,s=e.length;o<s;o++)ey(t,e[o],n,i)}return this}var ed="_leaflet_events";function ep(t,e,n,i){if(1==arguments.length)eg(t),delete t[ed];else if(e&&"object"==typeof e)for(var r in e)e_(t,r,e[r],n);else if(e=b(e),2==arguments.length)eg(t,function(t){return -1!==S(e,t)});else for(var o=0,s=e.length;o<s;o++)e_(t,e[o],n,i);return this}function eg(t,e){for(var n in t[ed]){var i=n.split(/\d/)[0];(!e||e(i))&&e_(t,i,null,null,n)}}var ev={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ey(t,e,n,i){var r=e+g(n)+(i?"_"+g(i):"");if(t[ed]&&t[ed][r])return this;var o=function(e){return n.call(i||t,e||window.event)},s=o;!tD.touchNative&&tD.pointer&&0===e.indexOf("touch")?o=function(t,e,n){return("touchstart"===e&&(tj||(document.addEventListener(tz,tY,!0),document.addEventListener(tB,tU,!0),document.addEventListener(tF,tX,!0),document.addEventListener(tq,tX,!0),tj=!0)),tG[e])?(n=tG[e].bind(this,n),t.addEventListener(tV[e],n,!1),n):(console.warn("wrong event specified:",e),_)}(t,e,o):tD.touch&&"dblclick"===e?o=function(t,e){t.addEventListener("dblclick",e);var n,i=0;function r(t){if(1!==t.detail){n=t.detail;return}if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=ew(t);if(!r.some(function(t){return t instanceof HTMLLabelElement&&t.attributes.for})||r.some(function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement})){var o=Date.now();o-i<=200?2==++n&&e(function(t){var e,n,i={};for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(t)):n=1,i=o}}}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(ev[e]||e,o,!!tD.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){eS(t,e=e||window.event)&&s(e)},t.addEventListener(ev[e],o,!1)):t.addEventListener(e,s,!1):t.attachEvent("on"+e,o),t[ed]=t[ed]||{},t[ed][r]=o}function e_(t,e,n,i,r){r=r||e+g(n)+(i?"_"+g(i):"");var o=t[ed]&&t[ed][r];if(!o)return this;!tD.touchNative&&tD.pointer&&0===e.indexOf("touch")?!function(t,e,n){if(!tV[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(tV[e],n,!1)}(t,e,o):tD.touch&&"dblclick"===e?(t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)):"removeEventListener"in t?t.removeEventListener(ev[e]||e,o,!1):t.detachEvent("on"+e,o),t[ed][r]=null}function em(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ex(t){return ey(t,"wheel",em),this}function eb(t){return ef(t,"mousedown touchstart dblclick contextmenu",em),t._leaflet_disable_click=!0,this}function eE(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ek(t){return eE(t),em(t),this}function ew(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function eI(t,e){if(!e)return new q(t.clientX,t.clientY);var n=ec(e),i=n.boundingClientRect;return new q((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var eL=tD.linux&&tD.chrome?window.devicePixelRatio:tD.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function eP(t){return tD.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/eL:t.deltaY&&1===t.deltaMode?-(20*t.deltaY):t.deltaY&&2===t.deltaMode?-(60*t.deltaY):t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&32765>Math.abs(t.detail)?-(20*t.detail):t.detail?-(60*(t.detail/32765)):0}function eS(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var eM=F.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=er(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ei(this._el,n),this.fire("step")},_complete:function(){D(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),eN=F.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=E(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(H(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tK&&tD.any3d&&!tD.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ef(this._proxy,tJ,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return(n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(H(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan)))?clearTimeout(this._sizeTimer):this._resetView(t,n,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(tD.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(tD.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof q?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():U(t);var n=G(e.paddingTopLeft||e.padding||[0,0]),i=G(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r);return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=U(t)).isValid())throw Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=G(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new eM,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){t6(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!tD.any3d)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom;t=H(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),u=a*this.getZoomScale(s,e),l=r.distanceTo(i)||1;function h(t){var e=(u*u-a*a+(t?-1:1)*4.0658689599999995*l*l)/(2*(t?u:a)*2.0164*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function c(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var d=h(0),p=Date.now(),g=(h(1)-d)/1.42,v=n.duration?1e3*n.duration:1e3*g*.8;function y(){var n,o=(Date.now()-p)/v,u=(1-Math.pow(1-o,1.5))*g;o<=1?(this._flyToFrame=A(y,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(a*(f(d)*(c(n=d+1.42*u)/f(n))-c(d))/2.0164/l)),s),this.getScaleZoom(a/(a*(f(d)/f(d+1.42*u))),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),y.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=U(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid())?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return(this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom))?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return(this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom))?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,U(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=G((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=G(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),o=this.project(t),s=this.getPixelBounds(),a=j([s.min.add(n),s.max.subtract(i)]),u=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var l=o.subtract(a.getCenter()),h=a.extend(o).getSize().subtract(u);r.x+=l.x<0?-h.x:h.x,r.y+=l.y<0?-h.y:h.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=n.divideBy(2).round(),o=i.divideBy(2).round(),s=r.subtract(o);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new X(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){var t;if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),t1(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(D(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)t1(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=t0("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return(this._checkIfLoaded(),this._lastCenter&&!this._moved())?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new Y(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=U(t),n=G(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),u=this.getSize().subtract(n),l=j(this.project(a,i),this.project(s,i)).getSize(),h=tD.any3d?this.options.zoomSnap:1,c=u.x/l.x,f=u.y/l.y,d=e?Math.max(c,f):Math.min(c,f);return i=this.getScaleZoom(d,i),h&&(i=h/100*Math.round(i/(h/100)),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(o,i))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new Z(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(H(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(G(t),e)},layerPointToLatLng:function(t){var e=G(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(H(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(H(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,e){return this.options.crs.distance(H(t),H(e))},containerPointToLayerPoint:function(t){return G(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return G(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(G(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(H(t)))},mouseEventToContainerPoint:function(t){return eI(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=tQ(t);if(e){if(e._leaflet_id)throw Error("Map container is already initialized.")}else throw Error("Map container not found.");ef(e,"scroll",this._onScroll,this),this._containerId=g(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&tD.any3d,t6(t,"leaflet-container"+(tD.touch?" leaflet-touch":"")+(tD.retina?" leaflet-retina":"")+(tD.ielt9?" leaflet-oldie":"")+(tD.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=t$(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ei(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(t6(t.markerPane,"leaflet-zoom-hide"),t6(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ei(this._mapPane,new q(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,n)._move(t,e)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return D(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ei(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[g(this._container)]=this;var e=t?ep:ef;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),tD.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){D(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[g(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)&&(r&&!eS(o,t)||(i.push(n),r))||o===this._container)break;o=o.parentNode}return!i.length&&!s&&!r&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&eu(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var o=this._findEventTargets(t,n);if(i){for(var s=[],a=0;a<i.length;a++)i[a].listens(n,!0)&&s.push(i[a]);o=s.concat(o)}if(o.length){"contextmenu"===n&&eE(t);var u=o[0],l={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var h=u.getLatLng&&(!u._radius||u._radius<=10);l.containerPoint=h?this.latLngToContainerPoint(u.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=h?u.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(n,l,!0),l.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==S(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return er(this._mapPane)||new q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return j([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new Z(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e);return 1>=Math.abs(s.x)&&1>=Math.abs(s.y)?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new Z(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=j(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new q(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=tD.any3d?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){t5(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!!(!0===(e&&e.animate)||this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=t0("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=this._proxy.style[tW];en(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[tW]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){t1(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();en(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!!(!0===n.animate||this.getSize().contains(r))&&(A(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,t6(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&t5(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}}),eT=z.extend({options:{position:"topright"},initialize:function(t){E(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return t6(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(t1(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),eC=function(t){return new eT(t)};eN.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=t0("div",e+"control-container",this._container);function i(i,r){t[i+r]=t0("div",e+i+" "+e+r,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)t1(this._controlCorners[t]);t1(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eO=eT.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:+(i<n)}},initialize:function(t,e,n){for(var i in E(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return eT.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(g(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){t6(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(t6(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):t5(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return t5(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=t0("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),eb(e),ex(e);var i=this._section=t0("section",t+"-list");n&&(this._map.on("click",this.collapse,this),ef(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=t0("a",t+"-toggle",e);r.href="#",r.title="Layers",r.setAttribute("role","button"),ef(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){eE(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=t0("div",t+"-base",i),this._separator=t0("div",t+"-separator",i),this._overlaysList=t0("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&g(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(d(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;t2(this._baseLayersList),t2(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=+!i.overlay;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(g(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n=document.createElement("div");return n.innerHTML='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+g(this),i),this._layerControlInputs.push(e),e.layerId=g(t.layer),ef(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,ef(t,"click",eE),this.expand();var e=this;setTimeout(function(){ep(t,"click",eE),e._preventClick=!1})}}),eR=eT.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=t0("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=t0("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),eb(o),ef(o,"click",ek),ef(o,"click",r,this),ef(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";t5(this._zoomInButton,e),t5(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(t6(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(t6(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});eN.mergeOptions({zoomControl:!0}),eN.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new eR,this.addControl(this.zoomControl))});var eA=eT.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=t0("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=t0("div",e,n)),t.imperial&&(this._iScale=t0("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t);this._updateScale(this._mScale,e<1e3?e+" m":e/1e3+" km",e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),eD=eT.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(tD.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){E(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=t0("div","leaflet-control-attribution"),eb(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});eN.mergeOptions({attributionControl:!0}),eN.addInitHook(function(){this.options.attributionControl&&new eD().addTo(this)}),eT.Layers=eO,eT.Zoom=eR,eT.Scale=eA,eT.Attribution=eD,eC.layers=function(t,e,n){return new eO(t,e,n)},eC.zoom=function(t){return new eR(t)},eC.scale=function(t){return new eA(t)},eC.attribution=function(t){return new eD(t)};var ez=z.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});ez.addTo=function(t,e){return t.addHandler(e,this),this};var eB=tD.touch?"touchstart mousedown":"mousedown",eF=F.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){E(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(ef(this._dragStartTarget,eB,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(eF._dragging===this&&this.finishDrag(!0),ep(this._dragStartTarget,eB,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(!this._enabled||(this._moved=!1,t8(this._element,"leaflet-zoom-anim")))){if(t.touches&&1!==t.touches.length){eF._dragging===this&&this.finishDrag();return}if(!eF._dragging&&!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(eF._dragging=this,this._preventOutline&&eu(this._element),es(),n(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=eh(this._element);this._startPoint=new q(e.clientX,e.clientY),this._startPos=er(this._element),this._parentScale=ec(i);var r="mousedown"===t.type;ef(document,r?"mousemove":"touchmove",this._onMove,this),ef(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new q(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,eE(t),this._moved||(this.fire("dragstart"),this._moved=!0,t6(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),t6(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ei(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){t5(document.body,"leaflet-dragging"),this._lastTarget&&(t5(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ep(document,"mousemove touchmove",this._onMove,this),ep(document,"mouseup touchend touchcancel",this._onUp,this),ea(),i();var e=this._moved&&this._moving;this._moving=!1,eF._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function eq(t,e,n){var i,r,o,s,a,u,l,h,c,f=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=eX(t[r],e);for(s=0;s<4;s++){for(r=0,h=f[s],i=[],o=(l=t.length)-1;r<l;o=r++)a=t[r],u=t[o],a._code&h?u._code&h||((c=eU(u,a,h,e,n))._code=eX(c,e),i.push(c)):(u._code&h&&((c=eU(u,a,h,e,n))._code=eX(c,e),i.push(c)),i.push(a));t=i}return t}function eV(t,e){if(!t||0===t.length)throw Error("latlngs not passed");eW(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var n,i,r,o,s,a,u,l,h,c=H([0,0]),f=U(t);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(c=eG(t));var d=t.length,p=[];for(n=0;n<d;n++){var g=H(t[n]);p.push(e.project(H([g.lat-c.lat,g.lng-c.lng])))}for(n=0,a=u=l=0,i=d-1;n<d;i=n++)r=p[n],o=p[i],s=r.y*o.x-o.y*r.x,u+=(r.x+o.x)*s,l+=(r.y+o.y)*s,a+=3*s;h=0===a?p[0]:[u/a,l/a];var v=e.unproject(G(h));return H([v.lat+c.lat,v.lng+c.lng])}function eG(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=H(t[r]);e+=o.lat,n+=o.lng,i++}return H([e/i,n/i])}function eZ(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var s,a,u,l=0;for(a=r+1;a<=o-1;a++)(u=eH(e[a],e[r],e[o],!0))>l&&(s=a,l=u);l>i&&(n[s]=1,t(e,n,i,r,s),t(e,n,i,s,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)(function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i})(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function ej(t,e,n){return Math.sqrt(eH(t,e,n,!0))}function eY(t,e,n,i,r){var o,s,u,l=i?a:eX(t,n),h=eX(e,n);for(a=h;;){if(!(l|h))return[t,e];if(l&h)return!1;u=eX(s=eU(t,e,o=l||h,n,r),n),o===l?(t=s,l=u):(e=s,h=u)}}function eU(t,e,n,i,r){var o,s,a=e.x-t.x,u=e.y-t.y,l=i.min,h=i.max;return 8&n?(o=t.x+a*(h.y-t.y)/u,s=h.y):4&n?(o=t.x+a*(l.y-t.y)/u,s=l.y):2&n?(o=h.x,s=t.y+u*(h.x-t.x)/a):1&n&&(o=l.x,s=t.y+u*(l.x-t.x)/a),new q(o,s,r)}function eX(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function eH(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,u=n.y-s,l=a*a+u*u;return l>0&&((r=((t.x-o)*a+(t.y-s)*u)/l)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=u*r)),a=t.x-o,u=t.y-s,i?a*a+u*u:new q(o,s)}function eW(t){return!P(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function eK(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),eW(t)}function eJ(t,e){if(!t||0===t.length)throw Error("latlngs not passed");eW(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var n,i,r,o,s,a,u,l,h=H([0,0]),c=U(t);c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(h=eG(t));var f=t.length,d=[];for(n=0;n<f;n++){var p=H(t[n]);d.push(e.project(H([p.lat-h.lat,p.lng-h.lng])))}for(n=0,i=0;n<f-1;n++)i+=d[n].distanceTo(d[n+1])/2;if(0===i)l=d[0];else for(n=0,o=0;n<f-1;n++)if(s=d[n],a=d[n+1],(o+=r=s.distanceTo(a))>i){u=(o-i)/r,l=[a.x-u*(a.x-s.x),a.y-u*(a.y-s.y)];break}var g=e.unproject(G(l));return H([g.lat+h.lat,g.lng+h.lng])}var eQ={project:function(t){return new q(t.lng,t.lat)},unproject:function(t){return new X(t.y,t.x)},bounds:new Z([-180,-90],[180,90])},e$={R:6378137,R_MINOR:6356752.314245179,bounds:new Z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i);return i=-n*Math.log(Math.max(Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2),1e-10)),new q(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)l=Math.PI/2-2*Math.atan(s*(e=Math.pow((1-(e=o*Math.sin(a)))/(1+e),o/2)))-a,a+=l;return new X(a*n,t.x*n/i)}},e0=e({},K,{code:"EPSG:3395",projection:e$,transformation:$(c=.5/(Math.PI*e$.R),.5,-c,.5)}),e1=e({},K,{code:"EPSG:4326",projection:eQ,transformation:$(1/180,1,-1/180,.5)}),e2=e({},W,{projection:eQ,transformation:$(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});W.Earth=K,W.EPSG3395=e0,W.EPSG3857=tt,W.EPSG900913=te,W.EPSG4326=e1,W.Simple=e2;var e3=F.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[g(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[g(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});eN.include({addLayer:function(t){if(!t._layerAdd)throw Error("The provided object is not a Layer.");var e=g(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=g(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return g(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?P(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[g(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=g(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var e4=e3.extend({initialize:function(t,e){var n,i;if(E(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return g(t)}}),e8=e4.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),e4.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),e4.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Y;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),e6=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){E(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=G(i),o=G("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return tD.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),e5=e6.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof e5.imagePath&&(e5.imagePath=this._detectIconPath()),(this.options.imagePath||e5.imagePath)+e6.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t);return i&&i[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=t0("div","leaflet-default-icon-path",document.body),e=t$(t,"background-image")||t$(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),e7=ez.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new eF(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),t6(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&t5(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=er(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),u=j(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!u.contains(o)){var l=G((Math.max(u.max.x,o.x)-u.max.x)/(s.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(s.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(s.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(s.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),ei(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=A(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(D(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=er(e._icon),r=e._map.layerPointToLatLng(i);n&&ei(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){D(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),e9=e3.extend({options:{icon:new e5,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){E(this,e),this._latlng=H(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=H(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),t6(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ef(n,"focus",this._panOnFocus,this);var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(t6(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ep(this._icon,"focus",this._panOnFocus,this),t1(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&t1(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ei(this._icon,t),this._shadow&&ei(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(t6(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),e7)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new e7(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&et(this._icon,t),this._shadow&&et(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?G(e.iconSize):G(0,0),i=e.iconAnchor?G(e.iconAnchor):G(0,0);t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),nt=e3.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return E(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ne=nt.extend({options:{fill:!0,radius:10},initialize:function(t,e){E(this,e),this._latlng=H(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=H(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return nt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new Z(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),nn=ne.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),E(this,n),this._latlng=H(t),isNaN(this.options.radius))throw Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Y(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:nt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===K.distance){var r=Math.PI/180,o=this._mRadius/K.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),u=s.add(a).divideBy(2),l=n.unproject(u).lat,h=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:u.x-n.project([l,t-h]).x,this._radiusY=u.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),ni=nt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){E(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=eH,s=0,a=this._parts.length;s<a;s++)for(var u=this._parts[s],l=1,h=u.length;l<h;l++){var c=o(t,e=u[l-1],n=u[l],!0);c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return eJ(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=H(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Y,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return eW(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=eW(t),i=0,r=t.length;i<r;i++)n?(e[i]=H(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new Z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new q(t,t);this._rawPxBounds&&(this._pxBounds=new Z([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof X,s=t.length;if(o){for(i=0,r=[];i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}var e,n,i,r,o,s,a,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=eY(a[n],a[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(s[0]),(s[1]!==a[n+1]||n===o-2)&&(u[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=eZ(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((e||0!==i)&&ej(t,a[r],a[i])<=u)return!0;return!1}});ni._flat=eK;var nr=ni.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error("Must add layer to map before using getCenter()");return eV(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=ni.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof X&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){ni.prototype._setLatLngs.call(this,t),eW(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return eW(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new q(e,e);if(t=new Z(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip){this._parts=this._rings;return}for(var i,r=0,o=this._rings.length;r<o;r++)(i=eq(this._rings[r],t,!0)).length&&this._parts.push(i)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(u=(e=this._parts[r]).length)-1;o<u;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||ni.prototype._containsPoint.call(this,t,!0)}}),no=e8.extend({initialize:function(t,e){E(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=P(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=ns(t,o);return s?(s.feature=nd(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ns(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,u=[],l=e&&e.pointToLayer,h=e&&e.coordsToLatLng||nu;if(!a&&!s)return null;switch(s.type){case"Point":return na(l,t,n=h(a),e);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=h(a[r]),u.push(na(l,t,n,e));return new e8(u);case"LineString":case"MultiLineString":return new ni(nl(a,+("LineString"!==s.type),h),e);case"Polygon":case"MultiPolygon":return new nr(nl(a,"Polygon"===s.type?1:2,h),e);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=ns({geometry:s.geometries[r],type:"Feature",properties:t.properties},e);c&&u.push(c)}return new e8(u);case"FeatureCollection":for(r=0,o=s.features.length;r<o;r++){var f=ns(s.features[r],e);f&&u.push(f)}return new e8(u);default:throw Error("Invalid GeoJSON object.")}}function na(t,e,n,i){return t?t(e,n):new e9(n,i&&i.markersInheritOptions&&i)}function nu(t){return new X(t[1],t[0],t[2])}function nl(t,e,n){for(var i=[],r=0,o=t.length;r<o;r++)i.push(e?nl(t[r],e-1,n):(n||nu)(t[r]));return i}function nh(t,e){return void 0!==(t=H(t)).alt?[m(t.lng,e),m(t.lat,e),m(t.alt,e)]:[m(t.lng,e),m(t.lat,e)]}function nc(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?nc(t[o],eW(t[o])?0:e-1,n,i):nh(t[o],i));return!e&&n&&r.length>0&&r.push(r[0].slice()),r}function nf(t,n){return t.feature?e({},t.feature,{geometry:n}):nd(n)}function nd(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var np={toGeoJSON:function(t){return nf(this,{type:"Point",coordinates:nh(this.getLatLng(),t)})}};function ng(t,e){return new no(t,e)}e9.include(np),nn.include(np),ne.include(np),ni.include({toGeoJSON:function(t){var e=!eW(this._latlngs),n=nc(this._latlngs,+!!e,!1,t);return nf(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),nr.include({toGeoJSON:function(t){var e=!eW(this._latlngs),n=e&&!eW(this._latlngs[0]),i=nc(this._latlngs,n?2:+!!e,!0,t);return e||(i=[i]),nf(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),e4.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),nf(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return(this.eachLayer(function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=nd(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n)?nf(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var nv=e3.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=U(e),E(this,n)},onAdd:function(){!this._image&&(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(t6(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){t1(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&t3(this._image),this},bringToBack:function(){return this._map&&t4(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:t0("img");if(t6(e,"leaflet-image-layer"),this._zoomAnimated&&t6(e,"leaflet-zoom-animated"),this.options.className&&t6(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;en(this._image,n,e)},_reset:function(){var t=this._image,e=new Z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ei(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){et(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ny=nv.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:t0("video");if(t6(e,"leaflet-image-layer"),this._zoomAnimated&&t6(e,"leaflet-zoom-animated"),this.options.className&&t6(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onloadeddata=d(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=n.length>0?i:[e.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var s=t0("source");s.src=this._url[o],e.appendChild(s)}}}),n_=nv.extend({_initImage:function(){var t=this._image=this._url;t6(t,"leaflet-image-layer"),this._zoomAnimated&&t6(t,"leaflet-zoom-animated"),this.options.className&&t6(t,this.options.className),t.onselectstart=_,t.onmousemove=_}}),nm=e3.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof X||P(t))?(this._latlng=H(t),E(this,e)):(E(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&et(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&et(this._container,1),this.bringToFront(),this.options.interactive&&(t6(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(et(this._container,0),this._removeTimeout=setTimeout(d(t1,void 0,this._container),200)):t1(this._container),this.options.interactive&&(t5(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=H(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&t3(this._container),this},bringToBack:function(){return this._map&&t4(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof e8){e=null;var n=this._source._layers;for(var i in n)if(n[i]._map){e=n[i];break}if(!e)return!1;this._source=e}if(!t){if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw Error("Unable to get source layer LatLng.")}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=G(this.options.offset),n=this._getAnchor();this._zoomAnimated?ei(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});eN.include({_initOverlay:function(t,e,n,i){var r=e;return r instanceof t||(r=new t(i).setContent(e)),n&&r.setLatLng(n),r}}),e3.include({_initOverlay:function(t,e,n,i){var r=n;return r instanceof t?(E(r,i),r._source=this):(r=e&&!i?e:new t(i,this)).setContent(n),r}});var nx=nm.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,nm.prototype.openOn.call(this,t)},onAdd:function(t){nm.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),!this._source||(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nt||this._source.on("preclick",em))},onRemove:function(t){nm.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),!this._source||(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nt||this._source.off("preclick",em))},getEvents:function(){var t=nm.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=t0("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=t0("div",t+"-content-wrapper",e);if(this._contentNode=t0("div",t+"-content",n),eb(e),ex(this._contentNode),ef(e,"contextmenu",em),this._tipContainer=t0("div",t+"-tip-container",e),this._tip=t0("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=t0("a",t+"-close-button",e);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',ef(i,"click",function(t){eE(t),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;e.width=(n=Math.max(n=Math.min(n,this.options.maxWidth),this.options.minWidth))+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",t6(t,o)):t5(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ei(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(t$(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new q(this._containerLeft,-n-this._containerBottom);r._add(er(this._container));var o=t.layerPointToContainerPoint(r),s=G(this.options.autoPanPadding),a=G(this.options.autoPanPaddingTopLeft||s),u=G(this.options.autoPanPaddingBottomRight||s),l=t.getSize(),h=0,c=0;o.x+i+u.x>l.x&&(h=o.x+i-l.x+u.x),o.x-h-a.x<0&&(h=o.x-a.x),o.y+n+u.y>l.y&&(c=o.y+n-l.y+u.y),o.y-c-a.y<0&&(c=o.y-a.y),(h||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([h,c]))}},_getAnchor:function(){return G(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});eN.mergeOptions({closePopupOnClick:!0}),eN.include({openPopup:function(t,e,n){return this._initOverlay(nx,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),e3.include({bindPopup:function(t,e){return this._popup=this._initOverlay(nx,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof e8||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){ek(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof nt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var nb=nm.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){nm.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){nm.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=nm.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=t0("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,u=r.offsetWidth,l=r.offsetHeight,h=G(this.options.offset),c=this._getAnchor();"top"===a?(e=u/2,n=l):"bottom"===a?(e=u/2,n=0):("center"===a?e=u/2:"right"===a?e=0:"left"===a?e=u:s.x<o.x?(a="right",e=0):(a="left",e=u+(h.x+c.x)*2),n=l/2),t=t.subtract(G(e,n,!0)).add(h).add(c),t5(r,"leaflet-tooltip-right"),t5(r,"leaflet-tooltip-left"),t5(r,"leaflet-tooltip-top"),t5(r,"leaflet-tooltip-bottom"),t6(r,"leaflet-tooltip-"+a),ei(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&et(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return G(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});eN.include({openTooltip:function(t,e,n){return this._initOverlay(nb,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),e3.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nb,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,e.click=this._openTooltip,this._map?this._addFocusListeners():e.add=this._addFocusListeners),this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),this[t?"off":"on"](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof e8||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&(ef(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),ef(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var nE=e6.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(t2(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=G(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});e6.Default=e5;var nk=e3.extend({options:{tileSize:256,opacity:1,updateWhenIdle:tD.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){E(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),t1(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(t3(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(t4(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof q?t:new q(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tD.ielt9){et(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);et(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(D(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=t0("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(t1(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=t0("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),_(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)t1(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new q(+r,+o);a.z=+s;var u=this._tileCoordsToKey(a),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new q(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),u=this._tiles[a];if(u&&u.active){u.retain=!0;continue}u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;(!i||o)&&(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();tD.any3d?en(t.el,r,i):ei(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new Z(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,u=new Z(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var h=this._tiles[l].coords;h.z===this._tileZoom&&u.contains(new q(h.x,h.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var c=r.min.y;c<=r.max.y;c++)for(var f=r.min.x;f<=r.max.x;f++){var d=new q(f,c);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:s.push(d)}}if(s.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(f=0;f<s.length;f++)this._addTile(s[f],g);this._level.el.appendChild(g)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new Y(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new q(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(t1(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){t6(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=_,t.onmousemove=_,tD.ielt9&&this.options.opacity<1&&et(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&A(d(this._tileReady,this,t,null,r)),ei(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(et(n.el,0),D(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(t6(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tD.ielt9||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new q(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new Z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),nw=nk.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=E(this,e)).detectRetina&&tD.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return ef(n,"load",d(this._tileOnLoad,this,e,n)),ef(n,"error",d(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:tD.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=i),n["-y"]=i}return I(this._url,e(n,this.options))},_tileOnLoad:function(t,e){tD.ielt9?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=_,e.onerror=_,!e.complete)){e.src=M;var n=this._tiles[t].coords;t1(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",M),nk.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==M))return nk.prototype._tileReady.call(this,t,e,n)}});function nI(t,e){return new nw(t,e)}var nL=nw.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var o=(n=E(this,n)).detectRetina&&tD.retina?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,nw.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=j(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===e1?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=nw.prototype.getTileUrl.call(this,t);return a+k(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});nw.WMS=nL,nI.wms=function(t,e){return new nL(t,e)};var nP=e3.extend({options:{padding:.1},initialize:function(t){E(this,t),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),t6(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),o=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(t,e));tD.any3d?en(this._container,o,n):ei(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new Z(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),nS=nP.extend({options:{tolerance:0},getEvents:function(){var t=nP.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){nP.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ef(t,"mousemove",this._onMouseMove,this),ef(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ef(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){D(this._redrawRequest),delete this._ctx,t1(this._container),ep(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){nP.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=tD.retina?2:1;ei(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",tD.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){nP.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[g(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[g(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(isNaN(e=Number(i[n])))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Z,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,u=this._ctx;if(a){for(u.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving())&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(t5(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(t6(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;if(!n)return;n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;if(!i)return;i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function nM(t){return tD.canvas?new nS(t):null}var nN=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),nT=tD.vml?nN:tn,nC=nP.extend({_initContainer:function(){this._container=nT("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nT("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){t1(this._container),ep(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){nP.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ei(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=nT("path");t.options.className&&t6(e,t.options.className),t.options.interactive&&t6(e,"leaflet-interactive"),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){t1(t._path),t.removeInteractiveTarget(t._path),delete this._layers[g(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,ti(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,r="a"+n+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+-(2*n)+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){t3(t._path)},_bringToBack:function(t){t4(t._path)}});function nO(t){return tD.svg||tD.vml?new nC(t):null}tD.vml&&nC.include({_initContainer:function(){this._container=t0("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(nP.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=nN("shape");t6(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=nN("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[g(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;t1(e),t.removeInteractiveTarget(e),delete this._layers[g(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=nN("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=P(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=nN("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){t3(t._container)},_bringToBack:function(t){t4(t._container)}}),eN.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&nM(t)||nO(t)}});var nR=nr.extend({initialize:function(t,e){nr.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=U(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});nC.create=nT,nC.pointsToPath=ti,no.geometryToLayer=ns,no.coordsToLatLng=nu,no.coordsToLatLngs=nl,no.latLngToCoords=nh,no.latLngsToCoords=nc,no.getFeature=nf,no.asFeature=nd,eN.mergeOptions({boxZoom:!0});var nA=ez.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ef(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ep(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){t1(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),n(),es(),this._startPoint=this._map.mouseEventToContainerPoint(t),ef(document,{contextmenu:ek,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=t0("div","leaflet-zoom-box",this._container),t6(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new Z(this._point,this._startPoint),n=e.getSize();ei(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(t1(this._box),t5(this._container,"leaflet-crosshair")),i(),ea(),ep(document,{contextmenu:ek,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var e=new Y(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});eN.addInitHook("addHandler","boxZoom",nA),eN.mergeOptions({doubleClickZoom:!0});var nD=ez.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});eN.addInitHook("addHandler","doubleClickZoom",nD),eN.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nz=ez.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new eF(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}t6(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){t5(this._map._container,"leaflet-grab"),t5(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=U(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),u=a.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),h=a.multiplyBy(l/u),c=l/(n.inertiaDeceleration*s),f=h.multiplyBy(-c/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),A(function(){e.panBy(f,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});eN.addInitHook("addHandler","dragging",nz),eN.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nB=ez.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ef(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ep(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){ef(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ep(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!t.altKey&&!t.ctrlKey&&!t.metaKey){var e,n=t.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress){if(e=this._panKeys[n],t.shiftKey&&(e=G(e).multiplyBy(3)),i.options.maxBounds&&(e=i._limitOffset(G(e),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(e)));i.panTo(r)}else i.panBy(e)}}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}ek(t)}}});eN.addInitHook("addHandler","keyboard",nB),eN.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var nF=ez.extend({addHooks:function(){ef(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ep(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=eP(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),i),ek(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,o=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});eN.addInitHook("addHandler","scrollWheelZoom",nF),eN.mergeOptions({tapHold:tD.touchNative&&tD.safari&&tD.mobile,tapTolerance:15});var nq=ez.extend({addHooks:function(){ef(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ep(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new q(e.clientX,e.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(ef(document,"touchend",eE),ef(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),600),ef(document,"touchend touchcancel contextmenu",this._cancel,this),ef(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){ep(document,"touchend",eE),ep(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),ep(document,"touchend touchcancel contextmenu",this._cancel,this),ep(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new q(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});eN.addInitHook("addHandler","tapHold",nq),eN.mergeOptions({touchZoom:tD.touch,bounceAtZoomLimits:!0});var nV=ez.extend({addHooks:function(){t6(this._map._container,"leaflet-touch-zoom"),ef(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){t5(this._map._container,"leaflet-touch-zoom"),ep(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ef(document,"touchmove",this._onTouchMove,this),ef(document,"touchend touchcancel",this._onTouchEnd,this),eE(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var o=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),D(this._animRequest);var s=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=A(s,this,!0),eE(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,D(this._animRequest),ep(document,"touchmove",this._onTouchMove,this),ep(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});eN.addInitHook("addHandler","touchZoom",nV),eN.BoxZoom=nA,eN.DoubleClickZoom=nD,eN.Drag=nz,eN.Keyboard=nB,eN.ScrollWheelZoom=nF,eN.TapHold=nq,eN.TouchZoom=nV,t.Bounds=Z,t.Browser=tD,t.CRS=W,t.Canvas=nS,t.Circle=nn,t.CircleMarker=ne,t.Class=z,t.Control=eT,t.DivIcon=nE,t.DivOverlay=nm,t.DomEvent={__proto__:null,on:ef,off:ep,stopPropagation:em,disableScrollPropagation:ex,disableClickPropagation:eb,preventDefault:eE,stop:ek,getPropagationPath:ew,getMousePosition:eI,getWheelDelta:eP,isExternalTarget:eS,addListener:ef,removeListener:ep},t.DomUtil={__proto__:null,TRANSFORM:tW,TRANSITION:tK,TRANSITION_END:tJ,get:tQ,getStyle:t$,create:t0,remove:t1,empty:t2,toFront:t3,toBack:t4,hasClass:t8,addClass:t6,removeClass:t5,setClass:t7,getClass:t9,setOpacity:et,testProp:ee,setTransform:en,setPosition:ei,getPosition:er,get disableTextSelection(){return n},get enableTextSelection(){return i},disableImageDrag:es,enableImageDrag:ea,preventOutline:eu,restoreOutline:el,getSizedParentNode:eh,getScale:ec},t.Draggable=eF,t.Evented=F,t.FeatureGroup=e8,t.GeoJSON=no,t.GridLayer=nk,t.Handler=ez,t.Icon=e6,t.ImageOverlay=nv,t.LatLng=X,t.LatLngBounds=Y,t.Layer=e3,t.LayerGroup=e4,t.LineUtil={__proto__:null,simplify:eZ,pointToSegmentDistance:ej,closestPointOnSegment:function(t,e,n){return eH(t,e,n)},clipSegment:eY,_getEdgeIntersection:eU,_getBitCode:eX,_sqClosestPointOnSegment:eH,isFlat:eW,_flat:eK,polylineCenter:eJ},t.Map=eN,t.Marker=e9,t.Mixin={Events:B},t.Path=nt,t.Point=q,t.PolyUtil={__proto__:null,clipPolygon:eq,polygonCenter:eV,centroid:eG},t.Polygon=nr,t.Polyline=ni,t.Popup=nx,t.PosAnimation=eM,t.Projection={__proto__:null,LonLat:eQ,Mercator:e$,SphericalMercator:J},t.Rectangle=nR,t.Renderer=nP,t.SVG=nC,t.SVGOverlay=n_,t.TileLayer=nw,t.Tooltip=nb,t.Transformation=Q,t.Util={__proto__:null,extend:e,create:f,bind:d,get lastId(){return p},stamp:g,throttle:v,wrapNum:y,falseFn:_,formatNum:m,trim:x,splitWords:b,setOptions:E,getParamString:k,template:I,isArray:P,indexOf:S,emptyImageUrl:M,requestFn:O,cancelFn:R,requestAnimFrame:A,cancelAnimFrame:D},t.VideoOverlay=ny,t.bind=d,t.bounds=j,t.canvas=nM,t.circle=function(t,e,n){return new nn(t,e,n)},t.circleMarker=function(t,e){return new ne(t,e)},t.control=eC,t.divIcon=function(t){return new nE(t)},t.extend=e,t.featureGroup=function(t,e){return new e8(t,e)},t.geoJSON=ng,t.geoJson=ng,t.gridLayer=function(t){return new nk(t)},t.icon=function(t){return new e6(t)},t.imageOverlay=function(t,e,n){return new nv(t,e,n)},t.latLng=H,t.latLngBounds=U,t.layerGroup=function(t,e){return new e4(t,e)},t.map=function(t,e){return new eN(t,e)},t.marker=function(t,e){return new e9(t,e)},t.point=G,t.polygon=function(t,e){return new nr(t,e)},t.polyline=function(t,e){return new ni(t,e)},t.popup=function(t,e){return new nx(t,e)},t.rectangle=function(t,e){return new nR(t,e)},t.setOptions=E,t.stamp=g,t.svg=nO,t.svgOverlay=function(t,e,n){return new n_(t,e,n)},t.tileLayer=nI,t.tooltip=function(t,e){return new nb(t,e)},t.transformation=$,t.version="1.9.4",t.videoOverlay=function(t,e,n){return new ny(t,e,n)};var nG=window.L;t.noConflict=function(){return window.L=nG,this},window.L=t}({});var e={};!function(t){function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function n(t){if(Array.isArray(t))return t}function i(t,e,n){return e=l(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function r(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=m(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function u(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(c=function(){return!!t})()}function f(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function d(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){return n(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);u=!0);}catch(t){l=!0,r=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(t,e)||m(t,e)||d()}function v(t){return function(t){if(Array.isArray(t))return e(t)}(t)||f(t)||m(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,n){if(t){if("string"==typeof t)return e(t,n);var i=({}).toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}var x={centimeters:0x25f96350,centimetres:0x25f96350,degrees:360/(2*Math.PI),feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:0x17bbde120,millimetres:0x17bbde120,nauticalmiles:6371008.8/1852,radians:1,yards:6967335.223679999},b={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:29155334959812285e-23,millimeters:1e6,millimetres:1e6,yards:1.195990046};function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function k(t,e){switch(t){case"Point":return w(e).geometry;case"LineString":return M(e).geometry;case"Polygon":return P(e).geometry;case"MultiPoint":return O(e).geometry;case"MultiLineString":return C(e).geometry;case"MultiPolygon":return R(e).geometry;default:throw Error(t+" is invalid")}}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!U(t[0])||!U(t[1]))throw Error("coordinates must contain numbers");return E({type:"Point",coordinates:t},e,n)}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T(t.map(function(t){return w(t,e)}),n)}function P(t,e){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw Error("First and last Position are not equivalent.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw Error("First and last Position are not equivalent.")}}catch(t){r.e(t)}finally{r.f()}return E({type:"Polygon",coordinates:t},e,i)}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T(t.map(function(t){return P(t,e)}),n)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw Error("coordinates must be an array of two or more positions");return E({type:"LineString",coordinates:t},e,n)}function N(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return T(t.map(function(t){return M(t,e)}),n)}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function C(t,e){return E({type:"MultiLineString",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function O(t,e){return E({type:"MultiPoint",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function R(t,e){return E({type:"MultiPolygon",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function A(t,e){return E({type:"GeometryCollection",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=x[e];if(!n)throw Error(e+" units is invalid");return t*n}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=x[e];if(!n)throw Error(e+" units is invalid");return t/n}function F(t,e){return G(B(t,e))}function q(t){var e=t%360;return e<0&&(e+=360),e}function V(t){return(t%=360)>180?t-360:t<-180?t+360:t}function G(t){return t%(2*Math.PI)*180/Math.PI}function Z(t){return t%360*Math.PI/180}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw Error("length must be a positive number");return z(B(t,e),n)}function Y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw Error("area must be a positive number");var i=b[e];if(!i)throw Error("invalid original units");var r=b[n];if(!r)throw Error("invalid final units");return t/i*r}function U(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function X(t){return null!==t&&"object"===_(t)&&!Array.isArray(t)}function H(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!U(t))throw Error("bbox must only contain numbers")})}function W(t){if(!t)throw Error("id is required");if(-1===["string","number"].indexOf(_(t)))throw Error("id must be a number or a string")}var K=Object.freeze({__proto__:null,areaFactors:b,azimuthToBearing:V,bearingToAzimuth:q,convertArea:Y,convertLength:j,degreesToRadians:Z,earthRadius:6371008.8,factors:x,feature:E,featureCollection:T,geometry:k,geometryCollection:A,isNumber:U,isObject:X,lengthToDegrees:F,lengthToRadians:B,lineString:M,lineStrings:N,multiLineString:C,multiPoint:O,multiPolygon:R,point:w,points:I,polygon:P,polygons:S,radiansToDegrees:G,radiansToLength:z,round:D,validateBBox:H,validateId:W});function J(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return v(t.geometry.coordinates);if("Point"===t.type)return v(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return v(t);throw Error("coord must be GeoJSON Point or an Array of numbers")}function Q(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(t){if(t.length>1&&U(t[0])&&U(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return $(t[0]);throw Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw Error("type and name required");if(!t||t.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function te(t,e,n){if(!t)throw Error("No feature passed");if(!n)throw Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function tn(t,e,n){if(!t)throw Error("No featureCollection passed");if(!n)throw Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw Error("Invalid input to "+n+", FeatureCollection required");var i,r=a(t.features);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(!o||"Feature"!==o.type||!o.geometry)throw Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}catch(t){r.e(t)}finally{r.f()}}function ti(t){return"Feature"===t.type?t.geometry:t}function tr(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var to=Object.freeze({__proto__:null,collectionOf:tn,containsNumber:$,featureOf:te,geojsonType:tt,getCoord:J,getCoords:Q,getGeom:ti,getType:tr});function ts(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final){var n;return(ts(e,t)+180)%360}var i=J(t),r=J(e),o=Z(i[0]),s=Z(r[0]),a=Z(i[1]),u=Z(r[1]);return G(Math.atan2(Math.sin(s-o)*Math.cos(u),Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o)))}function ta(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=J(t),o=Z(r[0]),s=Z(r[1]),a=Z(n),u=B(e,i.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return w([G(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),G(l)],i.properties)}function tu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=J(t),r=J(e),o=Math.pow(Math.sin(Z(r[1]-i[1])/2),2)+Math.pow(Math.sin(Z(r[0]-i[0])/2),2)*Math.cos(Z(i[1]))*Math.cos(Z(r[1]));return z(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),n.units)}function tl(t,e){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?th(J(e),J(t)):th(J(t),J(e)))>180?-(360-n):n}function th(t,e){var n=Z(t[1]),i=Z(e[1]),r=Z(e[0]-t[0]);return r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI),(G(Math.atan2(r,Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4))))+360)%360}function tc(t,e,n){if(null!==t)for(var i,r,o,s,a,u,l,h,c=0,f=0,d=t.type,p="FeatureCollection"===d,g="Feature"===d,v=p?t.features.length:1,y=0;y<v;y++){a=(h=!!(l=p?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<a;_++){var m=0,x=0;if(null!==(s=h?l.geometries[_]:l)){u=s.coordinates;var b=s.type;switch(c=n&&("Polygon"===b||"MultiPolygon"===b)?1:0,b){case null:break;case"Point":if(!1===e(u,f,y,m,x))return!1;f++,m++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,y,m,x))return!1;f++,"MultiPoint"===b&&m++}"LineString"===b&&m++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-c;r++){if(!1===e(u[i][r],f,y,m,x))return!1;f++}"MultiLineString"===b&&m++,"Polygon"===b&&x++}"Polygon"===b&&m++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(x=0,r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-c;o++){if(!1===e(u[i][r][o],f,y,m,x))return!1;f++}x++}m++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===tc(s.geometries[i],e,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function tf(t,e,n,i){var r=n;return tc(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)},i),r}function td(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function tp(t,e,n){var i=n;return td(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function tg(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function tv(t,e,n){var i=n;return tg(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function ty(t){var e=[];return tc(t,function(t){e.push(t)}),e}function t_(t,e){var n,i,r,o,s,a,u,l,h,c,f=0,d="FeatureCollection"===t.type,p="Feature"===t.type,g=d?t.features.length:1;for(n=0;n<g;n++){for(a=d?t.features[n].geometry:p?t.geometry:t,l=d?t.features[n].properties:p?t.properties:{},h=d?t.features[n].bbox:p?t.bbox:void 0,c=d?t.features[n].id:p?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,l,h,c))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function tm(t,e,n){var i=n;return t_(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),i}function tx(t,e){t_(t,function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(E(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++)if(!1===e(E({type:s,coordinates:t.coordinates[u]},i),n,u))return!1})}function tb(t,e,n){var i=n;return tx(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i}function tE(t,e){tx(t,function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==tc(t,function(o,h,c,f,d){return void 0===s||n>a||f>u||d>l?(s=o,a=n,u=f,l=d,void(r=0)):!1!==e(M([s,o],t.properties),n,i,d,r)&&void(r++,s=o)})&&void 0}}})}function tk(t,e,n){var i=n,r=!1;return tE(t,function(t,o,s,a,u){i=!1===r&&void 0===n?t:e(i,t,o,s,a,u),r=!0}),i}function tw(t,e){if(!t)throw Error("geojson is required");tx(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(M(o[s],t.properties),n,i,s))return!1}}})}function tI(t,e,n){var i=n;return tw(t,function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)}),i}function tL(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),M([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),M([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s-1),M([u[r][s],u[r][s+1]],a,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s-1),M([u[r][o][s],u[r][o][s+1]],a,e)}throw Error("geojson is invalid")}function tP(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return w(u,a,e);case"MultiPoint":return r<0&&(r=u.length+r),w(u[r],a,e);case"LineString":return s<0&&(s=u.length+s),w(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),w(u[o][s],a,e);case"MultiLineString":return r<0&&(r=u.length+r),s<0&&(s=u[r].length+s),w(u[r][s],a,e);case"MultiPolygon":return r<0&&(r=u.length+r),o<0&&(o=u[r].length+o),s<0&&(s=u[r][o].length-s),w(u[r][o][s],a,e)}throw Error("geojson is invalid")}var tS=Object.freeze({__proto__:null,coordAll:ty,coordEach:tc,coordReduce:tf,featureEach:tg,featureReduce:tv,findPoint:tP,findSegment:tL,flattenEach:tx,flattenReduce:tb,geomEach:t_,geomReduce:tm,lineEach:tw,lineReduce:tI,propEach:td,propReduce:tp,segmentEach:tE,segmentReduce:tk});function tM(t){return tm(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return tN(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=tN(t.coordinates[e]);return n}return 0}(e)},0)}function tN(t){var e=0;if(t&&t.length>0){e+=Math.abs(tO(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(tO(t[n]))}return e}var tT=40589753129677.44/2,tC=Math.PI/180;function tO(t){var e=t.length-1;if(e<=2)return 0;for(var n=0,i=0;i<e;){var r=t[i],o=t[i+1===e?0:i+1],s=t[i+2>=e?(i+2)%e:i+2],a=r[0]*tC,u=o[1]*tC;n+=(s[0]*tC-a)*Math.sin(u),i++}return n*tT}function tR(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var n=[1/0,1/0,-1/0,-1/0];return tc(t,function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])}),n}function tA(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function tD(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function tz(t,e){var n,i=[],r=a(t);try{for(r.s();!(n=r.n()).done;){var o=function(t,e){var n,i,r,o,s,a,u;for(i=1;i<=8;i*=2){for(n=[],o=!(tD(r=t[t.length-1],e)&i),s=0;s<t.length;s++)(u=!(tD(a=t[s],e)&i))!==o&&n.push(tA(r,a,i,e)),u&&n.push(a),r=a,o=u;if(!(t=n).length)break}return n}(n.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&i.push(o))}}catch(t){r.e(t)}finally{r.f()}return i}function tB(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return P([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}var tF=s(function t(e){r(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var i=0;i<this.length-1;i++){var o=this.points[i],s=this.points[i+1];this.centers.push({x:(o.x+s.x)/2,y:(o.y+s.y)/2,z:(o.z+s.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var a=0;a<this.centers.length-1;a++){var u=this.points[a+1].x-(this.centers[a].x+this.centers[a+1].x)/2,l=this.points[a+1].y-(this.centers[a].y+this.centers[a+1].y)/2,h=this.points[a+1].z-(this.centers[a].y+this.centers[a+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a].z+h)},{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a+1].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a+1].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this},[{key:"cacheSteps",value:function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e}},{key:"vector",value:function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}}},{key:"pos",value:function(t){var e,n,i,r,o,s,a,u=t-this.delay;u<0&&(u=0),u>this.duration&&(u=this.duration-1);var l=u/this.duration;if(l>=1)return this.points[this.length-1];var h=Math.floor((this.points.length-1)*l);return e=(this.length-1)*l-h,n=this.points[h],i=this.controls[h][1],r=this.controls[h+1][0],o=this.points[h+1],a=[(s=e*e)*e,3*s*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)],{x:o.x*a[0]+r.x*a[1]+i.x*a[2]+n.x*a[3],y:o.y*a[0]+r.y*a[1]+i.y*a[2]+n.y*a[3],z:o.z*a[0]+r.z*a[1]+i.z*a[2]+n.z*a[3]}}}]);function tq(t){for(var e,n,i=Q(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function tV(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("point is required");if(!e)throw Error("polygon is required");var i=J(t),r=ti(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1==(s[0]<=i[0]&&s[1]<=i[1]&&s[2]>=i[0]&&s[3]>=i[1]))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length;++l){var h=function(t,e){for(var n=0,i=0,r=0,o=0,s=0,a=0,u=0,l=0,h=null,c=null,f=t[0],d=t[1],p=e.length;n<p;n++){i=0;var g=e[n].length-1,v=e[n];if((h=v[0])[0]!==v[g][0]&&h[1]!==v[g][1])throw Error("First and last coordinates in a ring must be the same");for(s=h[0]-f,a=h[1]-d;i<g;i++)if(l=(c=v[i+1])[1]-d,a<0&&l<0||a>0&&l>0)a=l,s=(h=c)[0]-f;else{if(u=c[0]-t[0],l>0&&a<=0){if((o=s*l-u*a)>0)r+=1;else if(0===o)return 0}else if(a>0&&l<=0){if((o=s*l-u*a)<0)r+=1;else if(0===o)return 0}else if(0===l&&a<0){if(0==(o=s*l-u*a))return 0}else if(0===a&&l<0){if(0==(o=s*l-u*a))return 0}else if(0===a&&0===l&&(u<=0&&s>=0||s<=0&&u>=0))return 0;h=c,a=l,s=u}}return r%2!=0}(i,a[l]);if(0===h)return!n.ignoreBoundary;h&&(u=!0)}return u}function tG(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=J(t),r=Q(e),o=0;o<r.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),function(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,f=h-u,d=(n[0]-a)*f-(n[1]-u)*c;if(null!==r){if(Math.abs(d)>r)return!1}else if(0!==d)return!1;return Math.abs(c)===Math.abs(f)&&0===Math.abs(c)?!i&&n[0]===t[0]&&n[1]===t[1]:i?"start"===i?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=h:h<=s&&s<u:"end"===i?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<h:h<s&&s<=u:"both"===i&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=h:h<=s&&s<=u}(r[o],r[o+1],i,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function tZ(t,e){if("Feature"===t.type&&null===t.geometry||"Feature"===e.type&&null===e.geometry||!tj(tR(t),tR(e)))return!1;var n,i=a(ti(e).coordinates);try{for(i.s();!(n=i.n()).done;){var r,o=a(n.value);try{for(o.s();!(r=o.n()).done;)if(!tV(r.value,t))return!1}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}return!0}function tj(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function tY(t,e){return t[0]===e[0]&&t[1]===e[1]}var tU=s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tX;if(r(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)},[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&0>n(e[a],s)&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}}]);function tX(t,e){return t<e?-1:+(t>e)}function tH(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function tW(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var tK=s(function t(e,n,i,o){r(this,t),this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=i,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null},[{key:"isSamePoint",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}]),tJ=0,tQ=0,t$=0;function t0(t,e){var n="Feature"===t.type?t.geometry:t,i=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(i=[i]),"LineString"===n.type&&(i=[[i]]);for(var r=0;r<i.length;r++)for(var o=0;o<i[r].length;o++){var s=i[r][o][0],a=null;tQ+=1;for(var u=0;u<i[r][o].length-1;u++){a=i[r][o][u+1];var l=new tK(s,tJ,tQ,t$),h=new tK(a,tJ,tQ,t$+1);l.otherEvent=h,h.otherEvent=l,tH(l,h)>0?(h.isLeftEndpoint=!0,l.isLeftEndpoint=!1):(l.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(l),e.push(h),s=a,t$+=1}}tJ+=1}var t1=s(function t(e){r(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}),t2=function(t,e){var n=new tU([],tH);return function(t,e){if("FeatureCollection"===t.type)for(var n=t.features,i=0;i<n.length;i++)t0(n[i],e);else t0(t,e)}(t,n),function(t,e){e=e||!1;for(var n=[],i=new tU([],tW);t.length;){var r=t.pop();if(r.isLeftEndpoint){for(var o=new t1(r),s=0;s<i.data.length;s++){var a=i.data[s];if(!e||a.leftSweepEvent.featureId!==r.featureId){var u=function(t,e){if(null===t||null===e||t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var n=t.leftSweepEvent.p.x,i=t.leftSweepEvent.p.y,r=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,u=e.rightSweepEvent.p.x,l=e.rightSweepEvent.p.y,h=(l-a)*(r-n)-(u-s)*(o-i);if(0===h)return!1;var c=((u-s)*(i-a)-(l-a)*(n-s))/h,f=((r-n)*(i-a)-(o-i)*(n-s))/h;return c>=0&&c<=1&&f>=0&&f<=1&&[n+c*(r-n),i+c*(o-i)]}(o,a);!1!==u&&n.push(u)}}i.push(o)}else!1===r.isLeftEndpoint&&i.pop()}return n}(n,e)};function t3(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.removeDuplicates,r=n.ignoreSelfIntersections,o=[];"FeatureCollection"===t.type?o=o.concat(t.features):"Feature"===t.type?o.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||o.push(E(t)),"FeatureCollection"===e.type?o=o.concat(e.features):"Feature"===e.type?o.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||o.push(E(e));var s=t2(T(o),void 0===r||r),a=[];if(void 0===i||i){var u={};s.forEach(function(t){var e=t.join(",");u[e]||(u[e]=!0,a.push(t))})}else a=s;return T(a.map(function(t){return w(t)}))}function t4(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ti(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t8(ti(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}(n,e);case"MultiPolygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ti(t).coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},r=[];return n.forEach(function(t){r.push(t8(t,i))}),T(r)}(n,e);default:throw Error("invalid poly")}}function t8(t,e){return t.length>1?C(t,e):M(t[0],e)}function t6(t,e){var n=ti(t),i=ti(e),r=n.type,o=i.type;switch(r){case"MultiPoint":switch(o){case"LineString":return t5(n,i);case"Polygon":return t9(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return t5(i,n);case"LineString":return function(t,e){if(t3(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),et(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(n,i);case"Polygon":return t7(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return t9(i,n);case"LineString":return t7(i,n);default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+r+" geometry not supported")}}function t5(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),et(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function t7(t,e){return t3(t,t4(e)).features.length>0}function t9(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)tV(w(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function et(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function ee(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,i=void 0===n||n,r=!0;return tx(t,function(t){tx(e,function(e){if(!1===r)return!1;r=function(t,e,n){var i,r;switch(t.type){case"Point":switch(e.type){case"Point":return i=t.coordinates,r=e.coordinates,i[0]!==r[0]||i[1]!==r[1];case"LineString":return!en(e,t);case"Polygon":return!tV(t,e)}break;case"LineString":switch(e.type){case"Point":return!en(t,e);case"LineString":return!(t3(t,e,{ignoreSelfIntersections:n}).features.length>0);case"Polygon":return!ei(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!tV(e,t);case"LineString":return!ei(t,e,n);case"Polygon":return!function(t,e,n){var i,r=a(t.coordinates[0]);try{for(r.s();!(i=r.n()).done;)if(tV(i.value,e))return!0}catch(t){r.e(t)}finally{r.f()}var o,s=a(e.coordinates[0]);try{for(s.s();!(o=s.n()).done;)if(tV(o.value,t))return!0}catch(t){s.e(t)}finally{s.f()}return t3(t4(t),t4(e),{ignoreSelfIntersections:n}).features.length>0}(e,t,n)}}return!1}(t.geometry,e.geometry,i)})}),r}function en(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ei(t,e,n){var i,r=a(e.coordinates);try{for(r.s();!(i=r.n()).done;)if(tV(i.value,t))return!0}catch(t){r.e(t)}finally{r.f()}return t3(e,t4(t),{ignoreSelfIntersections:n}).features.length>0}var er=Object.defineProperty,eo=function(t,e){return er(t,"name",{value:e,configurable:!0})},es=s(function t(e){var n,i,o;r(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==e?void 0:e.precision)?n:17)),this.direction=null!=(i=null==e?void 0:e.direction)&&i,this.compareProperties=null==(o=null==e?void 0:e.compareProperties)||o},[{key:"compare",value:function(t,e){var n=this;if(t.type!==e.type||!ea(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){var i=eu(t),r=eu(e);return i.every(function(t){return r.some(function(e){return n.compare(t,e)})})}}return!1}},{key:"compareCoord",value:function(t,e){var n=this;return t.length===e.length&&t.every(function(t,i){return Math.abs(t-e[i])<n.precision})}},{key:"compareLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!ea(t,e))return!1;var r=e;if(i&&!this.compareCoord(t[0],r[0])){var o=this.fixStartIndex(r,t);if(!o)return!1;r=o}var s=this.compareCoord(t[n],r[n]);return this.direction||s?this.comparePath(t,r):!!this.compareCoord(t[n],r[r.length-(1+n)])&&this.comparePath(t.slice().reverse(),r)}},{key:"fixStartIndex",value:function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n}},{key:"comparePath",value:function(t,e){var n=this;return t.every(function(t,i){return n.compareCoord(t,e[i])})}},{key:"comparePolygon",value:function(t,e){var n=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length);return i.every(function(t){return r.some(function(e){return n.compareLine(t,e,1,!0)})})}return!1}},{key:"compareGeometryCollection",value:function(t,e){var n=this;return ea(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every(function(t,i){return n.compare(t,e.geometries[i])})}},{key:"compareFeature",value:function(t,e){return t.id===e.id&&(!this.compareProperties||eh(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:"compareFeatureCollection",value:function(t,e){var n=this;return ea(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every(function(t,i){return n.compare(t,e.features[i])})}},{key:"compareBBox",value:function(t,e){return!!(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}]);function ea(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function eu(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function el(t,e,n){return new es(n).compare(t,e)}function eh(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r],s=t[o],a=e[o],u=ec(s)&&ec(a);if(u&&!eh(s,a)||!u&&s!==a)return!1}return!0}eo(es,"GeojsonEquality"),eo(ea,"sameLength"),eo(eu,"explode"),eo(el,"geojsonEquality"),eo(eh,"equal");var ec=eo(function(t){return null!=t&&"object"===_(t)},"isObject");function ef(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="object"===_(e)?e.mutate:e;if(!t)throw Error("geojson is required");var i=tr(t),r=[];switch(i){case"LineString":r=ed(t,i);break;case"MultiLineString":case"Polygon":Q(t).forEach(function(t){r.push(ed(t,i))});break;case"MultiPolygon":Q(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ed(t,i))}),r.push(e)});break;case"Point":return t;case"MultiPoint":var o={};Q(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(r.push(t),o[e]=!0)});break;default:throw Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=r,t):{type:i,coordinates:r}:!0===n?(t.geometry.coordinates=r,t):E({type:i,coordinates:r},t.properties,{bbox:t.bbox,id:t.id})}function ed(t,e){var n=Q(t);if(2===n.length&&!ep(n[0],n[1]))return n;var i=[],r=n.length-1,o=i.length;i.push(n[0]);for(var s=1;s<r;s++){var a=i[i.length-1];n[s][0]===a[0]&&n[s][1]===a[1]||(i.push(n[s]),(o=i.length)>2&&eg(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1))}if(i.push(n[n.length-1]),o=i.length,("Polygon"===e||"MultiPolygon"===e)&&ep(n[0],n[n.length-1])&&o<4)throw Error("invalid polygon");return"LineString"===e&&o<3||eg(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1),i}function ep(t,e){return t[0]===e[0]&&t[1]===e[1]}function eg(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return 0==(i-o)*h-(r-s)*l&&(Math.abs(l)>=Math.abs(h)?l>0?o<=i&&i<=a:a<=i&&i<=o:h>0?s<=r&&r<=u:u<=r&&r<=s)}function ev(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,i=void 0===n||n,r=!1;return tx(t,function(t){tx(e,function(e){if(!0===r)return!0;r=!ee(t.geometry,e.geometry,{ignoreSelfIntersections:i})})}),r}function ey(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function e_(t,e){return t<e?-1:+(t>e)}var em=s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;r(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!eS(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;eS(t,a)&&(e.leaf?n.push(s):eP(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n}},{key:"collides",value:function(t){var e=this.data;if(!eS(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(eS(t,o)){if(e.leaf||eP(t,o))return!0;n.push(r)}}e=n.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=eM([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,i,r,o=this.data,s=this.toBBox(t),a=[],u=[];o||a.length;){if(o||(o=a.pop(),i=a[a.length-1],n=u.pop(),r=!0),o.leaf){var l=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return -1}(t,o.children,e);if(-1!==l)return o.children.splice(l,1),a.push(o),this._condense(a),this}r||o.leaf||!eP(o,s)?i?(n++,o=i.children[n],r=!1):o=null:(a.push(o),u.push(n),n=0,i=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,v(t.children)):n.push.apply(n,v(t.children)),t=n.pop();return e}},{key:"_build",value:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return ex(r=eM(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=eM([])).leaf=!1,r.height=i;var a=Math.ceil(o/s),u=a*Math.ceil(Math.sqrt(s));eN(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);eN(t,l,h,a,this.compareMinY);for(var c=l;c<=h;c+=a){var f=Math.min(c+a-1,h);r.children.push(this._build(t,c,f,i-1))}}return ex(r,this.toBBox),r}},{key:"_chooseSubtree",value:function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=eI(u),h=(Math.max(u.maxX,t.maxX)-Math.min(u.minX,t.minX))*(Math.max(u.maxY,t.maxY)-Math.min(u.minY,t.minY))-l;h<o?(o=h,r=l<r?l:r,s=u):h===o&&l<r&&(r=l,s=u)}e=s||e.children[0]}return e}},{key:"_insert",value:function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),eE(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}},{key:"_split",value:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=eM(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,ex(n,this.toBBox),ex(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}},{key:"_splitRoot",value:function(t,e){this.data=eM([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ex(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,n){for(var i,r,o,s,a,u=1/0,l=1/0,h=e;h<=n-e;h++){var c=eb(t,0,h,this.toBBox),f=eb(t,h,n,this.toBBox),d=(r=void 0,o=void 0,s=void 0,r=Math.max(c.minX,f.minX),o=Math.max(c.minY,f.minY),Math.max(0,(s=Math.min(c.maxX,f.maxX))-r)*Math.max(0,Math.min(c.maxY,f.maxY)-o)),p=eI(c)+eI(f);d<u?(u=d,i=h,l=p<l?p:l):d===u&&p<l&&(l=p,i=h)}return i||n-e}},{key:"_chooseSplitAxis",value:function(t,e,n){var i=t.leaf?this.compareMinX:ek,r=t.leaf?this.compareMinY:ew;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}},{key:"_allDistMargin",value:function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=eb(t,0,e,r),s=eb(t,n-e,n,r),a=eL(o)+eL(s),u=e;u<n-e;u++){var l=t.children[u];eE(o,t.leaf?r(l):l),a+=eL(o)}for(var h=n-e-1;h>=e;h--){var c=t.children[h];eE(s,t.leaf?r(c):c),a+=eL(s)}return a}},{key:"_adjustParentBBoxes",value:function(t,e,n){for(var i=n;i>=0;i--)eE(e[i],t)}},{key:"_condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():ex(t[n],this.toBBox)}}]);function ex(t,e){eb(t,0,t.children.length,e,t)}function eb(t,e,n,i,r){r||(r=eM(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];eE(r,t.leaf?i(s):s)}return r}function eE(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ek(t,e){return t.minX-e.minX}function ew(t,e){return t.minY-e.minY}function eI(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function eL(t){return t.maxX-t.minX+(t.maxY-t.minY)}function eP(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function eS(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function eM(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function eN(t,e,n,i,r){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=i)){var s=e+Math.ceil((n-e)/i/2)*i;(function t(e,n,i,r,o){for(;r>i;){if(r-i>600){var s=r-i+1,a=n-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(i,Math.floor(n-a*l/s+h)),Math.min(r,Math.floor(n+(s-a)*l/s+h)),o)}var c=e[n],f=i,d=r;for(ey(e,i,n),o(e[r],c)>0&&ey(e,i,r);f<d;){for(ey(e,f,d),f++,d--;0>o(e[f],c);)f++;for(;o(e[d],c)>0;)d--}0===o(e[i],c)?ey(e,i,d):ey(e,++d,r),d<=n&&(i=d+1),n<=d&&(r=d-1)}})(t,s,e||0,n||t.length-1,r||e_),o.push(e,s,s,n)}}var eT=Object.freeze({__proto__:null,default:em});function eC(t){var e=new em(t);return e.insert=function(t){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:tR(t),em.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:tR(t),e.push(t)}):tg(t,function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:tR(t),e.push(t)}),em.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:tR(t),em.prototype.remove.call(this,t,e)},e.clear=function(){return em.prototype.clear.call(this)},e.search=function(t){return T(em.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return em.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return T(em.prototype.all.call(this))},e.toJSON=function(){return em.prototype.toJSON.call(this)},e.fromJSON=function(t){return em.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=tR(t);else{if("FeatureCollection"!==t.type)throw Error("invalid geojson");e=tR(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function eO(t){if(!t)throw Error("geojson is required");var e=[];return tx(t,function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=Q(i);break;case"LineString":n=[Q(i)]}n.forEach(function(n){var i,r;(i=t.properties,r=[],n.reduce(function(t,e){var n,o,s,a,u=M([t,e],i);return n=t[0],o=t[1],u.bbox=[n<(s=e[0])?n:s,o<(a=e[1])?o:a,n>s?n:s,o>a?o:a],r.push(u),e}),r).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),T(e)}var eR,eA,eD=Object.defineProperty,ez=Object.defineProperties,eB=Object.getOwnPropertyDescriptors,eF=Object.getOwnPropertySymbols,eq=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,eG=function(t,e,n){return e in t?eD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},eZ=function(t,e){for(var n in e||(e={}))eq.call(e,n)&&eG(t,n,e[n]);if(eF){var i,r=a(eF(e));try{for(r.s();!(i=r.n()).done;)n=i.value,eV.call(e,n)&&eG(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t},ej=function(t,e){return ez(t,eB(e))};function eY(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw Error("lines and pt are required arguments");var i=J(e),r=w([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),o=0;return tx(t,function(t,s,a){for(var u=Q(t),l=0;l<u.length-1;l++){var h=w(u[l]);h.properties.dist=tu(e,h,n);var c=J(h),f=w(u[l+1]);f.properties.dist=tu(e,f,n);var d=J(f),p=tu(h,f,n),v=void 0,y=void 0;if(c[0]===i[0]&&c[1]===i[1]){var _=[c,void 0,!1];v=_[0],y=_[2]}else if(d[0]===i[0]&&d[1]===i[1]){var m=[d,void 0,!0];v=m[0],y=m[2]}else{var x=g(function(t,e,n){var i,r,o,s,a,u,l,h,c,f=eH(t),d=eH(e),p=g(eH(n),3),v=p[0],y=p[1],_=p[2],m=(r=(i=g(f,3))[0],o=i[1],s=i[2],u=(a=g(d,3))[0],l=a[1],[o*(h=a[2])-s*l,s*u-r*h,r*l-o*u]),x=g(m,3),b=x[0],E=x[1],k=x[2],w=E*_-k*y,I=k*v-b*_,P=b*y-E*v,S=P*E-I*k,M=w*k-P*b,N=I*b-w*E,T=1/Math.sqrt(Math.pow(S,2)+Math.pow(M,2)+Math.pow(N,2)),C=[S*T,M*T,N*T],O=[-1*S*T,-1*M*T,-1*N*T],R=eX(f,d),A=eX(f,C),D=eX(d,C),z=eX(f,O),B=eX(d,O);return eX(f,c=A<z&&A<B||D<z&&D<B?C:O)>R||eX(d,c)>R?tu(eW(c),eW(f))<=tu(eW(c),eW(d))?[eW(f),!0,!1]:[eW(d),!1,!0]:[eW(c),!1,!1]}(h.geometry.coordinates,f.geometry.coordinates,J(e)),3);v=x[0],y=x[2]}var b=void 0;v&&(b=w(v,{dist:tu(e,v,n),multiFeatureIndex:a,location:o+tu(h,v,n)})),b&&b.properties.dist<r.properties.dist&&(r=ej(eZ({},b),{properties:ej(eZ({},b.properties),{index:y?l+1:l})})),o+=p}}),r}function eU(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function eX(t,e){var n,i,r,o,s;return Math.acos(Math.min(Math.max((i=(n=g(t,3))[0],r=n[1],o=n[2],(i*(s=g(e,3))[0]+r*s[1]+o*s[2])/(eU(t)*eU(e))),-1),1))}function eH(t){var e=Z(t[1]),n=Z(t[0]);return[Math.cos(e)*Math.cos(n),Math.cos(e)*Math.sin(n),Math.sin(e)]}function eW(t){var e=g(t,3),n=e[0],i=e[1],r=G(Math.asin(e[2]));return[G(Math.atan2(i,n)),r]}function eK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eJ(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,i.get?i:{enumerable:!0,get:function(){return t[e]}})}),n}var eQ=eK((eA||(eA=1,eR=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==_(e)&&"object"==_(n)){if(e.constructor!==n.constructor)return!1;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var i,r,o,s=o[r];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}),eR));function e$(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!X(n=n||{}))throw Error("options is invalid");var i,r=n.tolerance||0,o=[],s=eC(),a=eO(t);s.load(a);var u=[];return tE(e,function(t){var e=!1;t&&(tg(s.search(t),function(n){if(!1===e){var o=Q(t).sort(),s=Q(n).sort();if(eQ(o,s))e=!0,i=i?e0(i,t)||i:t;else if(0===r?tG(o[0],n)&&tG(o[1],n):eY(n,o[0]).properties.dist<=r&&eY(n,o[1]).properties.dist<=r)e=!0,i=i?e0(i,t)||i:t;else if(0===r?tG(s[0],t)&&tG(s[1],t):eY(t,s[0]).properties.dist<=r&&eY(t,s[1]).properties.dist<=r){if(i){var a=e0(i,n);a?i=a:u.push(n)}else i=n}}}),!1===e&&i&&(o.push(i),u.length&&(o=o.concat(u),u=[]),i=void 0))}),i&&o.push(i),T(o)}function e0(t,e){var n=Q(e),i=Q(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;if(eQ(n[0],r))s.unshift(n[1]);else if(eQ(n[0],o))s.push(n[1]);else if(eQ(n[1],r))s.unshift(n[0]);else{if(!eQ(n[1],o))return;s.push(n[0])}return t}function e1(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw Error("Invalid GeoJSON object for "+e)}function e2(t,e){return!!e3(e.coordinates[0],t.coordinates)||!!e3(e.coordinates[e.coordinates.length-1],t.coordinates)}function e3(t,e){return t[0]===e[0]&&t[1]===e[1]}function e4(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function e8(t){for(var e=0;e<t.length-1;e++)for(var n=t[e],i=e+1;i<t.length-2;i++)if(tG(n,M([t[i],t[i+1]])))return!0;return!1}function e6(t,e){var n=ti(t),i=ti(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(e7(e.coordinates[n],t.coordinates)){i=!0;break}return i}(n,i);case"LineString":return tG(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return tV(n,i,{ignoreBoundary:!0});default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)e7(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(n,i);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!tG(t.coordinates[i],e))return!1;n||(n=tG(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=tV(t.coordinates[r],e))){n=!1;break}i=tV(t.coordinates[r],e,{ignoreBoundary:!0})}return n&&i}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!tG(t.coordinates[n],e))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(t,e){if(!e5(tR(e),tR(t)))return!1;for(var n,i,r=!1,o=0;o<t.coordinates.length;o++){if(!tV(t.coordinates[o],e))return!1;r||(r=tV(t.coordinates[o],e,{ignoreBoundary:!0})),!r&&o<t.coordinates.length-1&&(r=tV((n=t.coordinates[o],i=t.coordinates[o+1],[(n[0]+i[0])/2,(n[1]+i[1])/2]),e,{ignoreBoundary:!0}))}return r}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=tR(t);if(!e5(tR(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!tV(t.coordinates[0][i],e))return!1;return!0}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+r+" geometry not supported")}}function e5(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function e7(t,e){return t[0]===e[0]&&t[1]===e[1]}function e9(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=tR(t);return w([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var nt,ne={exports:{}},nn=eK((nt||(nt=1,ne.exports=function(){function t(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function a(t,e,n){return(a=s()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&o(r,n.prototype),r}).apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return(u=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return a(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)})(t)}function l(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e=s();return function(){var n,i=r(t);return n=e?Reflect.construct(i,arguments,r(this).constructor):i.apply(this,arguments),function(t,e){if(e&&("object"==_(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return l(t)}(this,n)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=d(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var v=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2==arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},{key:"bufferDistanceError",value:function(t){return 1-Math.cos(Math.PI/2/t/2)}}]),e}();v.CAP_ROUND=1,v.CAP_FLAT=2,v.CAP_SQUARE=3,v.JOIN_ROUND=1,v.JOIN_MITRE=2,v.JOIN_BEVEL=3,v.DEFAULT_QUADRANT_SEGMENTS=8,v.DEFAULT_MITRE_LIMIT=5,v.DEFAULT_SIMPLIFY_FACTOR=.01;var y=function(e){i(o,e);var r=h(o);function o(e){var n;return t(this,o),(n=r.call(this,e)).name="Exception",n}return n(o,[{key:"toString",value:function(){return this.message}}]),o}(u(Error)),m=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="IllegalArgumentException",i}return r}(y),x=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}();function b(){}function E(){}function k(){}var w,I,P,S,M,N,T=function(){function e(){t(this,e)}return n(e,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),e}(),C=function(){function e(n,i){t(this,e),this.low=i||0,this.high=n||0}return n(e,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=0x80000000;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=0x80000000;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),e}();function O(){}function R(){}O.NaN=NaN,O.isNaN=function(t){return Number.isNaN(t)},O.isInfinite=function(t){return!Number.isFinite(t)},O.MAX_VALUE=Number.MAX_VALUE,O.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,O.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(N=new Int32Array((M=new Float64Array(1)).buffer),O.doubleToLongBits=function(t){M[0]=t;var e=0|N[0],n=0|N[1];return(0x7ff00000&n)==0x7ff00000&&0!=(1048575&n)&&0!==e&&(e=0,n=0x7ff80000),new C(n,e)},O.longBitsToDouble=function(t){return N[0]=t.low,N[1]=t.high,M[0]}):(w=Math.log2,I=Math.floor,P=Math.pow,S=function(){for(var t=53;t>0;t--){var e=P(2,t)-1;if(I(w(e))+1===t)return e}return 0}(),O.doubleToLongBits=function(t){var e,n,i,r,o,s,a,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=-0x80000000,t=-t):s=0,0===t)return new C(u=s,l=0);if(t===1/0)return new C(u=0x7ff00000|s,l=0);if(t!=t)return new C(u=0x7ff80000,l=0);if(r=0,l=0,(e=I(t))>1){if(e<=S)(r=I(w(e)))<=20?(l=0,u=e<<20-r&1048575):(l=e%(n=P(2,i=r-20))<<32-i,u=e/n&1048575);else for(i=e,l=0;0!==(i=I(n=i/2));)r++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==i&&(u|=524288)}if(a=r+1023,o=0===e,e=t-e,r<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(i<<=1,i|=1,r++)):(e=n,o?0==--a&&(r++,o=!1):(i<<=1,r++)),20===r)u|=i,i=0;else if(52===r){l|=i;break}if(1===n){r<20?u|=i<<20-r:r<52&&(l|=i<<52-r);break}}return u|=a<<20,new C(u|=s,l)},O.longBitsToDouble=function(t){var e,n,i,r,o=t.high,s=t.low,a=-0x80000000&o?-1:1;for(i=((0x7ff00000&o)>>20)-1023,r=0,n=524288,e=1;e<=20;e++)o&n&&(r+=P(2,-e)),n>>>=1;for(n=-0x80000000,e=21;e<=52;e++)s&n&&(r+=P(2,-e)),n>>>=1;if(-1023===i){if(0===r)return 0*a;i=-1022}else{if(1024===i)return 0===r?a/0:NaN;r+=1}return a*r*P(2,i)});var A=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="RuntimeException",i}return r}(y),D=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){if(0==arguments.length)A.constructor_.call(this);else if(1==arguments.length){var t=arguments[0];A.constructor_.call(this,t)}}}]),o}(A),z=function(){function e(){t(this,e)}return n(e,null,[{key:"shouldNeverReachHere",value:function(){if(0==arguments.length)e.shouldNeverReachHere(null);else if(1==arguments.length){var t=arguments[0];throw new D("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1==arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2==arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new D:new D(n)}}},{key:"equals",value:function(){if(2==arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3==arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(!r.equals(i))throw new D("Expected "+i+" but encountered "+r+(null!==o?": "+o:""))}}}]),e}(),B=new ArrayBuffer(8),F=new Float64Array(B),q=new Int32Array(B),V=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(){return O.NaN}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new m("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1==arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2==arguments.length){var e=arguments[0],n=arguments[1];return!!T.equalsWithTolerance(this.x,e.x,n)&&!!T.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new m("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new m("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||O.isNaN(this.getZ())&&O.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return T.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:+(this.y>t.y)}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return z.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(629+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[b,E,k]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0==arguments.length)e.constructor_.call(this,0,0);else if(1==arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2==arguments.length){var n=arguments[0],i=arguments[1];e.constructor_.call(this,n,i,e.NULL_ORDINATE)}else if(3==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.x=r,this.y=o,this.z=s}}},{key:"hashCode",value:function(t){return F[0]=t,q[0]^q[1]}}]),e}();V.DimensionalComparator=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compare",value:function(t,n){var i=e.compare(t.x,n.x);if(0!==i)return i;var r=e.compare(t.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[R]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0==arguments.length)e.constructor_.call(this,2);else if(1==arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:O.isNaN(t)?O.isNaN(e)?0:-1:+!!O.isNaN(e)}}]),e}(),V.NULL_ORDINATE=O.NaN,V.X=0,V.Y=1,V.Z=2,V.M=3;var G=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){return t instanceof e&&(this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY())}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,i,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1==arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof V){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2==arguments.length){if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];return!(this.isNull()||(i.x<r.x?i.x:r.x)>this._maxx||(i.x>r.x?i.x:r.x)<this._minx||(i.y<r.y?i.y:r.y)>this._maxy||(i.y>r.y?i.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||s>this._maxy||s<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1==arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:+(this._maxy>t._maxy)}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1==arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof V){var n=arguments[0];return this.covers(n)}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:"centre",value:function(){return this.isNull()?null:new V((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0==arguments.length)this.setToNull();else if(1==arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(37*(37*(629+V.hashCode(this._minx))+V.hashCode(this._maxx))+V.hashCode(this._miny))+V.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[b,k]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0==arguments.length)this.init();else if(1==arguments.length){if(arguments[0]instanceof V){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}}},{key:"intersects",value:function(){if(3==arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4==arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),h=Math.max(i.y,r.y),l>u||h<a))}}}]),e}(),Z=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1==arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2==arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new G(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[E,b,k]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();Z.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},Z.TYPECODE_POINT=0,Z.TYPECODE_MULTIPOINT=1,Z.TYPECODE_LINESTRING=2,Z.TYPECODE_LINEARRING=3,Z.TYPECODE_MULTILINESTRING=4,Z.TYPECODE_POLYGON=5,Z.TYPECODE_MULTIPOLYGON=6,Z.TYPECODE_GEOMETRYCOLLECTION=7,Z.TYPENAME_POINT="Point",Z.TYPENAME_MULTIPOINT="MultiPoint",Z.TYPENAME_LINESTRING="LineString",Z.TYPENAME_LINEARRING="LinearRing",Z.TYPENAME_MULTILINESTRING="MultiLineString",Z.TYPENAME_POLYGON="Polygon",Z.TYPENAME_MULTIPOLYGON="MultiPolygon",Z.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Z.geometryChangedFilter={get interfaces_(){return[x]},filter:function(t){t.geometryChangedAction()}};var j=function(){function e(){t(this,e)}return n(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new m("Unknown location value: "+t)}}]),e}();j.INTERIOR=0,j.BOUNDARY=1,j.EXTERIOR=2,j.NONE=-1;var Y=function(){function e(){t(this,e)}return n(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),U=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="NoSuchElementException",i}return r}(y),X=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="UnsupportedOperationException",i}return r}(y),H=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"contains",value:function(){}}]),o}(Y),W=function(e,r){i(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).map=new Map,e instanceof Y&&n.addAll(e),n}return n(s,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=g(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new X}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new K(this.map)}},{key:r,value:function(){return this.map}}]),s}(H,Symbol.iterator),K=function(){function e(n){t(this,e),this.iterator=n.values();var i=this.iterator.next(),r=i.done,o=i.value;this.done=r,this.value=o}return n(e,[{key:"next",value:function(){if(this.done)throw new U;var t=this.value,e=this.iterator.next(),n=e.done,i=e.value;return this.done=n,this.value=i,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new X}}]),e}(),J=function(){function e(){t(this,e)}return n(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();J.ON=0,J.LEFT=1,J.RIGHT=2;var Q=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="EmptyStackException",i}return r}(y),$=function(e){i(r,e);var n=h(r);function r(e){var i;return t(this,r),(i=n.call(this,e)).name="IndexOutOfBoundsException",i}return r}(y),tt=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.apply(this,arguments)}return n(o,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),o}(Y),te=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).array=[],e}return n(o,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new $;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new Q;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new Q;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),o}(tt);function tn(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var ti=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),tr=function(){function e(n){t(this,e),this.value=n}return n(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:+(this.value>t)}}],[{key:"compare",value:function(t,e){return t<e?-1:+(t>e)}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),to=function(){function e(){t(this,e)}return n(e,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),e}(),ts=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,n){var i=this.abs(),r=e.magnitude(i._hi),o=e.TEN.pow(r);(i=i.divide(o)).gt(e.TEN)?(i=i.divide(e.TEN),r+=1):i.lt(e.ONE)&&(i=i.multiply(e.TEN),r-=1);for(var s=r+1,a=new ti,u=e.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){t&&l===s&&a.append(".");var h=Math.trunc(i._hi);if(h<0)break;var c=!1,f=0;h>9?(c=!0,f="9"):f="0"+h,a.append(f),i=i.subtract(e.valueOf(h)).multiply(e.TEN),c&&i.selfAdd(e.TEN);var d=!0,p=e.magnitude(i._hi);if(p<0&&Math.abs(p)>=u-l&&(d=!1),!d)break}return n[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1==arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2==arguments.length){var i=arguments[0],r=arguments[1],o=null,s=null,a=null,u=null,l=null,h=null,c=null,f=null;return l=this._hi/i,f=(o=(h=e.SPLIT*l)-(o=h-l))*(a=(f=e.SPLIT*i)-(a=f-i))-(c=l*i)+o*(u=i-a)+(s=l-o)*a+s*u,f=l+(h=(this._hi-c-f+this._lo-l*r)/i),this._hi=f,this._lo=l-f+h,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null,u=null,l=null;return i=(s=this._hi/t._hi)-(n=(a=e.SPLIT*s)-(n=a-s)),l=n*(r=(l=e.SPLIT*t._hi)-(r=l-t._hi))-(u=s*t._hi)+n*(o=t._hi-r)+i*r+i*o,new e(l=s+(a=(this._hi-u-l+this._lo-s*t._lo)/t._hi),s-l+a)}if("number"==typeof arguments[0]){var h=arguments[0];return O.isNaN(h)?e.createNaN():e.copy(this).selfDivide(h,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),i=e.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return t<0?i.reciprocal():i}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:+(this._lo>t._lo)}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,i=e.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*t);return i.add(r)}},{key:"selfAdd",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0],i=null,r=null,o=null,s=null,a=null,u=null;return s=(o=this._hi+n)-(a=o-this._hi),r=(u=(s=n-a+(this._hi-s))+this._lo)+(o-(i=o+u)),this._hi=i+r,this._lo=r+(i-this._hi),this}}else if(2==arguments.length){var l=arguments[0],h=arguments[1],c=null,f=null,d=null,p=null,g=null,v=null,y=null;p=this._hi+l,f=this._lo+h,g=p-(v=p-this._hi),d=f-(y=f-this._lo);var _=(c=p+(v=(g=l-v+(this._hi-g))+f))+(v=(d=h-y+(this._lo-d))+(v+(p-c))),m=v+(c-_);return this._hi=_,this._lo=m,this}}},{key:"selfMultiply",value:function(){if(1==arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2==arguments.length){var i=arguments[0],r=arguments[1],o=null,s=null,a=null,u=null,l=null,h=null;o=(l=e.SPLIT*this._hi)-this._hi,h=e.SPLIT*i,o=l-o,s=this._hi-o,a=h-i;var c=(l=this._hi*i)+(h=o*(a=h-a)-l+o*(u=i-a)+s*a+s*u+(this._hi*r+this._lo*i)),f=h+(o=l-c);return this._hi=c,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return O.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return O.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=[,].fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,o=i;if("."===i.charAt(0))o="0"+i;else if(r<0)o="0."+e.stringOfChar("0",-r)+i;else if(-1===i.indexOf(".")){var s=r-i.length;o=i+e.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,n,i,r,o=null,s=null,a=null,u=null;t=(i=1/this._hi)-(o=(a=e.SPLIT*i)-(o=a-i)),s=(u=e.SPLIT*this._hi)-this._hi;var l=i+(a=(1-(r=i*this._hi)-(u=o*(s=u-s)-r+o*(n=this._hi-s)+t*s+t*n)-i*this._lo)/this._hi);return new e(l,i-l+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=[,].fill(null),i=this.extractSignificantDigits(!1,n),r=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===i.charAt(0))throw new IllegalStateException("Found leading zero: "+i);var o="";i.length>1&&(o=i.substring(1));var s=i.charAt(0)+"."+o;return this.isNegative()?"-"+s+r:s+r}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1==arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[k,b,E]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0==arguments.length)this.init(0);else if(1==arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];e.constructor_.call(this,e.parse(i))}}else if(2==arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(i),e.valueOf(r))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],s=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(o.multiply(s))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,i=t.length;to.isWhitespace(t.charAt(n));)n++;var r=!1;if(n<i){var o=t.charAt(n);"-"!==o&&"+"!==o||(n++,"-"===o&&(r=!0))}for(var s=new e,a=0,u=0,l=0,h=!1;!(n>=i);){var c=t.charAt(n);if(n++,to.isDigit(c)){var f=c-"0";s.selfMultiply(e.TEN),s.selfAdd(f),a++}else{if("."!==c){if("e"===c||"E"===c){var d=t.substring(n);try{l=tr.parseInt(d)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+d+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=a,h=!0}}var p=s;h||(u=a);var g=a-u-l;if(0===g)p=s;else if(g>0){var v=e.TEN.pow(g);p=s.divide(v)}else if(g<0){var y=e.TEN.pow(-g);p=s.multiply(y)}return r?p.negate():p}},{key:"createNaN",value:function(){return new e(O.NaN,O.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.trunc(Math.floor(Math.log(e)/Math.log(10)));return 10*Math.pow(10,n)<=e&&(n+=1),n}},{key:"stringOfChar",value:function(t,e){for(var n=new ti,i=0;i<e;i++)n.append(t);return n.toString()}}]),e}();ts.PI=new ts(3.141592653589793,12246467991473532e-32),ts.TWO_PI=new ts(6.283185307179586,24492935982947064e-32),ts.PI_2=new ts(1.5707963267948966,6123233995736766e-32),ts.E=new ts(2.718281828459045,14456468917292502e-32),ts.NaN=new ts(O.NaN,O.NaN),ts.EPS=123259516440783e-46,ts.SPLIT=0x8000001,ts.MAX_PRINT_DIGITS=32,ts.TEN=ts.valueOf(10),ts.ONE=ts.valueOf(1),ts.SCI_NOT_EXPONENT_CHAR="E",ts.SCI_NOT_ZERO="0.0E0";var ta=function(){function e(){t(this,e)}return n(e,null,[{key:"orientationIndex",value:function(t,n,i){var r=e.orientationIndexFilter(t,n,i);if(r<=1)return r;var o=ts.valueOf(n.x).selfAdd(-t.x),s=ts.valueOf(n.y).selfAdd(-t.y),a=ts.valueOf(i.x).selfAdd(-n.x),u=ts.valueOf(i.y).selfAdd(-n.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof ts&&arguments[2]instanceof ts&&arguments[0]instanceof ts&&arguments[1]instanceof ts){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=ts.valueOf(i),u=ts.valueOf(r),l=ts.valueOf(o),h=ts.valueOf(s);return a.multiply(h).selfSubtract(u.multiply(l)).signum()}}},{key:"intersection",value:function(t,e,n,i){var r=new ts(t.y).selfSubtract(e.y),o=new ts(e.x).selfSubtract(t.x),s=new ts(t.x).selfMultiply(e.y).selfSubtract(new ts(e.x).selfMultiply(t.y)),a=new ts(n.y).selfSubtract(i.y),u=new ts(i.x).selfSubtract(n.x),l=new ts(n.x).selfMultiply(i.y).selfSubtract(new ts(i.x).selfMultiply(n.y)),h=o.multiply(l).selfSubtract(u.multiply(s)),c=a.multiply(s).selfSubtract(r.multiply(l)),f=r.multiply(u).selfSubtract(a.multiply(o)),d=h.selfDivide(f).doubleValue(),p=c.selfDivide(f).doubleValue();return O.isNaN(d)||O.isInfinite(d)||O.isNaN(p)||O.isInfinite(p)?null:new V(d,p)}},{key:"orientationIndexFilter",value:function(t,n,i){var r=null,o=(t.x-i.x)*(n.y-i.y),s=(t.y-i.y)*(n.x-i.x),a=o-s;if(o>0){if(s<=0)return e.signum(a);r=o+s}else{if(!(o<0)||s>=0)return e.signum(a);r=-o-s}var u=e.DP_SAFE_EPSILON*r;return a>=u||-a>=u?e.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),e}();ta.DP_SAFE_EPSILON=1e-15;var tu=function(){function e(){t(this,e)}return n(e,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return O.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):O.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[E]}}]),e}();tu.X=0,tu.Y=1,tu.Z=2,tu.M=3;var tl=function(){function e(){t(this,e)}return n(e,null,[{key:"index",value:function(t,e,n){return ta.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],r=0,o=1;o<=n;o++){var s=t[o];s.y>i.y&&(i=s,r=o)}var a=r;do(a-=1)<0&&(a=n);while(t[a].equals2D(i)&&a!==r)var u=r;do u=(u+1)%n;while(t[u].equals2D(i)&&u!==r)var l=t[a],h=t[u];if(l.equals2D(i)||h.equals2D(i)||l.equals2D(h))return!1;var c=e.index(l,i,h);return 0===c?l.x>h.x:c>0}if(tn(arguments[0],tu)){var f=arguments[0],d=f.size()-1;if(d<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var p=f.getCoordinate(0),g=0,v=1;v<=d;v++){var y=f.getCoordinate(v);y.y>p.y&&(p=y,g=v)}var _=null,x=g;do(x-=1)<0&&(x=d),_=f.getCoordinate(x);while(_.equals2D(p)&&x!==g)var b=null,E=g;do E=(E+1)%d,b=f.getCoordinate(E);while(b.equals2D(p)&&E!==g)if(_.equals2D(p)||b.equals2D(p)||_.equals2D(b))return!1;var k=e.index(_,p,b);return 0===k?_.x>b.x:k>0}}}]),e}();tl.CLOCKWISE=-1,tl.RIGHT=tl.CLOCKWISE,tl.COUNTERCLOCKWISE=1,tl.LEFT=tl.COUNTERCLOCKWISE,tl.COLLINEAR=0,tl.STRAIGHT=tl.COLLINEAR;var th=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();z.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=tl.index(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===tl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===tl.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length||n[e].y===n[e+1].y)return -1;var i=J.LEFT;return n[e].y<n[e+1].y&&(i=J.RIGHT),i}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}z.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===J.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),tc=function(e){i(o,e);var r=h(o);function o(e,n){var i;return t(this,o),(i=r.call(this,n?e+" [ "+n+" ]":e)).pt=n?new V(n):void 0,i.name="TopologyException",i}return n(o,[{key:"getCoordinate",value:function(){return this.pt}}]),o}(A),tf=function(){function e(){t(this,e),this.array=[]}return n(e,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),td=function(e,r){i(s,e);var o=h(s);function s(e){var n;return t(this,s),(n=o.call(this)).array=[],e instanceof Y&&n.addAll(e),n}return n(s,[{key:"interfaces_",get:function(){return[tt,Y]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1==arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=g(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.array.push(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new tp(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new $;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort(function(e,n){return t.compare(e,n)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:r,value:function(){return this.array.values()}}]),s}(tt,Symbol.iterator),tp=function(){function e(n){t(this,e),this.arrayList=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new U;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),tg=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new tc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(J.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(J.RIGHT)>=1&&0>=e.getDepth(J.LEFT)&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new W,n=new tf,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:+(this._rightMostCoord.x>t._rightMostCoord.x)}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new G,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new te;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(J.LEFT,t.getDepth(J.RIGHT)),e.setDepth(J.RIGHT,t.getDepth(J.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new td,this._nodes=new td,this._rightMostCoord=null,this._env=null,this._finder=new th}}]),e}(),tv=function(){function e(){t(this,e)}return n(e,null,[{key:"intersection",value:function(t,e,n,i){var r=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,f=((r>u?r:u)+(s<h?s:h))/2,d=((o>l?o:l)+(a<c?a:c))/2,p=t.x-f,g=t.y-d,v=e.x-f,y=e.y-d,_=n.x-f,m=n.y-d,x=i.x-f,b=i.y-d,E=g-y,k=v-p,w=p*y-v*g,I=m-b,P=x-_,S=_*b-x*m,M=E*P-I*k,N=(k*S-P*w)/M,T=(I*w-E*S)/M;return O.isNaN(N)||O.isInfinite(N)||O.isNaN(T)||O.isInfinite(T)?null:new V(N+f,T+d)}}]),e}(),ty=function(){function e(){t(this,e)}return n(e,null,[{key:"arraycopy",value:function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++}},{key:"getProperty",value:function(t){return({"line.separator":"\n"})[t]}}]),e}(),t_=function(){function e(){t(this,e)}return n(e,null,[{key:"log10",value:function(t){var n=Math.log(t);return O.isInfinite(n)||O.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3==arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4==arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}}},{key:"average",value:function(t,e){return(t+e)/2}}]),e}();t_.LOG_10=Math.log(10);var tm=function(){function e(){t(this,e)}return n(e,null,[{key:"segmentToSegment",value:function(t,n,i,r){if(t.equals(n))return e.pointToSegment(t,i,r);if(i.equals(r))return e.pointToSegment(r,t,n);var o=!1;if(G.intersects(t,n,i,r)){var s=(n.x-t.x)*(r.y-i.y)-(n.y-t.y)*(r.x-i.x);if(0===s)o=!0;else{var a=(t.y-i.y)*(r.x-i.x)-(t.x-i.x)*(r.y-i.y),u=((t.y-i.y)*(n.x-t.x)-(t.x-i.x)*(n.y-t.y))/s,l=a/s;(l<0||l>1||u<0||u>1)&&(o=!0)}}else o=!0;return o?t_.min(e.pointToSegment(t,i,r),e.pointToSegment(n,i,r),e.pointToSegment(i,t,n),e.pointToSegment(r,t,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<=0?t.distance(e):r>=1?t.distance(n):Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new m("Line array must contain at least one vertex");for(var i=t.distance(n[0]),r=0;r<n.length-1;r++){var o=e.pointToSegment(t,n[r],n[r+1]);o<i&&(i=o)}return i}}]),e}(),tx=function(){function e(){t(this,e)}return n(e,[{key:"create",value:function(){if(1==arguments.length)arguments[0]instanceof Array||tn(arguments[0],tu);else if(2==arguments.length);else if(3==arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),tb=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),tE=function(){function e(){t(this,e)}return n(e,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new V;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,h=u-o;n+=Math.sqrt(l*l+h*h),r=a,o=u}return n}}]),e}(),tk=function e(){t(this,e)},tw=function(){function e(){t(this,e)}return n(e,null,[{key:"copyCoord",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,tu.X)===t.getOrdinate(e-1,tu.X)&&t.getOrdinate(0,tu.Y)===t.getOrdinate(e-1,tu.Y)}},{key:"scroll",value:function(){if(2==arguments.length){if(tn(arguments[0],tu)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(tn(arguments[0],tu)&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1],o=e.indexOf(r,i);if(o<=0)return null;e.scroll(i,o)}}else if(3==arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];if(a<=0)return null;for(var l=s.copy(),h=u?s.size()-1:s.size(),c=0;c<h;c++)for(var f=0;f<s.getDimension();f++)s.setOrdinate(c,f,l.getOrdinate((a+c)%h,f));if(u)for(var d=0;d<s.getDimension();d++)s.setOrdinate(h,d,s.getOrdinate(0,d))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||O.isNaN(s)&&O.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1==arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3==arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,o=null,s=arguments[1];s<=i;s++){var a=n.getCoordinate(s);(null===o||o.compareTo(a)>0)&&(o=a,r=s)}return r}}},{key:"extend",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();if(e.copy(n,0,r,0,o),o>0)for(var s=o;s<i;s++)e.copy(n,o-1,r,s,1);return r}},{key:"reverse",value:function(t){for(var n=t.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)e.swap(t,r,n-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:"copy",value:function(t,n,i,r,o){for(var s=0;s<o;s++)e.copyCoord(t,n+s,i,r+s)}},{key:"ensureValidRing",value:function(t,n){var i=n.size();return 0===i?n:i<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,tu.X)===n.getOrdinate(i-1,tu.X)&&n.getOrdinate(0,tu.Y)===n.getOrdinate(i-1,tu.Y)?n:e.createClosedRing(t,n,i+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,tu.X)&&t.y===e.getOrdinate(n,tu.Y))return n;return -1}},{key:"createClosedRing",value:function(t,n,i){var r=t.create(i,n.getDimension()),o=n.size();e.copy(n,0,r,0,o);for(var s=o;s<i;s++)e.copy(n,0,r,s,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}]),e}(),tI=function(){function e(){t(this,e)}return n(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new m("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(to.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new m("Unknown dimension symbol: "+t)}}]),e}();tI.P=0,tI.L=1,tI.A=2,tI.FALSE=-1,tI.TRUE=-2,tI.DONTCARE=-3,tI.SYM_FALSE="F",tI.SYM_TRUE="T",tI.SYM_DONTCARE="*",tI.SYM_P="0",tI.SYM_L="1",tI.SYM_A="2";var tL=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),tP=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),tS=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new G:this._points.expandEnvelope(new G)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t)||this._points.size()!==t._points.size())return!1;for(var n=0;n<this._points.size();n++)if(!this.equal(this._points.getCoordinate(n),t._points.getCoordinate(n),e))return!1;return!0}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();tw.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?tI.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tw.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return tE.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1==arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2==arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:"apply",value:function(){if(tn(arguments[0],tb))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(tn(arguments[0],tP)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(tn(arguments[0],tL)||tn(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new X}},{key:"isEquivalentClass",value:function(t){return t instanceof s}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[tk]}}],[{key:"constructor_",value:function(){if(this._points=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];Z.constructor_.call(this,e),this.init(t)}}}]),s}(Z),tM=function e(){t(this,e)},tN=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new G;var t=new G;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return tI.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return+!this.isEmpty()}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2==arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(tn(arguments[0],tb)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(tn(arguments[0],tP)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(tn(arguments[0],tL)||tn(arguments[0],x))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),z.isTrue(1>=t.size()),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[tM]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];Z.constructor_.call(this,e),this.init(t)}}]),s}(Z),tT=function(){function e(){t(this,e)}return n(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(tn(arguments[0],tu)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(tn(arguments[0],tu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new V,l=new V,h=new V;s.getCoordinate(0,l),s.getCoordinate(1,h);var c=l.x;h.x-=c;for(var f=0,d=1;d<a-1;d++)u.y=l.y,l.x=h.x,l.y=h.y,s.getCoordinate(d+1,h),h.x-=c,f+=l.x*(u.y-h.y);return f/2}}}]),e}(),tC=function(){function e(){t(this,e)}return n(e,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1==arguments.length)e.sort(function(t,e){return t.compareTo(e)});else if(2==arguments.length)e.sort(function(e,n){return t[1].compare(e,n)});else if(3==arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var i=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,o=g(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;e.push(s)}}catch(t){o.e(t)}finally{o.f()}}else if(4==arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort(function(e,n){return t[3].compare(e,n)});var u=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var l,h=g(u);try{for(h.s();!(l=h.n()).done;){var c=l.value;e.push(c)}}catch(t){h.e(t)}finally{h.f()}}}},{key:"asList",value:function(t){var e,n=new td,i=g(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.add(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),e}(),tO=function e(){t(this,e)},tR=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:"getArea",value:function(){var t;t=0+tT.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=tT.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=this._shell,i=t._shell;if(!n.equalsExact(i,e)||this._holes.length!==t._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(t._holes[o],e))return!1;return!0}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0==arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);tC.sort(this._holes)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=e.getCoordinateSequence(),r=tw.minCoordinateIndex(i,0,i.size()-2);tw.scroll(i,r,!0),tl.isCCW(i)===n&&tw.reverse(i)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t;t=0+this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2==arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,i);if(0!==a)return a;for(var u=this.getNumInteriorRing(),l=r.getNumInteriorRing(),h=0;h<u&&h<l;){var c=this.getInteriorRingN(h),f=r.getInteriorRingN(h),d=c.compareToSameClass(f,i);if(0!==d)return d;h++}return h<u?1:h<l?-1:0}}},{key:"apply",value:function(){if(tn(arguments[0],tb)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(tn(arguments[0],tP)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(tn(arguments[0],tL))arguments[0].filter(this);else if(tn(arguments[0],x)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(r)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return Z.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[tO]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(Z.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),Z.hasNullElements(e))throw new m("holes must not contain null elements");if(t.isEmpty()&&Z.hasNonEmptyElements(e))throw new m("shell is empty but holes are not");this._shell=t,this._holes=e}}]),s}(Z),tA=function(e){i(o,e);var r=h(o);function o(e){var n;return t(this,o),(n=r.call(this)).array=[],e instanceof Y&&n.addAll(e),n}return n(o,[{key:"contains",value:function(t){var e,n=g(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=g(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new X}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new tD(this.array)}}]),o}(function(e){i(r,e);var n=h(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(H)),tD=function(){function e(n){t(this,e),this.array=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new U;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new X}}]),e}(),tz=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){for(var t=new G,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t)||this._geometries.length!==t._geometries.length)return!1;for(var n=0;n<this._geometries.length;n++)if(!this._geometries[n].equalsExact(t._geometries[n],e))return!1;return!0}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();tC.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=tI.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new td(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=tI.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1==arguments.length){var t=arguments[0],e=new tA(tC.asList(this._geometries)),n=new tA(tC.asList(t._geometries));return this.compare(e,n)}if(2==arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=r.getGeometryN(a),h=u.compareToSameClass(l,i);if(0!==h)return h;a++}return a<o?1:a<s?-1:0}}},{key:"apply",value:function(){if(tn(arguments[0],tb))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(tn(arguments[0],tP)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(tn(arguments[0],tL)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(tn(arguments[0],x)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:"getBoundary",value:function(){return Z.checkNotGeometryCollection(this),z.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return Z.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];if(Z.constructor_.call(this,e),null===t&&(t=[]),Z.hasNullElements(t))throw new m("geometries must not contain null elements");this._geometries=t}}}]),s}(Z),tB=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(r(s.prototype),"equalsExact",this).call(this,t,e)}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1==arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return c(r(s.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return tI.FALSE}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[tM]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tz.constructor_.call(this,t,e)}}]),s}(tz),tF=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return tI.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||c(r(s.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return tw.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return Z.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!c(r(s.prototype),"isClosed",this).call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return Z.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tS.constructor_.call(this,t,e),this.validateConstruction()}}]),s}(tS);tF.MINIMUM_VALID_SIZE=4;var tq=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;default:throw new m("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y}throw new m("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new m("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0==arguments.length)V.constructor_.call(this);else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e.x,e.y)}}else if(2==arguments.length){var n=arguments[0],i=arguments[1];V.constructor_.call(this,n,i,V.NULL_ORDINATE)}}}]),o}(V);tq.X=0,tq.Y=1,tq.Z=-1,tq.M=-1;var tV=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new m("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return V.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new m("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new m("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0==arguments.length)V.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];V.constructor_.call(this,n,i,V.NULL_ORDINATE),this._m=r}}}]),o}(V);tV.X=0,tV.Y=1,tV.Z=-1,tV.M=2;var tG=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case V.X:this.x=e;break;case V.Y:this.y=e;break;case V.Z:this.z=e;break;case V.M:this._m=e;break;default:throw new m("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case V.X:return this.x;case V.Y:return this.y;case V.Z:return this.getZ();case V.M:return this.getM()}throw new m("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0==arguments.length)V.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof o){var t=arguments[0];V.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof V){var e=arguments[0];V.constructor_.call(this,e),this._m=this.getM()}}else if(4==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];V.constructor_.call(this,n,i,r),this._m=s}}}]),o}(V),tZ=function(){function e(){t(this,e)}return n(e,null,[{key:"measures",value:function(t){return t instanceof tq?0:+(t instanceof tV||t instanceof tG)}},{key:"dimension",value:function(t){return t instanceof tq?2:t instanceof tV?3:t instanceof tG?4:3}},{key:"create",value:function(){if(1==arguments.length){var t=arguments[0];return e.create(t,0)}if(2==arguments.length){var n=arguments[0],i=arguments[1];return 2===n?new tq:3===n&&0===i?new V:3===n&&1===i?new tV:4===n&&1===i?new tG:new V}}}]),e}(),tj=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2==arguments.length&&"boolean"==typeof arguments[1]&&tn(arguments[0],Y)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return c(r(s.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=c(r(s.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0==arguments.length)return this.toArray(s.coordArrayType);if(1==arguments.length){if(arguments[0])return this.toArray(s.coordArrayType);for(var t=this.size(),e=Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1==arguments.length){var t=arguments[0];return c(r(s.prototype),"add",this).call(this,t)}if(2==arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof V&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;c(r(s.prototype),"add",this).call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3==arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];if(arguments[2])for(var h=0;h<u.length;h++)this.add(u[h],l);else for(var f=u.length-1;f>=0;f--)this.add(u[f],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof V){var d=arguments[0],p=arguments[1];if(!arguments[2]){var g=this.size();if(g>0&&(d>0&&this.get(d-1).equals2D(p)||d<g&&this.get(d).equals2D(p)))return null}c(r(s.prototype),"add",this).call(this,d,p)}}else if(4==arguments.length){var v=arguments[0],y=arguments[1],_=arguments[2],m=arguments[3],x=1;_>m&&(x=-1);for(var b=_;b!==m;b+=x)this.add(v[b],y);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),s}(td);tj.coordArrayType=[].fill(null);var tY=function(){function e(){t(this,e)}return n(e,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,n){for(var i=0;i<t.length;i++){var r=t[i];if(0>e.indexOf(r,n))return r}return null}},{key:"scroll",value:function(t,n){var i=e.indexOf(n,t);if(i<0)return null;var r=Array(t.length).fill(null);ty.arraycopy(t,i,r,0,t.length-i),ty.arraycopy(t,0,r,t.length-i,i),ty.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3==arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r||i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new tj,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=g(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,tZ.measures(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new tj(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i}},{key:"copyDeep",value:function(){if(1==arguments.length){for(var t=arguments[0],e=Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5==arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=i[r+u].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new G,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=g(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,tZ.dimension(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return -1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:+(n<t.length)}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=t_.clamp(e,0,t.length);var i=(n=t_.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r}}]),e}(),tU=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){return tY.compare(t,e)}},{key:"interfaces_",get:function(){return[R]}}]),e}(),tX=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){if(t.length<e.length)return -1;if(t.length>e.length)return 1;if(0===t.length)return 0;var n=tY.compare(t,e);return tY.isEqualReversed(t,e)?0:n}},{key:"OLDcompare",value:function(t,e){if(t.length<e.length)return -1;if(t.length>e.length)return 1;if(0===t.length)return 0;for(var n=tY.increasingDirection(t),i=tY.increasingDirection(e),r=n>0?0:t.length-1,o=i>0?0:t.length-1,s=0;s<t.length;s++){var a=t[r].compareTo(e[o]);if(0!==a)return a;r+=n,o+=i}return 0}},{key:"interfaces_",get:function(){return[R]}}]),e}();tY.ForwardComparator=tU,tY.BidirectionalComparator=tX,tY.coordArrayType=[].fill(null);var tH=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),tW=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():O.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case tu.X:this._coordinates[t].x=n;break;case tu.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():O.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case tu.X:return this._coordinates[t].x;case tu.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1==arguments.length){var t=arguments[0];return this._coordinates[t]}if(2==arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return tZ.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),t[n]=i}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new tH(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[tu,k]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,tY.dimension(t),tY.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new V}else if(tn(arguments[0],tu)){var r=arguments[0];if(null===r)return this._coordinates=[].fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=Array(r.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=r.getCoordinateCopy(o)}}else if(2==arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];e.constructor_.call(this,s,a,tY.measures(s))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],l=arguments[1];this._coordinates=Array(u).fill(null),this._dimension=l;for(var h=0;h<u;h++)this._coordinates[h]=tZ.create(l)}}else if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],d=arguments[2];this._dimension=f,this._measures=d,this._coordinates=null===c?[].fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var p=arguments[0],g=arguments[1],v=arguments[2];this._coordinates=Array(p).fill(null),this._dimension=g,this._measures=v;for(var y=0;y<p;y++)this._coordinates[y]=this.createCoordinate()}}}}]),e}(),tK=function(){function e(){t(this,e)}return n(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1==arguments.length){if(arguments[0]instanceof Array||tn(arguments[0],tu))return new tW(arguments[0])}else{if(2==arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new tW(arguments[0],t)}if(3==arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new tW(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[tx,k]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();tK.instanceObject=new tK;var tJ=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(r(s.prototype),"equalsExact",this).call(this,t,e)}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new td,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[tO]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tz.constructor_.call(this,t,e)}}]),s}(tz),tQ=function(){function e(){t(this,e)}return n(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),t$=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).map=new Map,e}return n(o,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new td,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var t=new W;return this.map.entries().forEach(function(e){return t.add(e)}),t}},{key:"size",value:function(){return this.map.size()}}]),o}(tQ),t0=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"equals",value:function(t){return t instanceof e&&this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(t){var e=this.getMaximumSignificantDigits(),n=t.getMaximumSignificantDigits();return tr.compare(e,n)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return O.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof V){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[k,b]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0==arguments.length)this._modelType=e.FLOATING;else if(1==arguments.length){if(arguments[0]instanceof t1){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),t1=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();t1.nameToTypeMap=new t$,t0.Type=t1,t0.FIXED=new t1("FIXED"),t0.FLOATING=new t1("FLOATING"),t0.FLOATING_SINGLE=new t1("FLOATING SINGLE"),t0.maximumPreciseValue=0x20000000000000;var t2=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Z){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&c(r(s.prototype),"equalsExact",this).call(this,t,e)}return c(r(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?tI.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return Z.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new X}},{key:"getGeometryType",value:function(){return Z.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[tk]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];tz.constructor_.call(this,t,e)}}]),s}(tz),t3=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"createEmpty",value:function(t){switch(t){case -1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new m("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new V(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new V(t.getMinX(),t.getMinY()),new V(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new V(t.getMinX(),t.getMinY()),new V(t.getMinX(),t.getMaxY()),new V(t.getMaxX(),t.getMaxY()),new V(t.getMaxX(),t.getMinY()),new V(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0==arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(tn(arguments[0],tu))return new tS(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0==arguments.length?new t2(null,this):1==arguments.length?new t2(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,i=!1,r=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getTypeCode();null===n&&(n=a),a!==n&&(i=!0),s instanceof tz&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next();if(t.size()>1){if(u instanceof tR)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof tS)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof tN)return this.createMultiPoint(e.toPointArray(t));z.shouldNeverReachHere("Unhandled geometry type: "+u.getGeometryType())}return u}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0==arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(tn(arguments[0],tu))return new tN(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0==arguments.length)return this.createPolygon(null,null);if(1==arguments.length){if(tn(arguments[0],tu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof tF){var n=arguments[0];return this.createPolygon(n,null)}}else if(2==arguments.length)return new tR(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0==arguments.length?new tz(null,this):1==arguments.length?new tz(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0==arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(tn(arguments[0],tu))return new tF(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0==arguments.length?new tJ(null,this):1==arguments.length?new tJ(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0==arguments.length)return new tB(null,this);if(1==arguments.length){if(arguments[0]instanceof Array)return new tB(arguments[0],this);if(tn(arguments[0],tu)){var t=arguments[0];if(null===t)return this.createMultiPoint([].fill(null));for(var e=Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());tw.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0==arguments.length)e.constructor_.call(this,new t0,0);else if(1==arguments.length){if(tn(arguments[0],tx)){var t=arguments[0];e.constructor_.call(this,new t0,0,t)}else if(arguments[0]instanceof t0){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];e.constructor_.call(this,i,r,e.getDefaultCoordinateSequenceFactory())}else if(3==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=a,this._SRID=s}}},{key:"toMultiPolygonArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return tK.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),t4={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},t8="EMPTY";for(var t6 in t4)t4[t6].toUpperCase();var t5=function(){function e(n){t(this,e),this.wkt=n,this.index_=-1}return n(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"	"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,i=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,i=this.readNumber_();else if(this.isAlpha_(e))t=1,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw Error("Unexpected character: "+e);t=6}return{position:n,value:i,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,i=!1;do"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_();while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t))return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t))return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),t7=function(){function e(n,i){t(this,e),this.lexer_=n,this.token_,this.layout_="XY",this.factory=i}return n(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t="XY",e=this.token_;if(this.isTokenType(1)){var n=e.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(2)){var t=[];do t.push(this.parseGeometry_());while(this.match(5))if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(1)&&this.token_.value==t8;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var t=this.factory,e=function(t){return a(V,f(t))},n=function(n){var i=n.map(function(n){return t.createLinearRing(n.map(e))});return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},i=this.token_;if(this.match(1)){var r=i.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==r){var o=this.parseGeometryCollectionText_();return t.createGeometryCollection(o)}switch(r){case"POINT":var s=this.parsePointText_();return s?t.createPoint(a(V,f(s))):t.createPoint();case"LINESTRING":var u=this.parseLineStringText_().map(e);return t.createLineString(u);case"LINEARRING":var l=this.parseLineStringText_().map(e);return t.createLinearRing(l);case"POLYGON":var h=this.parsePolygonText_();return h&&0!==h.length?n(h):t.createPolygon();case"MULTIPOINT":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var d=c.map(e).map(function(e){return t.createPoint(e)});return t.createMultiPoint(d);case"MULTILINESTRING":var p=this.parseMultiLineStringText_().map(function(n){return t.createLineString(n.map(e))});return t.createMultiLineString(p);case"MULTIPOLYGON":var g=this.parseMultiPolygonText_();if(!g||0===g.length)return t.createMultiPolygon();var v=g.map(n);return t.createMultiPolygon(v);default:throw Error("Invalid geometry type: "+r)}}throw Error(this.formatErrorMessage_())}}]),e}();function t9(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function et(t){for(var e=t.getCoordinates().map(function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(", ")}function ee(t){var e=[];e.push("("+et(t.getExteriorRing())+")");for(var n=0,i=t.getNumInteriorRing();n<i;++n)e.push("("+et(t.getInteriorRingN(n))+")");return e.join(", ")}var en={Point:t9,LineString:et,LinearRing:et,Polygon:ee,MultiPoint:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+t9(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+et(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push("("+ee(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(ei(t.getGeometryN(n)));return e.join(", ")}};function ei(t){var e=t.getGeometryType(),n=en[e];e=e.toUpperCase();var i=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return i.length>0&&(e+=" "+i),t.isEmpty()?e+" "+t8:e+" ("+n(t)+")"}var er=function(){function e(n){t(this,e),this.geometryFactory=n||new t3,this.precisionModel=this.geometryFactory.getPrecisionModel()}return n(e,[{key:"read",value:function(t){return new t7(new t5(t),this.geometryFactory).parse()}},{key:"write",value:function(t){return ei(t)}}]),e}(),eo=function(){function e(n){t(this,e),this.parser=new er(n)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!=arguments.length)throw Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),es=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new tH;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0==arguments.length)null===this._intLineIndex&&(this._intLineIndex=[,,].fill().map(function(){return[,,]}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1==arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0==arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1==arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return eo.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+eo.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=[,,].fill().map(function(){return[,,]}),this._intPt=[,,].fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new V,this._intPt[1]=new V,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return z.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return z.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),e}();es.DONT_INTERSECT=0,es.DO_INTERSECT=1,es.COLLINEAR=2,es.NO_INTERSECTION=0,es.POINT_INTERSECTION=1,es.COLLINEAR_INTERSECTION=2;var ea=function(e){i(s,e);var o=h(s);function s(){return t(this,s),o.call(this)}return n(s,[{key:"isInSegmentEnvelopes",value:function(t){var e=new G(this._inputLines[0][0],this._inputLines[0][1]),n=new G(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!=arguments.length)return c(r(s.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,G.intersects(e,n,t)&&0===tl.index(e,n,t)&&0===tl.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=es.POINT_INTERSECTION,null;this._result=es.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,i){var r=this.intersectionSafe(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new V(s.nearestEndpoint(t,e,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(r),r}},{key:"checkDD",value:function(t,e,n,i,r){var o=ta.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);ty.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&ty.out.println("Distance = "+r.distance(o))}},{key:"intersectionSafe",value:function(t,e,n,i){var r=tv.intersection(t,e,n,i);return null===r&&(r=s.nearestEndpoint(t,e,n,i)),r}},{key:"computeCollinearIntersection",value:function(t,e,n,i){var r=G.intersects(t,e,n),o=G.intersects(t,e,i),s=G.intersects(n,i,t),a=G.intersects(n,i,e);return r&&o?(this._intPt[0]=n,this._intPt[1]=i,es.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,es.COLLINEAR_INTERSECTION):r&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?es.COLLINEAR_INTERSECTION:es.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?es.COLLINEAR_INTERSECTION:es.POINT_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?es.COLLINEAR_INTERSECTION:es.POINT_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||s?es.COLLINEAR_INTERSECTION:es.POINT_INTERSECTION):es.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,i){if(this._isProper=!1,!G.intersects(t,e,n,i))return es.NO_INTERSECTION;var r=tl.index(t,e,n),o=tl.index(t,e,i);if(r>0&&o>0||r<0&&o<0)return es.NO_INTERSECTION;var s=tl.index(n,i,t),a=tl.index(n,i,e);return s>0&&a>0||s<0&&a<0?es.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new V(n):0===o?this._intPt[0]=new V(i):0===s?this._intPt[0]=new V(t):0===a&&(this._intPt[0]=new V(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),es.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,i){var r=t,o=tm.pointToSegment(t,n,i),s=tm.pointToSegment(e,n,i);return s<o&&(o=s,r=e),(s=tm.pointToSegment(n,t,e))<o&&(o=s,r=n),(s=tm.pointToSegment(i,t,e))<o&&(o=s,r=i),r}}]),s}(es),eu=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=tl.index(t,e,this._p);if(r===tl.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===tl.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==j.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?j.BOUNDARY:this._crossingCount%2==1?j.INTERIOR:j.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof V&&tn(arguments[1],tu)){for(var t=arguments[1],n=new e(arguments[0]),i=new V,r=new V,o=1;o<t.size()&&(t.getCoordinate(o,i),t.getCoordinate(o-1,r),n.countSegment(i,r),!n.isOnSegment());o++);return n.getLocation()}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var s=arguments[1],a=new e(arguments[0]),u=1;u<s.length;u++){var l=s[u],h=s[u-1];if(a.countSegment(l,h),a.isOnSegment())break}return a.getLocation()}}}]),e}(),el=function(){function e(){t(this,e)}return n(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof V&&tn(arguments[1],tu)){for(var t=arguments[0],e=arguments[1],n=new ea,i=new V,r=new V,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,i),e.getCoordinate(s,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof V&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new ea,h=1;h<u.length;h++){var c=u[h-1],f=u[h];if(l.computeIntersection(a,c,f),l.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return eu.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,n){return e.locateInRing(t,n)!==j.EXTERIOR}}]),e}(),eh=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==j.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===j.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=[,,,].fill(null);e[J.ON]=this.location[J.ON],e[J.LEFT]=j.NONE,e[J.RIGHT]=j.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===j.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[J.LEFT];this.location[J.LEFT]=this.location[J.RIGHT],this.location[J.RIGHT]=t}},{key:"toString",value:function(){var t=new ti;return this.location.length>1&&t.append(j.toLocationSymbol(this.location[J.LEFT])),t.append(j.toLocationSymbol(this.location[J.ON])),this.location.length>1&&t.append(j.toLocationSymbol(this.location[J.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[J.ON]=t,this.location[J.LEFT]=e,this.location[J.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:j.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===j.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1==arguments.length){var t=arguments[0];this.setLocation(J.ON,t)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=Array(t).fill(null),this.setAllLocations(j.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1==arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[J.ON]=n}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[J.ON]=o,this.location[J.LEFT]=s,this.location[J.RIGHT]=a}}}]),e}(),ec=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1==arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new eh(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1==arguments.length){var t=arguments[0];return this.elt[t].get(J.ON)}if(2==arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new ti;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0==arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1==arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(J.ON,e)}else if(3==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new eh(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=[,,].fill(null),1==arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new eh(t),this.elt[1]=new eh(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new eh(n.elt[0]),this.elt[1]=new eh(n.elt[1])}}else if(2==arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new eh(j.NONE),this.elt[1]=new eh(j.NONE),this.elt[i].setLocation(r)}else if(3==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new eh(o,s,a),this.elt[1]=new eh(o,s,a)}else if(4==arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new eh(j.NONE,j.NONE,j.NONE),this.elt[1]=new eh(j.NONE,j.NONE,j.NONE),this.elt[u].setLocations(l,h,c)}}},{key:"toLineLabel",value:function(t){for(var n=new e(j.NONE),i=0;i<2;i++)n.setLocation(i,t.getLocation(i));return n}}]),e}(),ef=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=tl.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new tc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new tc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();z.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe)this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!el.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1==arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2==arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,J.RIGHT);if(n===j.NONE)return null;if(this._label.getLocation(e)===j.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new td,this._pts=new td,this._label=new ec(j.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new td,this._geometryFactory=null,0==arguments.length);else if(2==arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),ed=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];ef.constructor_.call(this,t,e)}}]),o}(ef),ep=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"buildMinimalRings",value:function(){var t=new td,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ed(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe)return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];ef.constructor_.call(this,t,e)}}]),o}(ef),eg=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){z.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this._label=t}}}]),e}(),ev=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=j.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==j.BOUNDARY&&(n=i)}return n}},{key:"setLabel",value:function(){if(2!=arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return c(r(s.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new ec(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof s){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof ec)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n);this._label.getLocation(n)===j.NONE&&this._label.setLocation(n,i)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=j.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case j.BOUNDARY:n=j.INTERIOR;break;case j.INTERIOR:default:n=j.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new ec(0,j.NONE)}}]),s}(eg);function ey(t){return null==t?0:t.color}function e_(t){return null==t?null:t.parent}function em(t,e){null!==t&&(t.color=e)}function ex(t){return null==t?null:t.left}function eb(t){return null==t?null:t.right}var eE=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),(e=r.call(this)).root_=null,e.size_=0,e}return n(o,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}while(null!==r)var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)e_(t)===ex(e_(e_(t)))?1===ey(e=eb(e_(e_(t))))?(em(e_(t),0),em(e,0),em(e_(e_(t)),1),t=e_(e_(t))):(t===eb(e_(t))&&(t=e_(t),this.rotateLeft(t)),em(e_(t),0),em(e_(e_(t)),1),this.rotateRight(e_(e_(t)))):1===ey(e=ex(e_(e_(t))))?(em(e_(t),0),em(e,0),em(e_(e_(t)),1),t=e_(e_(t))):(t===ex(e_(t))&&(t=e_(t),this.rotateRight(t)),em(e_(t),0),em(e_(e_(t)),1),this.rotateLeft(e_(e_(t))));this.root_.color=0}},{key:"values",value:function(){var t=new td,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=o.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new W,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=o.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),o}(function(e){i(r,e);var n=h(r);function r(){return t(this,r),n.apply(this,arguments)}return r}(tQ)),ek=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof V){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ev){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new td,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===j.BOUNDARY&&e.add(i)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new eE,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),ew=function(){function e(){t(this,e)}return n(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return -1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new m("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof V&&arguments[1]instanceof V){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new m("Cannot compute the quadrant for two identical points "+i);return r.x>=i.x?r.y>=i.y?e.NE:e.SE:r.y>=i.y?e.NW:e.SW}}}]),e}();ew.NE=0,ew.NW=1,ew.SW=2,ew.SE=3;var eI=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:tl.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ew.quadrant(this._dx,this._dy),z.isTrue(0!==this._dx||0!==this._dy,"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1==arguments.length){var t=arguments[0];this._edge=t}else if(3==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];e.constructor_.call(this,n,i,r,null)}else if(4==arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];e.constructor_.call(this,o),this.init(s,a),this._label=u}}}]),e}(),eL=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new ec(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new tc("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,J.LEFT)===j.INTERIOR&&this._label.getLocation(e,J.RIGHT)===j.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){c(r(s.prototype),"print",this).call(this,t),t.print(" "+this._depth[J.LEFT]+"/"+this._depth[J.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,j.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,j.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===J.LEFT&&(i=-1);var r=J.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(eI.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===j.EXTERIOR&&e===j.INTERIOR?1:t===j.INTERIOR&&e===j.EXTERIOR?-1:0}}]),s}(eI),eP=function(){function e(){t(this,e)}return n(e,[{key:"createNode",value:function(t){return new ev(t,null)}}]),e}(),eS=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof ev){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof V){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){ty.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===j.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,i){return!!t.equals(n)&&tl.index(t,e,i)===tl.COLLINEAR&&ew.quadrant(t,e)===ew.quadrant(n,i)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){ty.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1])||this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new eL(n,!0),r=new eL(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}],[{key:"constructor_",value:function(){if(this._edges=new td,this._nodes=null,this._edgeEndList=new td,0==arguments.length)this._nodes=new ek(new eP);else if(1==arguments.length){var t=arguments[0];this._nodes=new ek(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),eM=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}}},{key:"computePolygons",value:function(t){for(var e=new td,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:"placeFreeHoles",value:function(t,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var o=e.findEdgeRingContaining(r,t);if(null===o)throw new tc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var i=new td,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new td,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new ep(i,this._geometryFactory);e.add(r),r.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return z.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1==arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2==arguments.length){var e=arguments[0],n=arguments[1];eS.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new td,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new td;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=tY.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;el.isInRing(r,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(s=(o=u).getLinearRing().getEnvelopeInternal())}}return o}}]),e}(),eN=function(){function e(){t(this,e)}return n(e,[{key:"getBounds",value:function(){}}]),e}(),eT=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[eN,k]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),eC=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&0>this._items.get(e+1).compareTo(this._items.get(e))&&e++,0>this._items.get(e).compareTo(n));t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);0>t.compareTo(this._items.get(Math.trunc(e/2)));e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new td,this._items.add(null)}}]),e}(),eO=function(){function e(){t(this,e)}return n(e,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),e}(),eR=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){z.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[eN,k]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new td,this._bounds=null,this._level=null,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this._level=t}}}]),e}(),eA={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return eA.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?tC.sort(n,e):tC.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new td;return e.add(t),e}},eD=function(){function e(){t(this,e)}return n(e,null,[{key:"maxDistance",value:function(t,n,i,r,o,s,a,u){var l=e.distance(t,n,o,s);return Math.max(l=Math.max(l=Math.max(l,e.distance(t,n,a,u)),e.distance(i,r,o,s)),e.distance(i,r,a,u))}},{key:"distance",value:function(t,e,n,i){var r=n-t,o=i-e;return Math.sqrt(r*r+o*o)}},{key:"maximumDistance",value:function(t,n){var i=Math.min(t.getMinX(),n.getMinX()),r=Math.min(t.getMinY(),n.getMinY()),o=Math.max(t.getMaxX(),n.getMaxX()),s=Math.max(t.getMaxY(),n.getMaxY());return e.distance(i,r,o,s)}},{key:"minMaxDistance",value:function(t,n){var i=t.getMinX(),r=t.getMinY(),o=t.getMaxX(),s=t.getMaxY(),a=n.getMinX(),u=n.getMinY(),l=n.getMaxX(),h=n.getMaxY(),c=e.maxDistance(i,r,i,s,a,u,a,h);return Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c,e.maxDistance(i,r,i,s,a,u,l,u)),e.maxDistance(i,r,i,s,l,h,a,h)),e.maxDistance(i,r,i,s,l,h,l,u)),e.maxDistance(i,r,o,r,a,u,a,h)),e.maxDistance(i,r,o,r,a,u,l,u)),e.maxDistance(i,r,o,r,l,h,a,h)),e.maxDistance(i,r,o,r,l,h,l,u)),e.maxDistance(o,s,i,s,a,u,a,h)),e.maxDistance(o,s,i,s,a,u,l,u)),e.maxDistance(o,s,i,s,l,h,a,h)),e.maxDistance(o,s,i,s,l,h,l,u)),e.maxDistance(o,s,o,r,a,u,a,h)),e.maxDistance(o,s,o,r,a,u,l,u)),e.maxDistance(o,s,o,r,l,h,a,h)),e.maxDistance(o,s,o,r,l,h,l,u))}}]),e}(),ez=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"maximumDistance",value:function(){return eD.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,n){var i=e.isComposite(this._boundable1),r=e.isComposite(this._boundable2);if(i&&r)return e.area(this._boundable1)>e.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,!1,t,n):this.expand(this._boundable2,this._boundable1,!0,t,n),null;if(i)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new m("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){return this._distance<t._distance?-1:+(this._distance>t._distance)}},{key:"expand",value:function(t,n,i,r,o){for(var s=t.getChildBoundables().iterator();s.hasNext();){var a=s.next(),u=null;(u=i?new e(n,a,this._itemDistance):new e(a,n,this._itemDistance)).getDistance()<o&&r.add(u)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof eR}}]),e}(),eB=function(){function e(){t(this,e)}return n(e,[{key:"visitItem",value:function(t){}}]),e}(),eF=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"queryInternal",value:function(){if(tn(arguments[2],eB)&&arguments[0]instanceof Object&&arguments[1]instanceof eR)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof eR?this.queryInternal(t,r,e):r instanceof eT?e.visitItem(r.getItem()):z.shouldNeverReachHere())}else if(tn(arguments[2],tt)&&arguments[0]instanceof Object&&arguments[1]instanceof eR)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof eR?this.queryInternal(o,l,s):l instanceof eT?s.add(l.getItem()):z.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1==arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof eR?t+=this.size(n):n instanceof eT&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof eT&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0==arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new td:t}if(1==arguments.length){for(var e=arguments[0],n=new td,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof eR){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof eT?n.add(r.getItem()):z.shouldNeverReachHere()}return 0>=n.size()?null:n}}},{key:"insert",value:function(t,e){z.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new eT(t,e))}},{key:"boundablesAtLevel",value:function(){if(1==arguments.length){var t=arguments[0],e=new td;return this.boundablesAtLevel(t,this._root,e),e}if(3==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(z.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof eR?this.boundablesAtLevel(n,s,r):(z.isTrue(s instanceof eT),-1===n&&r.add(s))}return null}}},{key:"query",value:function(){if(1==arguments.length){var t=arguments[0];this.build();var e=new td;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2==arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof eR&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}}},{key:"createHigherLevels",value:function(t,e){z.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1==arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof eR){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){z.isTrue(!t.isEmpty());var n=new td;n.add(this.createNode(e));var i=new td(t);eA.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new td,this._nodeCapacity=null,0==arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){var t=arguments[0];z.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();eF.IntersectsOp=function(){},eF.DEFAULT_NODE_CAPACITY=10;var eq=function(){function e(){t(this,e)}return n(e,[{key:"distance",value:function(t,e){}}]),e}(),eV=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){z.isTrue(t.length>0);for(var n=new td,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:"nearestNeighbourK",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,O.POSITIVE_INFINITY,e)}if(3==arguments.length){var n=arguments[0],i=arguments[2],r=arguments[1],o=new eC;o.add(n);for(var a=new eC;!o.isEmpty()&&r>=0;){var u=o.poll(),l=u.getDistance();if(l>=r)break;u.isLeaves()?a.size()<i?a.add(u):(a.peek().getDistance()>l&&(a.poll(),a.add(u)),r=a.peek().getDistance()):u.expandToQueue(o,r)}return s.getItems(a)}}},{key:"createNode",value:function(t){return new eG(t)}},{key:"size",value:function(){return 0==arguments.length?c(r(s.prototype),"size",this).call(this):c(r(s.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof G))return c(r(s.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;c(r(s.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return s.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new td;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i}},{key:"query",value:function(){if(1==arguments.length){var t=arguments[0];return c(r(s.prototype),"query",this).call(this,t)}if(2==arguments.length){var e=arguments[0],n=arguments[1];c(r(s.prototype),"query",this).call(this,e,n)}}},{key:"getComparator",value:function(){return s.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return c(r(s.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof G){var t=arguments[0],e=arguments[1];return c(r(s.prototype),"remove",this).call(this,t,e)}return c(r(s.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0==arguments.length?c(r(s.prototype),"depth",this).call(this):c(r(s.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){z.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new td(t);eA.sort(i,s.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)}},{key:"nearestNeighbour",value:function(){if(1==arguments.length){if(tn(arguments[0],eq)){var t=arguments[0];if(this.isEmpty())return null;var e=new ez(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ez){var n=arguments[0],i=O.POSITIVE_INFINITY,r=null,o=new eC;for(o.add(n);!o.isEmpty()&&i>0;){var s=o.poll(),a=s.getDistance();if(a>=i)break;s.isLeaves()?(i=a,r=s):s.expandToQueue(o,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2==arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var h=new ez(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(h)}if(3==arguments.length){var c=arguments[2],f=new eT(arguments[0],arguments[1]),d=new ez(this.getRoot(),f,c);return this.nearestNeighbour(d)[0]}if(4==arguments.length){var p=arguments[2],g=arguments[3],v=new eT(arguments[0],arguments[1]),y=new ez(this.getRoot(),v,p);return this.nearestNeighbourK(y,g)}}}},{key:"isWithinDistance",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1],n=O.POSITIVE_INFINITY,i=new eC;for(i.add(t);!i.isEmpty();){var r=i.poll(),o=r.getDistance();if(o>e)break;if(r.maximumDistance()<=e)return!0;if(r.isLeaves()){if((n=o)<=e)return!0}else r.expandToQueue(i,n)}return!1}if(3==arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=new ez(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(l,u)}}},{key:"interfaces_",get:function(){return[eO,k]}}],[{key:"constructor_",value:function(){if(0==arguments.length)s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){var t=arguments[0];eF.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return s.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return s.avg(t.getMinY(),t.getMaxY())}}]),s}(eF),eG=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new G(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];eR.constructor_.call(this,t)}}]),o}(eR);eV.STRtreeNode=eG,eV.xComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[R]}},{key:"compare",value:function(t,e){return eF.compareDoubles(eV.centreX(t.getBounds()),eV.centreX(e.getBounds()))}}]),e}()),eV.yComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[R]}},{key:"compare",value:function(t,e){return eF.compareDoubles(eV.centreY(t.getBounds()),eV.centreY(e.getBounds()))}}]),e}()),eV.intersectsOp=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),e}()),eV.DEFAULT_NODE_CAPACITY=10;var eZ=function(){function e(){t(this,e)}return n(e,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:+(t>e)}},{key:"compare",value:function(t,n,i){if(n.equals2D(i))return 0;var r=e.relativeSign(n.x,i.x),o=e.relativeSign(n.y,i.y);switch(t){case 0:return e.compareValue(r,o);case 1:return e.compareValue(o,r);case 2:return e.compareValue(o,-r);case 3:return e.compareValue(-r,o);case 4:return e.compareValue(-r,-o);case 5:return e.compareValue(-o,-r);case 6:return e.compareValue(-o,r);case 7:return e.compareValue(r,-o)}return z.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:+(e>0)}}]),e}(),ej=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?eZ.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new V(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),e}(),eY=function(){function e(){t(this,e)}return n(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),eU=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSplitCoordinates",value:function(){var t=new tj;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new td;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new V(t.coord),new V(e.coord)];var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=Array(n).fill(null),s=0;o[s++]=new V(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new V(e.coord)),o}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(tr.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){var i=this.createSplitEdgePts(t,e);n.add(i,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=[,].fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(tr.valueOf(e[0])),i=r}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){return new eK(this.createSplitEdgePts(t,e),this._edge.getData())}},{key:"add",value:function(t,e){var n=new ej(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(z.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new A("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new A("bad split edge end point at "+r)}}],[{key:"constructor_",value:function(){this._nodeMap=new eE,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),eX=function(){function e(){t(this,e)}return n(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new m("Cannot compute the octant for point ( "+t+", "+n+" )");var i=Math.abs(t),r=Math.abs(n);return t>=0?n>=0?i>=r?0:1:i>=r?7:6:n>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof V&&arguments[1]instanceof V){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(0===a&&0===u)throw new m("Cannot compute the octant for two identical points "+o);return e.octant(a,u)}}}]),e}(),eH=function(){function e(){t(this,e)}return n(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),e}(),eW=function(){function e(){t(this,e)}return n(e,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[eH]}}]),e}(),eK=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:eX.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4==arguments.length){var n=arguments[1],i=arguments[3],r=new V(arguments[0].getIntersection(i));this.addIntersection(r,n)}}},{key:"toString",value:function(){return eo.toLineString(new tW(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:"interfaces_",get:function(){return[eW]}}],[{key:"constructor_",value:function(){this._nodeList=new eU(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1==arguments.length){var t=arguments[0],n=new td;return e.getNodedSubstrings(t,n),n}if(2==arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)}}]),e}(),eJ=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=tl.index(this.p0,this.p1,t.p0),i=tl.index(this.p0,this.p1,t.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof V){var r=arguments[0];return tl.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){return t instanceof e&&this.p0.equals(t.p0)&&this.p1.equals(t.p1)}},{key:"intersection",value:function(t){var e=new ea;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof V){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new V(t);var n=this.projectionFactor(t),i=new V;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof e){var r=arguments[0],o=this.projectionFactor(r.p0),s=this.projectionFactor(r.p1);if(o>=1&&s>=1||o<=0&&s<=0)return null;var a=this.project(r.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(r.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new e(a,u)}}},{key:"normalize",value:function(){0>this.p1.compareTo(this.p0)&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return tm.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?O.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=[,,].fill(null),i=O.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=this.p0.compareTo(t.p0);return 0!==e?e:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return tv.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new V(n-u,i+a)}},{key:"setCoordinates",value:function(){if(1==arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||O.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new V((-o*s-2*e*n*a-2*e*i)/r,(o*a-2*e*n*s-2*n*i)/r)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return tm.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof V){var n=arguments[0];return tm.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new V;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=O.doubleToLongBits(this.p0.x),e=Math.trunc(t^=31*O.doubleToLongBits(this.p0.y))^Math.trunc(t>>32),n=O.doubleToLongBits(this.p1.x);return e^Math.trunc(n^=31*O.doubleToLongBits(this.p1.y))^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[b,k]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0==arguments.length)e.constructor_.call(this,new V,new V);else if(1==arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2==arguments.length){var n=arguments[0],i=arguments[1];this.p0=n,this.p1=i}else if(4==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e.constructor_.call(this,new V(r,o),new V(s,a))}}},{key:"midPoint",value:function(t,e){return new V((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),eQ=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"overlap",value:function(){if(2==arguments.length);else if(4==arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new eJ,this._overlapSeg2=new eJ}}]),e}(),e$=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,o))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)}},{key:"getCoordinates",value:function(){for(var t=Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2==arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6==arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5];if(i-n==1&&s-o==1)return a.overlap(this,n,r,o),null;if(!this.overlaps(n,i,r,o,s))return null;var u=Math.trunc((n+i)/2),l=Math.trunc((o+s)/2);n<u&&(o<l&&this.computeOverlaps(n,u,r,o,l,a),l<s&&this.computeOverlaps(n,u,r,l,s,a)),u<i&&(o<l&&this.computeOverlaps(u,i,r,o,l,a),l<s&&this.computeOverlaps(u,i,r,l,s,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new G(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,i,r){return G.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}}]),e}(),e0=function(){function e(){t(this,e)}return n(e,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=ew.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||ew.quadrant(t[r-1],t[r])===i);)r++;return r-1}},{key:"getChains",value:function(){if(1==arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2==arguments.length){var n=arguments[0],i=arguments[1],r=new td,o=0;do{var s=e.findChainEnd(n,o),a=new e$(n,o,s,i);r.add(a),o=s}while(o<n.length-1)return r}}}]),e}(),e1=function(){function e(){t(this,e)}return n(e,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),e2=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[e1]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0==arguments.length);else if(1==arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),e3=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return eK.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=e0.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new e4(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new td,this._index=new eV,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0==arguments.length);else if(1==arguments.length){var t=arguments[0];e2.constructor_.call(this,t)}}}]),o}(e2),e4=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"overlap",value:function(){if(4!=arguments.length)return c(r(s.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],i=arguments[0].getContext(),o=e.getContext();this._si.processIntersections(i,t,o,n)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),s}(eQ);e3.SegmentOverlapAction=e4;var e8=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isDeletable",value:function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;this.isDeletable(t,n,i,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,o=!0,r=!0),t=o?i:n,n=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(n)}return r}},{key:"isShallowConcavity",value:function(t,e,n,i){return tl.index(t,e,n)===this._angleOrientation&&tm.pointToSegment(e,t,n)<i}},{key:"isShallowSampled",value:function(t,n,i,r,o){var s=Math.trunc((r-i)/e.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=i;a<r;a+=s)if(!this.isShallow(t,n,this._inputLine[a],o))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return tl.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=tl.CLOCKWISE),this._isDeleted=Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e)return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(t,e,n,i){return tm.pointToSegment(e,t,n)<i}},{key:"collapseLine",value:function(){for(var t=new tj,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=tl.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,n){return new e(t).simplify(n)}}]),e}();e8.INIT=0,e8.DELETE=1,e8.KEEP=1,e8.NUM_PTS_TO_CHECK=10;var e6=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new V(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:"isRedundant",value:function(t){if(1>this._ptList.size())return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new t3).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(1>this._ptList.size())return null;var t=new V(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new td}}]),e}();e6.COORDINATE_ARRAY_TYPE=[].fill(null);var e5=function(){function e(){t(this,e)}return n(e,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1==arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2==arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x;return Math.atan2(n.y-e.y,i)}}},{key:"isAcute",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,n,i){var r=e.angle(n,t);return Math.abs(e.angle(n,i)-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i);return e.diff(r,o)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,n){var i=Math.sin(n-t);return i>0?e.COUNTERCLOCKWISE:i<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,i){var r=e.angle(n,t),o=e.angle(n,i)-r;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();e5.PI_TIMES_2=2*Math.PI,e5.PI_OVER_2=Math.PI/2,e5.PI_OVER_4=Math.PI/4,e5.COUNTERCLOCKWISE=tl.COUNTERCLOCKWISE,e5.CLOCKWISE=tl.CLOCKWISE,e5.NONE=tl.COLLINEAR;var e7=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=tl.index(this._s0,this._s1,this._s2),i=n===tl.CLOCKWISE&&this._side===J.LEFT||n===tl.COUNTERCLOCKWISE&&this._side===J.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new eJ(t,e),i=new eJ;this.computeOffsetSegment(n,J.LEFT,this._distance,i);var r=new eJ;this.computeOffsetSegment(n,J.RIGHT,this._distance,r);var o=e.x-t.x,s=Math.atan2(e.y-t.y,o);switch(this._bufParams.getEndCapStyle()){case v.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,s+Math.PI/2,s-Math.PI/2,tl.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case v.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case v.CAP_SQUARE:var a=new V;a.x=Math.abs(this._distance)*Math.cos(s),a.y=Math.abs(this._distance)*Math.sin(s);var u=new V(i.p1.x+a.x,i.p1.y+a.y),l=new V(r.p1.x+a.x,r.p1.y+a.y);this._segList.addPt(u),this._segList.addPt(l)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,i){var r=tv.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==r&&(i<=0?1:r.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null;this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===v.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===v.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new V(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new V(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new V(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new V(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,i,r){var o=e.x-t.x,s=Math.atan2(e.y-t.y,o),a=n.x-t.x,u=Math.atan2(n.y-t.y,a);i===tl.CLOCKWISE?s<=u&&(s+=2*Math.PI):s>=u&&(s-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,s,u,i,r),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,i){var r=this._seg0.p1,o=e5.angle(r,this._seg0.p0),s=e5.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=e5.normalize(o+s),u=e5.normalize(a+Math.PI),l=i*n,h=n-l*Math.abs(Math.sin(s)),c=new V(r.x+l*Math.cos(u),r.y+l*Math.sin(u)),f=new eJ(r,c),d=f.pointAlongOffset(1,h),p=f.pointAlongOffset(1,-h);this._side===J.LEFT?(this._segList.addPt(d),this._segList.addPt(p)):(this._segList.addPt(p),this._segList.addPt(d))}},{key:"addDirectedFillet",value:function(t,e,n,i,r){var o=i===tl.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=new V,h=0;h<a;h++){var c=e+o*h*u;l.x=t.x+r*Math.cos(c),l.y=t.y+r*Math.sin(c),this._segList.addPt(l)}}},{key:"computeOffsetSegment",value:function(t,e,n,i){var r=e===J.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u}},{key:"addInsideTurn",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new V((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new V((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new V(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new e6,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===v.JOIN_BEVEL||this._bufParams.getJoinStyle()===v.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,tl.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new eJ,this._seg1=new eJ,this._offset0=new eJ,this._offset1=new eJ,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new ea,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===v.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}]),e}();e7.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,e7.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,e7.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,e7.MAX_CLOSING_SEG_LEN_FACTOR=80;var e9=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&tY.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=e8.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],J.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=e8.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],J.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===J.RIGHT&&(i=-i);var r=e8.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=e8.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],J.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=e8.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],J.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case v.CAP_ROUND:e.createCircle(t);break;case v.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return e.copyCoordinates(t);var r=this.getSegGen(i);return this.computeRingBufferCurve(t,n,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=e8.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],J.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=e8.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],J.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new e7(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new V(t[n]);return e}}]),e}(),nt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"findStabbedSegments",value:function(){if(1==arguments.length){for(var t=arguments[0],e=new td,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3==arguments.length){if(tn(arguments[2],tt)&&arguments[0]instanceof V&&arguments[1]instanceof eL){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||tl.index(this._seg.p0,this._seg.p1,o)===tl.RIGHT)){var h=s.getDepth(J.LEFT);this._seg.p0.equals(u[l])||(h=s.getDepth(J.RIGHT));var c=new ne(this._seg,h);a.add(c)}}else if(tn(arguments[2],tt)&&arguments[0]instanceof V&&tn(arguments[1],tt))for(var f=arguments[0],d=arguments[2],p=arguments[1].iterator();p.hasNext();){var g=p.next();g.isForward()&&this.findStabbedSegments(f,g,d)}}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:eA.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new eJ;var t=arguments[0];this._subgraphs=t}}]),e}(),ne=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return -1;var e=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==e||0!=(e=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?e:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new eJ(t),this._leftDepth=e}}]),e}();nt.DepthSegment=ne;var nn=function(e){i(o,e);var r=h(o);function o(){var e;return t(this,o),e=r.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){y.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),o}(y),ni=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getY",value:function(){var t=this.y/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new nn;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(O.isNaN(t)||O.isInfinite(t))throw new nn;return t}},{key:"getCoordinate",value:function(){var t=new V;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0==arguments.length)this.x=0,this.y=0,this.w=1;else if(1==arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2==arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof V&&arguments[1]instanceof V){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3==arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4==arguments.length){var c=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],g=c.y-f.y,v=f.x-c.x,y=c.x*f.y-f.x*c.y,_=d.y-p.y,m=p.x-d.x,x=d.x*p.y-p.x*d.y;this.x=v*x-m*y,this.y=_*y-g*x,this.w=g*m-_*v}}}]),e}(),nr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new m("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,i){return t*i-e*n}},{key:"interpolateZ",value:function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,h=s*l-a*u,c=t.x-r,f=t.y-o;return e.getZ()+(l*c-a*f)/h*(n.getZ()-e.getZ())+(-u*c+s*f)/h*(i.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s}},{key:"circumcentreDD",value:function(t,e,n){var i=ts.valueOf(t.x).subtract(n.x),r=ts.valueOf(t.y).subtract(n.y),o=ts.valueOf(e.x).subtract(n.x),s=ts.valueOf(e.y).subtract(n.y),a=ts.determinant(i,r,o,s).multiply(2),u=i.sqr().add(r.sqr()),l=o.sqr().add(s.sqr()),h=ts.determinant(r,u,s,l),c=ts.determinant(i,u,o,l);return new V(ts.valueOf(n.x).subtract(h.divide(a)).doubleValue(),ts.valueOf(n.y).add(c.divide(a)).doubleValue())}},{key:"isAcute",value:function(t,e,n){return!!e5.isAcute(t,e,n)&&!!e5.isAcute(e,n,t)&&!!e5.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,n,i){var r=i.x,o=i.y,s=t.x-r,a=t.y-o,u=n.x-r,l=n.y-o,h=2*e.det(s,a,u,l);return new V(r-e.det(a,s*s+a*a,l,u*u+l*l)/h,o+e.det(s,s*s+a*a,u,u*u+l*l)/h)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new ni(t.x+n/2,t.y+i/2,1),o=new ni(t.x-i+n/2,t.y+n+i/2,1);return new ni(r,o)}},{key:"angleBisector",value:function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new V(t.x+r*o,t.y+r*s)}},{key:"area3D",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.getZ()-t.getZ(),s=n.x-t.x,a=n.y-t.y,u=n.getZ()-t.getZ(),l=r*u-o*a,h=o*s-i*u,c=i*a-r*s;return Math.sqrt(l*l+h*h+c*c)/2}},{key:"centroid",value:function(t,e,n){return new V((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)}},{key:"inCentre",value:function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o;return new V((i*t.x+r*e.x+o*n.x)/s,(i*t.y+r*e.y+o*n.y)/s)}}]),e}(),no=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addRingSide",value:function(t,e,n,i,r){if(0===e&&t.length<tF.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=tF.MINIMUM_VALID_SIZE&&tl.isCCW(t)&&(o=r,s=i,n=J.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,J.LEFT,j.EXTERIOR,j.INTERIOR),this.addRingSide(t,e,J.RIGHT,j.INTERIOR,j.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,j.EXTERIOR,j.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=J.LEFT;this._distance<0&&(e=-this._distance,n=J.RIGHT);var i=t.getExteriorRing(),r=tY.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,n,j.EXTERIOR,j.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=tY.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(a,e,J.opposite(n),j.INTERIOR,j.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new nr(t[0],t[1],t[2]),i=n.inCentre();return tm.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=tY.removeRepeatedPoints(t.getCoordinates());if(tY.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,j.EXTERIOR,j.INTERIOR)}}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var i=new eK(t,new ec(0,j.BOUNDARY,e,n));this._curveList.add(i)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof tR)this.addPolygon(t);else if(t instanceof tS)this.addLineString(t);else if(t instanceof tN)this.addPoint(t);else if(t instanceof tB)this.addCollection(t);else if(t instanceof t2)this.addCollection(t);else if(t instanceof tJ)this.addCollection(t);else{if(!(t instanceof tz))throw new X(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new td;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),e}(),ns=function(){function e(){t(this,e)}return n(e,[{key:"locate",value:function(t){}}]),e}(),na=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new U;var t=this._parent.getGeometryN(this._index++);return t instanceof tz?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new X(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[eY]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof tz)}}]),e}(),nu=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[ns]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return j.EXTERIOR;var i=n.getExteriorRing(),r=e.locatePointInRing(t,i);if(r!==j.INTERIOR)return r;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locatePointInRing(t,s);if(a===j.BOUNDARY)return j.BOUNDARY;if(a===j.INTERIOR)return j.EXTERIOR}return j.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?el.locateInRing(t,e.getCoordinates()):j.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return j.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof tR)return e.locatePointInPolygon(t,n);if(n instanceof tz)for(var i=new na(n);i.hasNext();){var r=i.next();if(r!==n){var o=e.locateInGeometry(t,r);if(o!==j.EXTERIOR)return o}}return j.EXTERIOR}},{key:"isContained",value:function(t,n){return j.EXTERIOR!==e.locate(t,n)}},{key:"locate",value:function(t,n){return n.isEmpty()?j.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):j.EXTERIOR}}]),e}(),nl=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new tc("no outgoing dirEdge found",this.getCoordinate());z.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return ew.isNorthern(r)&&ew.isNorthern(o)?n:ew.isNorthern(r)||ew.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(z.shouldNeverReachHere("found two horizontal edges incident on node"),null):i}},{key:"print",value:function(t){ty.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new td;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:"computeDepths",value:function(){if(1==arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(J.LEFT),i=t.getDepth(J.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new tc("depth mismatch at "+t.getCoordinate())}else if(3==arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(J.RIGHT,s),s=u.getDepth(J.LEFT)}return s}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(z.isTrue(null!==e,"found null for first outgoing dirEdge"),z.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0==arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1==arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=j.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=j.INTERIOR;break}if(i.isInResult()){t=j.EXTERIOR;break}}}if(t===j.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===j.INTERIOR):(s.isInResult()&&(r=j.EXTERIOR),a.isInResult()&&(r=j.INTERIOR))}}},{key:"computeLabelling",value:function(t){c(r(s.prototype),"computeLabelling",this).call(this,t),this._label=new ec(j.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==j.INTERIOR&&o!==j.BOUNDARY||this._label.setLocation(i,j.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),s}(function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=j.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,J.LEFT)!==j.NONE&&(e=i.getLocation(t,J.LEFT))}if(e===j.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,J.ON)===j.NONE&&a.setLocation(t,J.ON,r),a.isArea(t)){var u=a.getLocation(t,J.LEFT),l=a.getLocation(t,J.RIGHT);if(l!==j.NONE){if(l!==r)throw new tc("side location conflict",s.getCoordinate());u===j.NONE&&z.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=u}else z.isTrue(a.getLocation(t,J.LEFT)===j.NONE,"found single null side"),a.setLocation(t,J.RIGHT,r),a.setLocation(t,J.LEFT,r)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){ty.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(0>=e.size())return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,J.LEFT);z.isTrue(i!==j.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();z.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,J.LEFT),u=s.getLocation(t,J.RIGHT);if(a===u||u!==r)return!1;r=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return -1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new td(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===j.NONE&&(this._ptInAreaLocation[t]=nu.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new ti;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===j.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=j.NONE;if(e[u])l=j.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new eE,this._edgeList=null,this._ptInAreaLocation=[j.NONE,j.NONE]}}]),e}()),nh=function(e){i(o,e);var r=h(o);function o(){return t(this,o),r.call(this)}return n(o,[{key:"createNode",value:function(t){return new ev(t,new nl)}}]),o}(eP),nc=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){return e.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(t){return 1===tY.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=r)===s,f=(l+=o)===a;if(c&&!f)return -1;if(!c&&f)return 1;if(c&&f)return 0}}}]),e}(),nf=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return -1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new nc(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new nc(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new td,this._ocaMap=new eE}}]),e}(),nd=function(){function e(){t(this,e)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){}},{key:"isDone",value:function(){}}]),e}(),np=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isTrivialIntersection",value:function(t,n,i,r){if(t===i&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,r))return!0;if(t.isClosed()){var o=t.size()-1;if(0===n&&r===o||0===r&&n===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[nd]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),ng=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:+(this.dist>e)}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new V(t),this.segmentIndex=e,this.dist=n}}]),e}(),nv=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=Array(n).fill(null),s=0;o[s++]=new V(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new nE(o,new ec(this.edge._label))}},{key:"add",value:function(t,e,n){var i=new ng(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new eE,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),ny=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])||e.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||e.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||e.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))&&this._matrix[j.EXTERIOR][j.INTERIOR]===tI.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===tI.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])||e.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||e.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||e.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))&&this._matrix[j.INTERIOR][j.EXTERIOR]===tI.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===tI.FALSE}},{key:"set",value:function(){if(1==arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=tI.toDimensionValue(t.charAt(e))}else if(3==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._matrix[r][o]=s}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.EXTERIOR][j.INTERIOR]===tI.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===tI.FALSE}},{key:"setAtLeast",value:function(){if(1==arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,tI.toDimensionValue(t.charAt(e)))}else if(3==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._matrix[r][o]<s&&(this._matrix[r][o]=s)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.INTERIOR][j.EXTERIOR]===tI.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===tI.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):(t===tI.A&&n===tI.A||t===tI.L&&n===tI.L||t===tI.L&&n===tI.A||t===tI.P&&n===tI.A||t===tI.P&&n===tI.L)&&this._matrix[j.INTERIOR][j.INTERIOR]===tI.FALSE&&(e.isTrue(this._matrix[j.INTERIOR][j.BOUNDARY])||e.isTrue(this._matrix[j.BOUNDARY][j.INTERIOR])||e.isTrue(this._matrix[j.BOUNDARY][j.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===tI.P&&n===tI.P||t===tI.A&&n===tI.A?e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&e.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR])&&e.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR]):t===tI.L&&n===tI.L&&1===this._matrix[j.INTERIOR][j.INTERIOR]&&e.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR])&&e.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&this._matrix[j.INTERIOR][j.EXTERIOR]===tI.FALSE&&this._matrix[j.BOUNDARY][j.EXTERIOR]===tI.FALSE&&this._matrix[j.EXTERIOR][j.INTERIOR]===tI.FALSE&&this._matrix[j.EXTERIOR][j.BOUNDARY]===tI.FALSE}},{key:"toString",value:function(){for(var t=new tH("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,tI.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new m("Should be length 9: "+t);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!e.matches(this._matrix[n][i],t.charAt(3*n+i)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[j.INTERIOR][j.INTERIOR]===tI.FALSE&&this._matrix[j.INTERIOR][j.BOUNDARY]===tI.FALSE&&this._matrix[j.BOUNDARY][j.INTERIOR]===tI.FALSE&&this._matrix[j.BOUNDARY][j.BOUNDARY]===tI.FALSE}},{key:"isCrosses",value:function(t,n){return t===tI.P&&n===tI.L||t===tI.P&&n===tI.A||t===tI.L&&n===tI.A?e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&e.isTrue(this._matrix[j.INTERIOR][j.EXTERIOR]):t===tI.L&&n===tI.P||t===tI.A&&n===tI.P||t===tI.A&&n===tI.L?e.isTrue(this._matrix[j.INTERIOR][j.INTERIOR])&&e.isTrue(this._matrix[j.EXTERIOR][j.INTERIOR]):t===tI.L&&n===tI.L&&0===this._matrix[j.INTERIOR][j.INTERIOR]}},{key:"interfaces_",get:function(){return[E]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0==arguments.length)this._matrix=[,,,].fill().map(function(){return[,,,]}),this.setAll(tI.FALSE);else if(1==arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[j.INTERIOR][j.INTERIOR]=n._matrix[j.INTERIOR][j.INTERIOR],this._matrix[j.INTERIOR][j.BOUNDARY]=n._matrix[j.INTERIOR][j.BOUNDARY],this._matrix[j.INTERIOR][j.EXTERIOR]=n._matrix[j.INTERIOR][j.EXTERIOR],this._matrix[j.BOUNDARY][j.INTERIOR]=n._matrix[j.BOUNDARY][j.INTERIOR],this._matrix[j.BOUNDARY][j.BOUNDARY]=n._matrix[j.BOUNDARY][j.BOUNDARY],this._matrix[j.BOUNDARY][j.EXTERIOR]=n._matrix[j.BOUNDARY][j.EXTERIOR],this._matrix[j.EXTERIOR][j.INTERIOR]=n._matrix[j.EXTERIOR][j.INTERIOR],this._matrix[j.EXTERIOR][j.BOUNDARY]=n._matrix[j.EXTERIOR][j.BOUNDARY],this._matrix[j.EXTERIOR][j.EXTERIOR]=n._matrix[j.EXTERIOR][j.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===tI.SYM_DONTCARE||n===tI.SYM_TRUE&&(t>=0||t===tI.TRUE)||n===tI.SYM_FALSE&&t===tI.FALSE||n===tI.SYM_P&&t===tI.P||n===tI.SYM_L&&t===tI.L||n===tI.SYM_A&&t===tI.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var i=arguments[1];return new e(arguments[0]).matches(i)}}},{key:"isTrue",value:function(t){return t>=0||t===tI.TRUE}}]),e}(),n_=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),ty.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=tC.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=Array(this._size).fill(null);return ty.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0==arguments.length)e.constructor_.call(this,10);else if(1==arguments.length){var t=arguments[0];this._data=Array(t).fill(null)}}}]),e}(),nm=function(){function e(){t(this,e)}return n(e,[{key:"getChainStartIndices",value:function(t){var e=0,n=new n_(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1)return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=ew.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&ew.quadrant(t[i-1],t[i])===n;)i++;return i-1}},{key:"OLDgetChainStartIndices",value:function(t){var n=0,i=new td;i.add(n);do{var r=this.findChainEnd(t,n);i.add(r),n=r}while(n<t.length-1)return e.toIntArray(i)}}],[{key:"toIntArray",value:function(t){for(var e=Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),e}(),nx=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4==arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6==arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(!this.overlaps(r,o,s,a,u))return null;var h=Math.trunc((r+o)/2),c=Math.trunc((a+u)/2);r<h&&(a<c&&this.computeIntersectsForChain(r,h,s,a,c,l),c<u&&this.computeIntersectsForChain(r,h,s,c,u,l)),h<o&&(a<c&&this.computeIntersectsForChain(h,o,s,a,c,l),c<u&&this.computeIntersectsForChain(h,o,s,c,u,l))}}},{key:"overlaps",value:function(t,e,n,i,r){return G.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new nm;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),nb=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0==arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1==arguments.length){var i=arguments[0];return this._depth[i][1]===e.NULL_VALUE}if(2==arguments.length){var r=arguments[0],o=arguments[1];return this._depth[r][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:"getDelta",value:function(t){return this._depth[t][J.RIGHT]-this._depth[t][J.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?j.EXTERIOR:j.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1==arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=t.getLocation(n,i);r!==j.EXTERIOR&&r!==j.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=e.depthAtLocation(r):this._depth[n][i]+=e.depthAtLocation(r))}else if(3==arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===j.INTERIOR&&this._depth[o][s]++}}}],[{key:"constructor_",value:function(){this._depth=[,,].fill().map(function(){return[,,,]});for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===j.EXTERIOR?0:t===j.INTERIOR?1:e.NULL_VALUE}}]),e}();nb.NULL_VALUE=-1;var nE=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=[,,].fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,ec.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof s)||this.pts.length!==t.pts.length)return!1;for(var e=!0,n=!0,i=this.pts.length,r=0;r<this.pts.length;r++)if(this.pts[r].equals2D(t.pts[r])||(e=!1),this.pts[r].equals2D(t.pts[--i])||(n=!1),!e&&!n)return!1;return!0}},{key:"getCoordinate",value:function(){if(0==arguments.length)return this.pts.length>0?this.pts[0]:null;if(1==arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){s.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new nx(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new G;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,i){var r=new V(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)}},{key:"toString",value:function(){var t=new tH;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new nv(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new nb,this._depthDelta=0,1==arguments.length){var t=arguments[0];s.constructor_.call(this,t,null)}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:"updateIM",value:function(){if(!(2==arguments.length&&arguments[1]instanceof ny&&arguments[0]instanceof ec))return c(r(s),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,J.ON),t.getLocation(1,J.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,J.LEFT),t.getLocation(1,J.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,J.RIGHT),t.getLocation(1,J.RIGHT),2))}}]),s}(eg),nk=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var i=n.getLabel(),r=t.getLabel();n.isPointwiseEqual(t)||(r=new ec(t.getLabel())).flip(),i.merge(r);var o=e.depthDelta(r),s=n.getDepthDelta()+o;n.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new td,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new nt(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new td,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new tg;r.create(i),e.add(r)}}return eA.sort(e,eA.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new e3,n=new ea;return n.setPrecisionModel(t),e.setSegmentIntersector(new np(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new no(t,e,new e9(n,this._bufParams)).getCurves();if(0>=i.size())return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new eS(new nh),this._graph.addEdges(this._edgeList.getEdges());var r=this.createSubgraphs(this._graph),o=new eM(this._geomFact);this.buildSubgraphs(r,o);var s=o.getPolygons();return 0>=s.size()?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new nE(r.getCoordinates(),new ec(s));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new nf;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,J.LEFT),n=t.getLocation(0,J.RIGHT);return e===j.INTERIOR&&n===j.EXTERIOR?1:e===j.EXTERIOR&&n===j.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new t3,n=new td;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}}]),e}(),nw=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"rescale",value:function(){if(tn(arguments[0],Y))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&ty.out.println(n)}}},{key:"scale",value:function(){if(tn(arguments[0],Y)){for(var t=arguments[0],e=new td(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new eK(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new V(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].getZ());return tY.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[e1]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2==arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4==arguments.length){var i=arguments[0],r=arguments[1];this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),nI=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2==arguments.length){for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new A("found endpt/interior pt intersection at index "+o+" :pt "+n)}}},{key:"checkInteriorIntersections",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2==arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,u,o,l);else if(4==arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],d=arguments[3];if(h===f&&c===d)return null;var p=h.getCoordinates()[c],g=h.getCoordinates()[c+1],v=f.getCoordinates()[d],y=f.getCoordinates()[d+1];if(this._li.computeIntersection(p,g,v,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,g)||this.hasInteriorIntersection(this._li,v,y)))throw new A("found non-noded intersection at "+p+"-"+g+" and "+v+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0==arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1==arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,i){if(t.equals(i))throw new A("found non-noded collapse at "+e.fact.createLineString([t,n,i]))}}],[{key:"constructor_",value:function(){this._li=new ea,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();nI.fact=new t3;var nL=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return z.isTrue(!(s&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new V(this._maxx,this._maxy),this._corner[1]=new V(this._minx,this._maxy),this._corner[2]=new V(this._minx,this._miny),this._corner[3]=new V(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new G(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=[,,,,].fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new V(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new V,this._p1Scaled=new V),this.initCorners(this._pt)}}]),e}();nL.SAFE_ENV_EXPANSION_FACTOR=.75;var nP=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"select",value:function(){if(1==arguments.length);else if(2==arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new eJ}}]),e}(),nS=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"snap",value:function(){if(1==arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3==arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=i.getSafeEnvelope(),a=new nM(i,r,o);return this._index.query(s,new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[eB]}},{key:"visitItem",value:function(t){t.select(s,a)}}]),e}())),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),nM=function(e){i(s,e);var o=h(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2==arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof e$))return c(r(s.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),s}(nP);nS.HotPixelSnapAction=nM;var nN=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"processIntersections",value:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[nd]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new td}}]),e}(),nT=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkCorrectness",value:function(t){var e=new nI(eK.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof y))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return eK.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new nN(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(tn(arguments[0],Y))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof eK)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new nL(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new e3,this._pointSnapper=new nS(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=new nL(e.next(),this._scaleFactor,this._li);this._pointSnapper.snap(n)}}},{key:"interfaces_",get:function(){return[e1]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ea,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),nC=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"bufferFixedPrecision",value:function(t){var e=new nw(new nT(new t0(1)),t.getScale()),n=new nk(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0==arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof tc))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1==arguments.length){var n=arguments[0],i=new t0(e.precisionScaleFactor(this._argGeom,this._distance,n));this.bufferFixedPrecision(i)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===t0.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new nk(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof A))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new v,this._resultGeometry=null,this._saveException=null,1==arguments.length){var t=arguments[0];this._argGeom=t}else if(2==arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2==arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Z&&"number"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=new e(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(n)}if(arguments[2]instanceof v&&arguments[0]instanceof Z&&"number"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4==arguments.length){var s=arguments[1],a=arguments[2],u=arguments[3],l=new e(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(u),l.getResultGeometry(s)}}},{key:"precisionScaleFactor",value:function(t,e,n){var i=t.getEnvelopeInternal();return Math.pow(10,n-Math.trunc(Math.log(t_.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0))/Math.log(10)+1))}}]),e}();nC.CAP_ROUND=v.CAP_ROUND,nC.CAP_BUTT=v.CAP_FLAT,nC.CAP_FLAT=v.CAP_FLAT,nC.CAP_SQUARE=v.CAP_SQUARE,nC.MAX_PRECISION_DIGITS=12;var nO=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],nR=function(){function e(n){t(this,e),this.geometryFactory=n||new t3}return n(e,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!nA[n])throw Error("Unknown GeoJSON type: "+e.type);return -1!==nO.indexOf(n)?nA[n].call(this,e.coordinates):"GeometryCollection"===n?nA[n].call(this,e.geometries):nA[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!nD[e])throw Error("Geometry is not supported");return nD[e].call(this,t)}}]),e}(),nA={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!nA[t.geometry.type])throw Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=nA.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(a(V,f(i)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new V(t[0],t[1]),new V(t[2],t[1]),new V(t[2],t[3]),new V(t[0],t[3]),new V(t[0],t[1])])},Point:function(t){var e=a(V,f(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(nA.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=nA.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(nA.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=nA.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=nA.coordinates.call(this,o),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(nA.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},nD={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:nD.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=nD.Point.call(this,i);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(nD.coordinate.call(this,r))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=nD.LineString.call(this,i);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=nD.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=nD.LineString.call(this,r);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=nD.Polygon.call(this,i);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(nD[r].call(this,i))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:nC,GeoJSONReader:function(){function e(n){t(this,e),this.parser=new nR(n||new t3)}return n(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new nR(this.geometryFactory)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}]),e}()}}()),ne.exports));function ni(){return new nr}function nr(){this.reset()}nr.prototype={constructor:nr,reset:function(){this.s=this.t=0},add:function(t){ns(no,t,this.t),ns(this,no.s,this.s),this.s?this.t+=no.t:this.s=no.t},valueOf:function(){return this.s}};var no=new nr;function ns(t,e,n){var i=t.s=e+n,r=i-e;t.t=e-(i-r)+(n-r)}var na=Math.PI,nu=na/2,nl=na/4,nh=2*na,nc=180/na,nf=na/180,nd=Math.abs,np=Math.atan,ng=Math.atan2,nv=Math.cos,ny=Math.sin,n_=Math.sqrt;function nm(t){return t>1?0:t<-1?na:Math.acos(t)}function nx(t){return t>1?nu:t<-1?-nu:Math.asin(t)}function nb(){}function nE(t,e){t&&nw.hasOwnProperty(t.type)&&nw[t.type](t,e)}var nk={Feature:function(t,e){nE(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)nE(n[i].geometry,e)}},nw={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){nI(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)nI(n[i],e,0)},Polygon:function(t,e){nL(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)nL(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)nE(n[i],e)}};function nI(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function nL(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)nI(t[n],e,1);e.polygonEnd()}function nP(t){return[ng(t[1],t[0]),nx(t[2])]}function nS(t){var e=t[0],n=t[1],i=nv(n);return[i*nv(e),i*ny(e),ny(n)]}function nM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function nN(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function nT(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function nC(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function nO(t){var e=n_(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function nR(t,e){function n(n,i){return e((n=t(n,i))[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function nA(t,e){return[t>na?t-nh:t<-na?t+nh:t,e]}function nD(t){return function(e,n){return[(e+=t)>na?e-nh:e<-na?e+nh:e,n]}}function nz(t){var e=nD(t);return e.invert=nD(-t),e}function nB(t,e){var n=nv(t),i=ny(t),r=nv(e),o=ny(e);function s(t,e){var s=nv(e),a=nv(t)*s,u=ny(t)*s,l=ny(e),h=l*n+a*i;return[ng(u*r-h*o,a*n-l*i),nx(h*r+u*o)]}return s.invert=function(t,e){var s=nv(e),a=nv(t)*s,u=ny(t)*s,l=ny(e),h=l*r-u*o;return[ng(u*r+l*o,a*n+h*i),nx(h*n-a*i)]},s}function nF(t,e){(e=nS(e))[0]-=t,nO(e);var n=nm(-e[1]);return((0>-e[2]?-n:n)+nh-1e-6)%nh}function nq(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:nb,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function nV(t,e){return 1e-6>nd(t[0]-e[0])&&1e-6>nd(t[1]-e[1])}function nG(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function nZ(t,e,n,i,r){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(nV(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new nG(i,t,null,!0)),u.push(n.o=new nG(i,null,n,!1)),a.push(n=new nG(s,t,null,!1)),u.push(n.o=new nG(s,null,n,!0))}}),a.length){for(u.sort(e),nj(a),nj(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=l.length;o<s;++o)r.point((h=l[o])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(o=(l=f.p.z).length-1;o>=0;--o)r.point((h=l[o])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}l=(f=f.o).z,d=!d}while(!f.v)r.lineEnd()}}}function nj(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function nY(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nU(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}ni(),ni(),ni(),nA.invert=nA,1===(ig=nY).length&&(iv=ig,ig=function(t,e){return nY(iv(t),e)});var nX=ni();function nH(t){return t}ni(),ni(),ni();var nW=1/0,nK=1/0,nJ=-1/0,nQ=nJ,n$={point:function(t,e){t<nW&&(nW=t),t>nJ&&(nJ=t),e<nK&&(nK=e),e>nQ&&(nQ=e)},lineStart:nb,lineEnd:nb,polygonStart:nb,polygonEnd:nb,result:function(){var t=[[nW,nK],[nJ,nQ]];return nJ=nQ=-(nK=nW=1/0),t}};function n0(t,e,n,i){return function(r,o){var s,a,u,l=e(o),h=r.invert(i[0],i[1]),c=nq(),f=e(c),d=!1,p={point:g,lineStart:y,lineEnd:_,polygonStart:function(){p.point=m,p.lineStart=x,p.lineEnd=b,a=[],s=[]},polygonEnd:function(){p.point=g,p.lineStart=y,p.lineEnd=_,a=nU(a);var t=function(t,e){var n=e[0],i=e[1],r=[ny(n),-nv(n),0],o=0,s=0;nX.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],f=c[0],d=c[1]/2+nl,p=ny(d),g=nv(d),v=0;v<h;++v,f=_,p=x,g=b,c=y){var y=l[v],_=y[0],m=y[1]/2+nl,x=ny(m),b=nv(m),E=_-f,k=E>=0?1:-1,w=k*E,I=w>na,P=p*x;if(nX.add(ng(P*k*ny(w),g*b+P*nv(w))),o+=I?E+k*nh:E,I^f>=n^_>=n){var S=nN(nS(c),nS(y));nO(S);var M=nN(r,S);nO(M);var N=(I^E>=0?-1:1)*nx(M[2]);(i>N||i===N&&(S[0]||S[1]))&&(s+=I^E>=0?1:-1)}}return(o<-1e-6||o<1e-6&&nX<-1e-6)^1&s}(s,h);a.length?(d||(o.polygonStart(),d=!0),nZ(a,n2,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function v(t,e){var n=r(t,e);l.point(n[0],n[1])}function y(){p.point=v,l.lineStart()}function _(){p.point=g,l.lineEnd()}function m(t,e){u.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function b(){m(u[0][0],u[0][1]),f.lineEnd();var t,e,n,i,r=f.clean(),l=c.result(),h=l.length;if(u.pop(),s.push(u),u=null,h){if(1&r){if((e=(n=l[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else h>1&&2&r&&l.push(l.pop().concat(l.shift())),a.push(l.filter(n1))}}return p}}function n1(t){return t.length>1}function n2(t,e){return((t=t.x)[0]<0?t[1]-nu-1e-6:nu-t[1])-((e=e.x)[0]<0?e[1]-nu-1e-6:nu-e[1])}ni();var n3=n0(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a,u,l,h,c,f,d=o>0?na:-na,p=nd(o-n);1e-6>nd(p-na)?(t.point(n,i=(i+s)/2>0?nu:-nu),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(d,i),t.point(o,i),e=0):r!==d&&p>=na&&(1e-6>nd(n-r)&&(n-=1e-6*r),1e-6>nd(o-d)&&(o-=1e-6*d),a=n,u=i,i=nd(f=ny(a-(l=o)))>1e-6?np((ny(u)*(c=nv(s))*ny(l)-ny(s)*(h=nv(u))*ny(a))/(h*c*f)):(u+s)/2,t.point(r,i),t.lineEnd(),t.lineStart(),t.point(d,i),e=0),t.point(n=o,i=s),r=d},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*nu,i.point(-na,r),i.point(0,r),i.point(na,r),i.point(na,0),i.point(na,-r),i.point(0,-r),i.point(-na,-r),i.point(-na,0),i.point(-na,r);else if(nd(t[0]-e[0])>1e-6){var o=t[0]<e[0]?na:-na;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-na,-nu]);function n4(t){return function(e){var n=new n8;for(var i in t)n[i]=t[i];return n.stream=e,n}}function n8(){}function n6(t,e,n){var i,r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),i=t.stream(n$),n&&nk.hasOwnProperty(n.type)?nk[n.type](n,i):nE(n,i);var a=n$.result(),u=Math.min(r/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),l=+e[0][0]+(r-u*(a[1][0]+a[0][0]))/2,h=+e[0][1]+(o-u*(a[1][1]+a[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*u).translate([l,h])}n8.prototype={constructor:n8,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var n5=nv(30*nf);function n7(t,e){return+e?function(t,e){function n(i,r,o,s,a,u,l,h,c,f,d,p,g,v){var y=l-i,_=h-r,m=y*y+_*_;if(m>4*e&&g--){var x=s+f,b=a+d,E=u+p,k=n_(x*x+b*b+E*E),w=nx(E/=k),I=1e-6>nd(nd(E)-1)||1e-6>nd(o-c)?(o+c)/2:ng(b,x),P=t(I,w),S=P[0],M=P[1],N=S-i,T=M-r,C=_*N-y*T;(C*C/m>e||nd((y*N+_*T)/m-.5)>.3||s*f+a*d+u*p<n5)&&(n(i,r,o,s,a,u,S,M,I,x/=k,b/=k,E,g,v),v.point(S,M),n(S,M,I,x,b,E,l,h,c,f,d,p,g,v))}}return function(e){var i,r,o,s,a,u,l,h,c,f,d,p,g={point:v,lineStart:y,lineEnd:m,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function v(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){h=NaN,g.point=_,e.lineStart()}function _(i,r){var o=nS([i,r]),s=t(i,r);n(h,c,l,f,d,p,h=s[0],c=s[1],l=i,f=o[0],d=o[1],p=o[2],16,e),e.point(h,c)}function m(){g.point=v,e.lineEnd()}function x(){y(),g.point=b,g.lineEnd=E}function b(t,e){_(i=t,e),r=h,o=c,s=f,a=d,u=p,g.point=_}function E(){n(h,c,l,f,d,p,r,o,i,s,a,u,16,e),g.lineEnd=m,m()}return g}}(t,e):n4({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}var n9=n4({point:function(t,e){this.stream.point(t*nf,e*nf)}});function it(t){return function(e,n){var i=nv(e),r=nv(n),o=t(i*r);return[o*r*ny(e),o*ny(n)]}}function ie(t){return function(e,n){var i=n_(e*e+n*n),r=t(i),o=ny(r);return[ng(e*o,i*nv(r)),nx(i&&n*o/i)]}}it(function(t){return n_(2/(1+t))}).invert=ie(function(t){return 2*nx(t/2)});var ii=it(function(t){return(t=nm(t))&&t/ny(t)});function ir(t,e){return[t,e]}ii.invert=ie(function(t){return t}),ir.invert=ir;var io=nn.BufferOp,is=nn.GeoJSONReader,ia=nn.GeoJSONWriter;function iu(t,e,n,i){var r,o,s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return t_(t,function(t){var r=iu(t,e,n,i);r&&u.push(r)}),T(u)}var l=(o=[-(r=e9(a).geometry.coordinates)[0],-r[1]],(function(t){var e,n,i,r,o,s,a,u,l,h,c=150,f=480,d=250,p=0,g=0,v=0,y=0,_=0,m=null,x=n3,b=null,E=nH,k=.5,w=n7(S,.5);function I(t){return[(t=o(t[0]*nf,t[1]*nf))[0]*c+n,i-t[1]*c]}function P(t){return(t=o.invert((t[0]-n)/c,(i-t[1])/c))&&[t[0]*nc,t[1]*nc]}function S(t,r){return[(t=e(t,r))[0]*c+n,i-t[1]*c]}function M(){o=nR((t=v,s=y,a=_,r=(t%=nh)?s||a?nR(nz(t),nB(s,a)):nz(t):s||a?nB(s,a):nA),e);var t,s,a,u=e(p,g);return n=f-u[0]*c,i=d+u[1]*c,N()}function N(){return l=h=null,I}return I.stream=function(t){return l&&h===t?l:l=n9(x(r,w(E(h=t))))},I.clipAngle=function(t){return arguments.length?(x=+t?function(t,e){var n=nv(t),i=n>0,r=nd(n)>1e-6;function o(t,e){return nv(t)*nv(e)>n}function s(t,e,i){var r=[1,0,0],o=nN(nS(t),nS(e)),s=nM(o,o),a=o[0],u=s-a*a;if(!u)return!i&&t;var l=nN(r,o),h=nC(r,n*s/u);nT(h,nC(o,-n*a/u));var c=nM(h,l),f=nM(l,l),d=c*c-f*(nM(h,h)-1);if(!(d<0)){var p=n_(d),g=nC(l,(-c-p)/f);if(nT(g,h),g=nP(g),!i)return g;var v,y=t[0],_=e[0],m=t[1],x=e[1];_<y&&(v=y,y=_,_=v);var b=_-y,E=1e-6>nd(b-na);if(!E&&x<m&&(v=m,m=x,x=v),E||b<1e-6?E?m+x>0^g[1]<(1e-6>nd(g[0]-y)?m:x):m<=g[1]&&g[1]<=x:b>na^(y<=g[0]&&g[0]<=_)){var k=nC(l,(-c+p)/f);return nT(k,h),[g,nP(k)]}}}function a(e,n){var r=i?t:na-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return n0(o,function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var d,p,g=[c,f],v=o(c,f),y=i?v?0:a(c,f):v?a(c+(c<0?na:-na),f):0;(!e&&(l=u=v)&&t.lineStart(),v!==u&&(!(p=s(e,g))||nV(e,p)||nV(g,p))&&(g[0]+=1e-6,g[1]+=1e-6,v=o(g[0],g[1])),v!==u)?(h=0,v?(t.lineStart(),p=s(g,e),t.point(p[0],p[1])):(p=s(e,g),t.point(p[0],p[1]),t.lineEnd()),e=p):r&&e&&i^v&&!(y&n)&&(d=s(g,e,!0))&&(h=0,i?(t.lineStart(),t.point(d[0][0],d[0][1]),t.point(d[1][0],d[1][1]),t.lineEnd()):(t.point(d[1][0],d[1][1]),t.lineEnd(),t.lineStart(),t.point(d[0][0],d[0][1]))),!v||e&&nV(e,g)||t.point(g[0],g[1]),e=g,u=v,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}},function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var s=nv(e),a=ny(e),u=i*n;null==r?(r=e+i*nh,o=e-u/2):(r=nF(s,r),o=nF(s,o),(i>0?r<o:r>o)&&(r+=i*nh));for(var l,h=r;i>0?h>o:h<o;h-=u)l=nP([s,-a*nv(h),-a*ny(h)]),t.point(l[0],l[1])}}(o,t,e,r,n,i)},i?[0,-t]:[-na,t-na])}(m=t*nf,6*nf):(m=null,n3),N()):m*nc},I.clipExtent=function(t){return arguments.length?(E=null==t?(b=s=a=u=null,nH):function(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var h=0,c=0;if(null==r||(h=s(r,a))!==(c=s(o,a))||0>u(r,o)^a>0)do l.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+a+4)%4)!==c)else l.point(o[0],o[1])}function s(i,r){return 1e-6>nd(i[0]-t)?r>0?0:3:1e-6>nd(i[0]-n)?r>0?2:1:1e-6>nd(i[1]-e)?+(r>0):r>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,f,d,p,g,v,y,_,m=s,x=nq(),b={point:E,lineStart:function(){b.point=k,l&&l.push(h=[]),y=!0,v=!1,p=g=NaN},lineEnd:function(){u&&(k(c,f),d&&v&&x.rejoin(),u.push(x.result())),b.point=E,v&&m.lineEnd()},polygonStart:function(){m=x,u=[],l=[],_=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],f=c[0],d=c[1];u<h;++u)o=f,s=d,f=(c=a[u])[0],d=c[1],s<=i?d>i&&(f-o)*(i-s)>(d-s)*(t-o)&&++e:d<=i&&(f-o)*(i-s)<(d-s)*(t-o)&&--e;return e}(),n=_&&e,r=(u=nU(u)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&nZ(u,a,e,o,s),s.polygonEnd()),m=s,u=l=h=null}};function E(t,e){r(t,e)&&m.point(t,e)}function k(o,s){var a=r(o,s);if(l&&h.push([o,s]),y)c=o,f=s,d=a,y=!1,a&&(m.lineStart(),m.point(o,s));else if(a&&v)m.point(o,s);else{var u=[p=Math.max(-1e9,Math.min(1e9,p)),g=Math.max(-1e9,Math.min(1e9,g))],x=[o=Math.max(-1e9,Math.min(1e9,o)),s=Math.max(-1e9,Math.min(1e9,s))];(function(t,e,n,i,r,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=i-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}})(u,x,t,e,n,i)?(v||(m.lineStart(),m.point(u[0],u[1])),m.point(x[0],x[1]),a||m.lineEnd(),_=!1):a&&(m.lineStart(),m.point(o,s),_=!1)}p=o,g=s,v=a}return b}}(b=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),N()):null==b?null:[[b,s],[a,u]]},I.scale=function(t){return arguments.length?(c=+t,M()):c},I.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],M()):[f,d]},I.center=function(t){return arguments.length?(p=t[0]%360*nf,g=t[1]%360*nf,M()):[p*nc,g*nc]},I.rotate=function(t){return arguments.length?(v=t[0]%360*nf,y=t[1]%360*nf,_=t.length>2?t[2]%360*nf:0,M()):[v*nc,y*nc,_*nc]},I.precision=function(t){return arguments.length?(w=n7(S,k=t*t),N()):n_(k)},I.fitExtent=function(t,e){return n6(I,t,e)},I.fitSize=function(t,e){return n6(I,[[0,0],t],e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&P,M()}})(function(){return ii})().scale(79.4188).clipAngle(179.999).rotate(o).scale(6371008.8)),h={type:a.type,coordinates:function t(e,n){return"object"!==_(e[0])?n(e):e.map(function(e){return t(e,n)})}(a.coordinates,l)},c=(new is).read(h),f=z(B(e,n),"meters"),d=io.bufferOp(c,f,i);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((d=(new ia).write(d)).coordinates))return E({type:d.type,coordinates:function t(e,n){return"object"!==_(e[0])?n.invert(e):e.map(function(e){return t(e,n)})}(d.coordinates,l)},s)}function il(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,r=0;return t_(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!U(a=null==a?1:a))throw Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&tc(t,function(t){n+=t[0]*a,i+=t[1]*a,r+=a})}),w([n/r,i/r],e.properties,e)}function ih(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,i=0,r=0;return tc(t,function(t){n+=t[0],i+=t[1],r++},!0),w([n/r,i/r],e.properties)}var ic={exports:{}},id=eJ(eT);function ip(t,e){return t<e?-1:+(t>e)}var ig,iv,iy,i_,im,ix,ib,iE,ik,iw=eJ(Object.freeze({__proto__:null,default:s(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ip;if(r(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)},[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&0>n(e[a],s)&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}}])})),iI={exports:{}},iL={exports:{}};iL.exports;var iP=eK(function(){if(ik)return ic.exports;ik=1;var t=iw,e=function(){if(ib)return iI.exports;ib=1;var t=(i_||(i_=1,iy=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=(i-n)/2,u=0,l=a-1;u<a;l=u++){var h=e[n+2*u+0],c=e[n+2*u+1],f=e[n+2*l+0],d=e[n+2*l+1];c>o!=d>o&&r<(f-h)*(o-c)/(d-c)+h&&(s=!s)}return s}),iy),e=(ix||(ix=1,im=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=i-n,u=0,l=a-1;u<a;l=u++){var h=e[u+n][0],c=e[u+n][1],f=e[l+n][0],d=e[l+n][1];c>o!=d>o&&r<(f-h)*(o-c)/(d-c)+h&&(s=!s)}return s}),im);return iI.exports=function(n,i,r,o){return i.length>0&&Array.isArray(i[0])?e(n,i,r,o):t(n,i,r,o)},iI.exports.nested=e,iI.exports.flat=t,iI.exports}(),n=(iE||(iE=1,function(t){function e(t,e,n,i,r){var o,s,a,u,l=e[0],h=i[0],c=0,f=0;h>l==h>-l?(o=l,l=e[++c]):(o=h,h=i[++f]);var d=0;if(c<t&&f<n)for(h>l==h>-l?(a=o-((s=l+o)-l),l=e[++c]):(a=o-((s=h+o)-h),h=i[++f]),o=s,0!==a&&(r[d++]=a);c<t&&f<n;)h>l==h>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c]):(a=o-((s=o+h)-(u=s-o))+(h-u),h=i[++f]),o=s,0!==a&&(r[d++]=a);for(;c<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c],o=s,0!==a&&(r[d++]=a);for(;f<n;)a=o-((s=o+h)-(u=s-o))+(h-u),h=i[++f],o=s,0!==a&&(r[d++]=a);return 0===o&&0!==d||(r[d++]=o),d}function n(t){return new Float64Array(t)}var i=n(4),r=n(8),o=n(12),s=n(16),a=n(4);t.orient2d=function(t,n,u,l,h,c){var f=(n-c)*(u-h),d=(t-h)*(l-c),p=f-d;if(0===f||0===d||f>0!=d>0)return p;var g=Math.abs(f+d);return Math.abs(p)>=33306690738754716e-32*g?p:-function(t,n,u,l,h,c,f){var d,p,g,v,y,_,m,x,b,E,k,w,I,P,S,M,N,T,C=t-h,O=u-h,R=n-c,A=l-c;y=(S=(x=C-(m=(_=0x8000001*C)-(_-C)))*(E=A-(b=(_=0x8000001*A)-(_-A)))-((P=C*A)-m*b-x*b-m*E))-(k=S-(N=(x=R-(m=(_=0x8000001*R)-(_-R)))*(E=O-(b=(_=0x8000001*O)-(_-O)))-((M=R*O)-m*b-x*b-m*E))),i[0]=S-(k+y)+(y-N),y=(I=P-((w=P+k)-(y=w-P))+(k-y))-(k=I-M),i[1]=I-(k+y)+(y-M),y=(T=w+k)-w,i[2]=w-(T-y)+(k-y),i[3]=T;var D=function(t,e){for(var n=e[0],i=1;i<4;i++)n+=e[i];return n}(0,i),z=22204460492503146e-32*f;if(D>=z||-D>=z||(d=t-(C+(y=t-C))+(y-h),g=u-(O+(y=u-O))+(y-h),p=n-(R+(y=n-R))+(y-c),v=l-(A+(y=l-A))+(y-c),0===d&&0===p&&0===g&&0===v)||(z=11093356479670487e-47*f+33306690738754706e-32*Math.abs(D),(D+=C*v+A*d-(R*g+O*p))>=z||-D>=z))return D;y=(S=(x=d-(m=(_=0x8000001*d)-(_-d)))*(E=A-(b=(_=0x8000001*A)-(_-A)))-((P=d*A)-m*b-x*b-m*E))-(k=S-(N=(x=p-(m=(_=0x8000001*p)-(_-p)))*(E=O-(b=(_=0x8000001*O)-(_-O)))-((M=p*O)-m*b-x*b-m*E))),a[0]=S-(k+y)+(y-N),y=(I=P-((w=P+k)-(y=w-P))+(k-y))-(k=I-M),a[1]=I-(k+y)+(y-M),y=(T=w+k)-w,a[2]=w-(T-y)+(k-y),a[3]=T;var B=e(4,i,4,a,r);y=(S=(x=C-(m=(_=0x8000001*C)-(_-C)))*(E=v-(b=(_=0x8000001*v)-(_-v)))-((P=C*v)-m*b-x*b-m*E))-(k=S-(N=(x=R-(m=(_=0x8000001*R)-(_-R)))*(E=g-(b=(_=0x8000001*g)-(_-g)))-((M=R*g)-m*b-x*b-m*E))),a[0]=S-(k+y)+(y-N),y=(I=P-((w=P+k)-(y=w-P))+(k-y))-(k=I-M),a[1]=I-(k+y)+(y-M),y=(T=w+k)-w,a[2]=w-(T-y)+(k-y),a[3]=T;var F=e(B,r,4,a,o);y=(S=(x=d-(m=(_=0x8000001*d)-(_-d)))*(E=v-(b=(_=0x8000001*v)-(_-v)))-((P=d*v)-m*b-x*b-m*E))-(k=S-(N=(x=p-(m=(_=0x8000001*p)-(_-p)))*(E=g-(b=(_=0x8000001*g)-(_-g)))-((M=p*g)-m*b-x*b-m*E))),a[0]=S-(k+y)+(y-N),y=(I=P-((w=P+k)-(y=w-P))+(k-y))-(k=I-M),a[1]=I-(k+y)+(y-M),y=(T=w+k)-w,a[2]=w-(T-y)+(k-y),a[3]=T;var q=e(F,o,4,a,s);return s[q-1]}(t,n,u,l,h,c,g)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(iL.exports)),iL.exports).orient2d;function i(n,i,p){i=Math.max(0,void 0===i?2:i),p=p||0;var g=function(t){for(var n=t[0],i=t[0],r=t[0],o=t[0],s=0;s<t.length;s++){var u=t[s];u[0]<n[0]&&(n=u),u[0]>r[0]&&(r=u),u[1]<i[1]&&(i=u),u[1]>o[1]&&(o=u)}var l=[n,i,r,o],h=l.slice();for(s=0;s<t.length;s++)e(t[s],l)||h.push(t[s]);return function(t){t.sort(d);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&0>=a(e[e.length-2],e[e.length-1],t[n]);)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&0>=a(i[i.length-2],i[i.length-1],t[r]);)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(h)}(n),v=new id(16);v.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},v.compareMinX=function(t,e){return t[0]-e[0]},v.compareMinY=function(t,e){return t[1]-e[1]},v.load(n);for(var y,_=[],m=0;m<g.length;m++){var x=g[m];v.remove(x),y=l(x,y),_.push(y)}var b=new id(16);for(m=0;m<_.length;m++)b.insert(u(_[m]));for(var E=i*i,k=p*p;_.length;){var w=_.shift(),I=w.p,P=w.next.p,S=h(I,P);if(!(S<k)){var M=S/E;(x=function(e,n,i,a,u,l,h){for(var d=new t([],r),p=e.data;p;){for(var g=0;g<p.children.length;g++){var v=p.children[g],y=p.leaf?c(v,i,a):function(t,e,n){if(o(t,n)||o(e,n))return 0;var i=f(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=f(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var s=f(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===s)return 0;var a=f(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,s,a)}(i,a,v);y>l||d.push({node:v,dist:y})}for(;d.length&&!d.peek().node.children;){var _=d.pop(),m=_.node,x=c(m,n,i),b=c(m,a,u);if(_.dist<x&&_.dist<b&&s(i,m,h)&&s(a,m,h))return m}(p=d.pop())&&(p=p.node)}return null}(v,w.prev.p,I,P,w.next.next.p,M,b))&&Math.min(h(x,I),h(x,P))<=M&&(_.push(w),_.push(l(x,w)),v.remove(x),b.remove(w),b.insert(u(w)),b.insert(u(w.next)))}}w=y;var N=[];do N.push(w.p),w=w.next;while(w!==y)return N.push(w.p),N}function r(t,e){return t.dist-e.dist}function o(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function s(t,e,n){for(var i,r,o=Math.min(t[0],e[0]),s=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),h=n.search({minX:o,minY:s,maxX:u,maxY:l}),c=0;c<h.length;c++)if(i=h[c].p,r=h[c].next.p,i!==e&&r!==t&&a(i,r,t)>0!=a(i,r,e)>0&&a(t,e,i)>0!=a(t,e,r)>0)return!1;return!0}function a(t,e,i){return n(t[0],t[1],e[0],e[1],i[0],i[1])}function u(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function l(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function h(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function c(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function f(t,e,n,i,r,o,s,a){var u,l,h,c,f=n-t,d=i-e,p=s-r,g=a-o,v=t-r,y=e-o,_=f*f+d*d,m=f*p+d*g,x=p*p+g*g,b=f*v+d*y,E=p*v+g*y,k=_*x-m*m,w=k,I=k;0===k?(l=0,w=1,c=E,I=x):(c=_*E-m*b,(l=m*E-x*b)<0?(l=0,c=E,I=x):l>w&&(l=w,c=E+m,I=x)),c<0?(c=0,0>-b?l=0:-b>_?l=w:(l=-b,w=_)):c>I&&(c=I,-b+m<0?l=0:-b+m>_?l=w:(l=-b+m,w=_));var P=(1-(h=0===c?0:c/I))*r+h*s-((1-(u=0===l?0:l/w))*t+u*n),S=(1-h)*o+h*a-((1-u)*e+u*i);return P*P+S*S}function d(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}return t.default&&(t=t.default),ic.exports=i,ic.exports.default=i,ic.exports}());function iS(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(tc(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var i=iP(n,e.concavity);return i.length>3?P([i]):null}function iM(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(ta(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),P([o],r)}function iN(t){if(!t)throw Error("geojson is required");switch(t.type){case"Feature":return iT(t);case"FeatureCollection":var e;return e={type:"FeatureCollection"},Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return iT(t)}),e;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return iO(t);default:throw Error("unknown GeoJSON type")}}function iT(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=iC(t.properties),null==t.geometry?e.geometry=null:e.geometry=iO(t.geometry),e}function iC(t){var e={};return t&&Object.keys(t).forEach(function(n){var i=t[n];"object"===_(i)?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map(function(t){return t}):e[n]=iC(i):e[n]=i}),e}function iO(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return iO(t)}):e.coordinates=function t(e){return"object"!==_(e[0])?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e}function iR(t,e){if(!t)throw Error("geojson is required");if("FeatureCollection"!==t.type)throw Error("geojson must be a FeatureCollection");if(null==e)throw Error("filter is required");var n=[];return tg(t,function(t){iB(t.properties,e)&&n.push(t)}),T(n)}function iA(t,e,n){if(!t)throw Error("geojson is required");if("FeatureCollection"!==t.type)throw Error("geojson must be a FeatureCollection");if(null==e)throw Error("property is required");for(var i=iz(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var s=r[o],a=i[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(T(u),s,o)}}function iD(t,e,n,i){var r=i;return iA(t,e,function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)}),r}function iz(t,e){var n={};return tg(t,function(t,i){var r=t.properties||{};if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(i):n[o]=[i]}}),n}function iB(t,e){if(void 0===t)return!1;var n=_(e);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!iB(t,e[i]))return!1;return!0}return iF(t,e)}function iF(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function iq(t,e){if(!e||!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}var iV,iG,iZ,ij,iY,iU,iX=Object.freeze({__proto__:null,applyFilter:iB,clusterEach:iA,clusterReduce:iD,createBins:iz,filterProperties:iq,getCluster:iR,propertiesContainsFilter:iF});function iH(){return iG||(iG=1,iV={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e);return n?i:i*i}}),iV}var iW=eK(function(){if(iU)return iY;iU=1;var t=iH(),e=function(){if(ij)return iZ;ij=1;var t=iH(),e=t.eudist,n=t.dist;return iZ={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,i.push(a))}if(i.length<e)throw Error("Error initializating clusters");return i},kmpp:function(t,i){var r=t[0].length?e:n,o=[],s=t.length,a=t[0].length>0,u=t[Math.floor(Math.random()*s)];for(a&&u.join("_"),o.push(u);o.length<i;){for(var l=[],h=o.length,c=0,f=[],d=0;d<s;d++){for(var p=1/0,g=0;g<h;g++){var v=r(t[d],o[g]);v<=p&&(p=v)}l[d]=p}for(var y=0;y<s;y++)c+=l[y];for(var _=0;_<s;_++)f[_]={i:_,v:t[_],pr:l[_]/c,cs:0};f.sort(function(t,e){return t.pr-e.pr}),f[0].cs=f[0].pr;for(var m=1;m<s;m++)f[m].cs=f[m-1].cs+f[m].pr;for(var x=Math.random(),b=0;b<s-1&&f[b++].cs<x;);o.push(f[b-1].v)}return o}}}(),n=t.eudist;t.mandist,t.dist;var i=e.kmrand,r=e.kmpp;function o(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}return iY=function(t,e,s,a){var u=[],l=[],h=[],c=[],f=!1,d=a||1e4,p=t.length,g=t[0].length,v=g>0,y=[];if(s)u="kmrand"==s?i(t,e):"kmpp"==s?r(t,e):s;else for(var _={};u.length<e;){var m=Math.floor(Math.random()*p);_[m]||(_[m]=!0,u.push(t[m]))}do{o(e,0,y);for(var x=0;x<p;x++){for(var b=1/0,E=0,k=0;k<e;k++)(c=v?n(t[x],u[k]):Math.abs(t[x]-u[k]))<=b&&(b=c,E=k);h[x]=E,y[E]++}for(var w=[],I=(l=[],0);I<e;I++)w[I]=v?o(g,0,w[I]):0,l[I]=u[I];if(v){for(var P=0;P<e;P++)u[P]=[];for(var S=0;S<p;S++)for(var M=w[h[S]],N=t[S],T=0;T<g;T++)M[T]+=N[T];f=!0;for(var C=0;C<e;C++){for(var O=u[C],R=w[C],A=l[C],D=y[C],z=0;z<g;z++)O[z]=R[z]/D||0;if(f){for(var B=0;B<g;B++)if(A[B]!=O[B]){f=!1;break}}}}else{for(var F=0;F<p;F++)w[h[F]]+=t[F];for(var q=0;q<e;q++)u[q]=w[q]/y[q]||0;f=!0;for(var V=0;V<e;V++)if(l[V]!=u[V]){f=!1;break}}f=f||--d<=0}while(!f)return{it:1e4-d,k:e,idxs:h,centroids:u}}}());function iK(t,e){var n=!1;return T((function(t){if(t.length<3)return[];t.sort(iQ);for(var e,n,i,r,o,s=t.length-1,a=t[s].x,u=t[0].x,l=t[s].y,h=l;s--;)t[s].y<l&&(l=t[s].y),t[s].y>h&&(h=t[s].y);var c,f=u-a,d=h-l,p=f>d?f:d,g=.5*(u+a),v=.5*(h+l),y=[new iJ({__sentinel:!0,x:g-20*p,y:v-p},{__sentinel:!0,x:g,y:v+20*p},{__sentinel:!0,x:g+20*p,y:v-p})],_=[],m=[];for(s=t.length;s--;){for(m.length=0,c=y.length;c--;)(f=t[s].x-y[c].x)>0&&f*f>y[c].r?(_.push(y[c]),y.splice(c,1)):f*f+(d=t[s].y-y[c].y)*d>y[c].r||(m.push(y[c].a,y[c].b,y[c].b,y[c].c,y[c].c,y[c].a),y.splice(c,1));for(function(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}(m),c=m.length;c;)n=m[--c],e=m[--c],i=t[s],r=n.x-e.x,o=n.y-e.y,Math.abs(2*(r*(i.y-n.y)-o*(i.x-n.x)))>1e-12&&y.push(new iJ(e,n,i))}for(Array.prototype.push.apply(_,y),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _})(t.features.map(function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i})).map(function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},P([[e,i,r,e]],o)}))}var iJ=s(function t(e,n,i){r(this,t),this.a=e,this.b=n,this.c=i;var o,s,a=n.x-e.x,u=n.y-e.y,l=i.x-e.x,h=i.y-e.y,c=a*(e.x+n.x)+u*(e.y+n.y),f=l*(e.x+i.x)+h*(e.y+i.y),d=2*(a*(i.y-n.y)-u*(i.x-n.x));this.x=(h*c-u*f)/d,this.y=(a*f-l*c)/d,o=this.x-e.x,s=this.y-e.y,this.r=o*o+s*s});function iQ(t,e){return e.x-t.x}function i$(t){return t}function i0(t,e){var n=function(t){if(null==t)return i$;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,h=Array(l);for(h[0]=(e+=t[0])*i+o,h[1]=(n+=t[1])*r+s;u<l;)h[u]=t[u],++u;return h}}(t.transform),i=t.arcs;function r(t){return n(t)}function o(t){for(var e=[],r=0,o=t.length;r<o;++r)!function(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}(t[r],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(s)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=a(e.arcs);break;case"MultiPolygon":n=e.arcs.map(a);break;default:return null}return{type:i,coordinates:n}}(e)}function i1(t,e){var n={},i=[],r=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(i0(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),i.forEach(function(t){if(!t._){var e=[],i=[t];for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,i.push(t))})})})}}),i.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(e){var i,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&r.push(t)})})}),(i=(r=function(t,e){var n={},i={},r={},o=[],s=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){n[t<0?~t:t]=1}),o.push(r)}}return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];!(o.length<3)||o[1][0]||o[1][1]||(r=e[++s],e[s]=n,e[i]=r)}),e.forEach(function(e){var n,o,s,a,u,l=(s=(o=t.arcs[e<0?~e:e])[0],t.transform?(n=[0,0],o.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=o[o.length-1],e<0?[n,s]:[s,n]),h=l[0],c=l[1];if(a=r[h]){if(delete r[a.end],a.push(e),a.end=c,u=i[c]){delete i[u.start];var f=u===a?a:a.concat(u);i[f.start=a.start]=r[f.end=u.end]=f}else i[a.start]=r[a.end]=a}else if(a=i[c]){if(delete i[a.start],a.unshift(e),a.start=h,u=r[h]){delete r[u.end];var d=u===a?a:u.concat(a);i[d.start=u.start]=r[d.end=a.end]=d}else i[a.start]=r[a.end]=a}else i[(a=[e]).start=h]=r[a.end=c]=a}),a(r,i),a(i,r),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,r)).length)>1)for(var o,a,u=1,l=s(r[0]);u<i;++u)(o=s(r[u]))>l&&(a=r[0],r[0]=r[u],r[u]=a,l=o);return r}).filter(function(t){return t.length>0})}}var i2=Object.prototype.hasOwnProperty;function i3(t,e,n,i,r,o){3==arguments.length&&(i=o=Array,r=null);for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=r;return{set:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l]=o;if(++c>=t)throw Error("full hashmap");h=s[l=l+1&u]}return s[l]=i,a[l]=o,o},maybeSet:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l];if(++c>=t)throw Error("full hashmap");h=s[l=l+1&u]}return s[l]=i,a[l]=o,o},get:function(i,o){for(var l=e(i)&u,h=s[l],c=0;h!=r;){if(n(h,i))return a[l];if(++c>=t)break;h=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e];i!=r&&t.push(i)}return t}}}function i4(t,e){return t[0]===e[0]&&t[1]===e[1]}var i8=new ArrayBuffer(16),i6=new Float64Array(i8),i5=new Uint32Array(i8);function i7(t){i6[0]=t[0],i6[1]=t[1];var e=i5[0]^i5[1];return 0x7fffffff&(e=e<<5^e>>7^i5[2]^i5[3])}function i9(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function rt(t){var e,n=re(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function re(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(re)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function rn(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function ri(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1];return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}function rr(t){return t[0].toString()+","+t[1].toString()}var ro=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,rs=Math.ceil,ra=Math.floor,ru="[BigNumber Error] ",rl=ru+"Number primitive has more than 15 significant digits: ",rh=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function rc(t){var e=0|t;return t>0||t===e?e:e-1}function rf(t){for(var e,n,i=1,r=t.length,o=t[0]+"";i<r;){for(n=14-(e=t[i++]+"").length;n--;e="0"+e);o+=e}for(r=o.length;48===o.charCodeAt(--r););return o.slice(0,r+1||1)}function rd(t,e){var n,i,r=t.c,o=e.c,s=t.s,a=e.s,u=t.e,l=e.e;if(!s||!a)return null;if(n=r&&!r[0],i=o&&!o[0],n||i)return n?i?0:-a:s;if(s!=a)return s;if(n=s<0,i=u==l,!r||!o)return i?0:!r^n?1:-1;if(!i)return u>l^n?1:-1;for(a=(u=r.length)<(l=o.length)?u:l,s=0;s<a;s++)if(r[s]!=o[s])return r[s]>o[s]^n?1:-1;return u==l?0:u>l^n?1:-1}function rp(t,e,n,i){if(t<e||t>n||t!==ra(t))throw Error(ru+(i||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function rg(t){var e=t.c.length-1;return rc(t.e/14)==e&&t.c[e]%2!=0}function rv(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ry(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(i=t.length)){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var r_=function t(e){var n,i,r,o,s,a,u,l,h,c=P.prototype={constructor:P,toString:null,valueOf:null},f=new P(1),d=20,p=4,g=-7,v=21,y=-1e7,m=1e7,x=!1,b=1,E=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},w="0123456789abcdefghijklmnopqrstuvwxyz",I=!0;function P(t,e){var n,o,s,a,u,l,h,c,f=this;if(!(f instanceof P))return new P(t,e);if(null==e){if(t&&!0===t._isBigNumber)return f.s=t.s,void(!t.c||t.e>m?f.c=f.e=null:t.e<y?f.c=[f.e=0]:(f.e=t.e,f.c=t.c.slice()));if((l="number"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,u=t;u>=10;u/=10,a++);return void(a>m?f.c=f.e=null:(f.e=a,f.c=[t]))}c=String(t)}else{if(!ro.test(c=String(t)))return r(f,c,l);f.s=45==c.charCodeAt(0)?(c=c.slice(1),-1):1}(a=c.indexOf("."))>-1&&(c=c.replace(".","")),(u=c.search(/e/i))>0?(a<0&&(a=u),a+=+c.slice(u+1),c=c.substring(0,u)):a<0&&(a=c.length)}else{if(rp(e,2,w.length,"Base"),10==e&&I)return T(f=new P(t),d+f.e+1,p);if(c=String(t),l="number"==typeof t){if(0*t!=0)return r(f,c,l,e);if(f.s=1/t<0?(c=c.slice(1),-1):1,P.DEBUG&&c.replace(/^0\.0*|\./,"").length>15)throw Error(rl+t)}else f.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1;for(n=w.slice(0,e),a=u=0,h=c.length;u<h;u++)if(0>n.indexOf(o=c.charAt(u))){if("."==o){if(u>a){a=h;continue}}else if(!s&&(c==c.toUpperCase()&&(c=c.toLowerCase())||c==c.toLowerCase()&&(c=c.toUpperCase()))){s=!0,u=-1,a=0;continue}return r(f,String(t),l,e)}l=!1,(a=(c=i(c,e,10,f.s)).indexOf("."))>-1?c=c.replace(".",""):a=c.length}for(u=0;48===c.charCodeAt(u);u++);for(h=c.length;48===c.charCodeAt(--h););if(c=c.slice(u,++h)){if(h-=u,l&&P.DEBUG&&h>15&&(t>0x1fffffffffffff||t!==ra(t)))throw Error(rl+f.s*t);if((a=a-u-1)>m)f.c=f.e=null;else if(a<y)f.c=[f.e=0];else{if(f.e=a,f.c=[],u=(a+1)%14,a<0&&(u+=14),u<h){for(u&&f.c.push(+c.slice(0,u)),h-=14;u<h;)f.c.push(+c.slice(u,u+=14));u=14-(c=c.slice(u)).length}else u-=h;for(;u--;c+="0");f.c.push(+c)}}else f.c=[f.e=0]}function S(t,e,n,i){var r,o,s,a,u;if(null==n?n=p:rp(n,0,8),!t.c)return t.toString();if(r=t.c[0],s=t.e,null==e)u=rf(t.c),u=1==i||2==i&&(s<=g||s>=v)?rv(u,s):ry(u,s,"0");else if(o=(t=T(new P(t),e,n)).e,a=(u=rf(t.c)).length,1==i||2==i&&(e<=o||o<=g)){for(;a<e;u+="0",a++);u=rv(u,o)}else if(e-=s,u=ry(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-a)>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&r?"-"+u:u}function M(t,e){for(var n,i,r=1,o=new P(t[0]);r<t.length;r++)(i=new P(t[r])).s&&(n=rd(o,i))!==e&&(0!==n||o.s!==e)||(o=i);return o}function N(t,e,n){for(var i=1,r=e.length;!e[--r];e.pop());for(r=e[0];r>=10;r/=10,i++);return(n=i+14*n-1)>m?t.c=t.e=null:n<y?t.c=[t.e=0]:(t.e=n,t.c=e),t}function T(t,e,n,i){var r,o,s,a,u,l,h,c=t.c;if(c){t:{for(r=1,a=c[0];a>=10;a/=10,r++);if((o=e-r)<0)o+=14,s=e,h=ra((u=c[l=0])/rh[r-s-1]%10);else if((l=rs((o+1)/14))>=c.length){if(!i)break t;for(;c.length<=l;c.push(0));u=h=0,r=1,s=(o%=14)-14+1}else{for(u=a=c[l],r=1;a>=10;a/=10,r++);h=(s=(o%=14)-14+r)<0?0:ra(u/rh[r-s-1]%10)}if(i=i||e<0||null!=c[l+1]||(s<0?u:u%rh[r-s-1]),i=n<4?(h||i)&&(0==n||n==(t.s<0?3:2)):h>5||5==h&&(4==n||i||6==n&&(o>0?s>0?u/rh[r-s]:0:c[l-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,i?(e-=t.e+1,c[0]=rh[(14-e%14)%14],t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=l,a=1,l--):(c.length=l+1,a=rh[14-o],c[l]=s>0?ra(u/rh[r-s]%rh[s])*a:0),i)for(;;){if(0==l){for(o=1,s=c[0];s>=10;s/=10,o++);for(s=c[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,1e14==c[0]&&(c[0]=1));break}if(c[l]+=a,1e14!=c[l])break;c[l--]=0,a=1}for(o=c.length;0===c[--o];c.pop());}t.e>m?t.c=t.e=null:t.e<y&&(t.c=[t.e=0])}return t}function C(t){var e,n=t.e;return null===n?t.toString():(e=rf(t.c),e=n<=g||n>=v?rv(e,n):ry(e,n,"0"),t.s<0?"-"+e:e)}return P.clone=t,P.ROUND_UP=0,P.ROUND_DOWN=1,P.ROUND_CEIL=2,P.ROUND_FLOOR=3,P.ROUND_HALF_UP=4,P.ROUND_HALF_DOWN=5,P.ROUND_HALF_EVEN=6,P.ROUND_HALF_CEIL=7,P.ROUND_HALF_FLOOR=8,P.EUCLID=9,P.config=P.set=function(t){var e,n;if(null!=t){if("object"!=_(t))throw Error(ru+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(rp(n=t[e],0,1e9,e),d=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(rp(n=t[e],0,8,e),p=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(rp(n[0],-1e9,0,e),rp(n[1],0,1e9,e),g=n[0],v=n[1]):(rp(n,-1e9,1e9,e),g=-(v=n<0?-n:n))),t.hasOwnProperty(e="RANGE")){if((n=t[e])&&n.pop)rp(n[0],-1e9,-1,e),rp(n[1],1,1e9,e),y=n[0],m=n[1];else{if(rp(n,-1e9,1e9,e),!n)throw Error(ru+e+" cannot be zero: "+n);y=-(m=n<0?-n:n)}}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(ru+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw x=!n,Error(ru+"crypto unavailable");x=n}else x=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(rp(n=t[e],0,9,e),b=n),t.hasOwnProperty(e="POW_PRECISION")&&(rp(n=t[e],0,1e9,e),E=n),t.hasOwnProperty(e="FORMAT")){if("object"!=_(n=t[e]))throw Error(ru+e+" not an object: "+n);k=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(ru+e+" invalid: "+n);I="0123456789"==n.slice(0,10),w=n}}return{DECIMAL_PLACES:d,ROUNDING_MODE:p,EXPONENTIAL_AT:[g,v],RANGE:[y,m],CRYPTO:x,MODULO_MODE:b,POW_PRECISION:E,FORMAT:k,ALPHABET:w}},P.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!P.DEBUG)return!0;var e,n,i=t.c,r=t.e,o=t.s;t:if("[object Array]"==({}).toString.call(i)){if((1===o||-1===o)&&r>=-1e9&&r<=1e9&&r===ra(r)){if(0===i[0]){if(0===r&&1===i.length)return!0;break t}if((e=(r+1)%14)<1&&(e+=14),String(i[0]).length==e){for(e=0;e<i.length;e++)if((n=i[e])<0||n>=1e14||n!==ra(n))break t;if(0!==n)return!0}}}else if(null===i&&null===r&&(null===o||1===o||-1===o))return!0;throw Error(ru+"Invalid BigNumber: "+t)},P.maximum=P.max=function(){return M(arguments,-1)},P.minimum=P.min=function(){return M(arguments,1)},o=0x20000000000000*Math.random()&2097151?function(){return ra(0x20000000000000*Math.random())}:function(){return 8388608*(0x40000000*Math.random()|0)+(8388608*Math.random()|0)},P.random=function(t){var e,n,i,r,s,a=0,u=[],l=new P(f);if(null==t?t=d:rp(t,0,1e9),r=rs(t/14),x){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(r*=2));a<r;)(s=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(u.push(s%1e14),a+=2);a=r/2}else{if(!crypto.randomBytes)throw x=!1,Error(ru+"crypto unavailable");for(e=crypto.randomBytes(r*=7);a<r;)(s=0x1000000000000*(31&e[a])+0x10000000000*e[a+1]+0x100000000*e[a+2]+0x1000000*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(u.push(s%1e14),a+=7);a=r/7}}if(!x)for(;a<r;)(s=o())<9e15&&(u[a++]=s%1e14);for(r=u[--a],t%=14,r&&t&&(s=rh[14-t],u[a]=ra(r/s)*s);0===u[a];u.pop(),a--);if(a<0)u=[i=0];else{for(i=-1;0===u[0];u.splice(0,1),i-=14);for(a=1,s=u[0];s>=10;s/=10,a++);a<14&&(i-=14-a)}return l.e=i,l.c=u,l},P.sum=function(){for(var t=1,e=arguments,n=new P(e[0]);t<e.length;)n=n.plus(e[t++]);return n},i=function(){var t="0123456789";function e(t,e,n,i){for(var r,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=i.indexOf(t.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(null==s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}return function(i,r,o,s,a){var u,l,h,c,f,g,v,y,_=i.indexOf("."),m=d,x=p;for(_>=0&&(c=E,E=0,i=i.replace(".",""),g=(y=new P(r)).pow(i.length-_),E=c,y.c=e(ry(rf(g.c),g.e,"0"),10,o,t),y.e=y.c.length),h=c=(v=e(i,r,o,a?(u=w,t):(u=t,w))).length;0==v[--c];v.pop());if(!v[0])return u.charAt(0);if(_<0?--h:(g.c=v,g.e=h,g.s=s,v=(g=n(g,y,m,x,o)).c,f=g.r,h=g.e),_=v[l=h+m+1],c=o/2,f=f||l<0||null!=v[l+1],f=x<4?(null!=_||f)&&(0==x||x==(g.s<0?3:2)):_>c||_==c&&(4==x||f||6==x&&1&v[l-1]||x==(g.s<0?8:7)),l<1||!v[0])i=f?ry(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(v.length=l,f)for(--o;++v[--l]>o;)v[l]=0,l||(++h,v=[1].concat(v));for(c=v.length;!v[--c];);for(_=0,i="";_<=c;i+=u.charAt(v[_++]));i=ry(i,h,u.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,r,o,s,a=0,u=t.length,l=e%1e7,h=e/1e7|0;for(t=t.slice();u--;)a=((r=l*(o=t[u]%1e7)+(i=h*o+(s=t[u]/1e7|0)*l)%1e7*1e7+a)/n|0)+(i/1e7|0)+h*s,t[u]=r%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,i){var r,o;if(n!=i)o=n>i?1:-1;else for(r=o=0;r<n;r++)if(t[r]!=e[r]){o=t[r]>e[r]?1:-1;break}return o}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=+(t[n]<e[n]),t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,r,o,s,a){var u,l,h,c,f,d,p,g,v,y,_,m,x,b,E,k,w,I=i.s==r.s?1:-1,S=i.c,M=r.c;if(!(S&&S[0]&&M&&M[0]))return new P(i.s&&r.s&&(S?!M||S[0]!=M[0]:M)?S&&0==S[0]||!M?0*I:I/0:NaN);for(v=(g=new P(I)).c=[],I=o+(l=i.e-r.e)+1,a||(a=1e14,l=rc(i.e/14)-rc(r.e/14),I=I/14|0),h=0;M[h]==(S[h]||0);h++);if(M[h]>(S[h]||0)&&l--,I<0)v.push(1),c=!0;else{for(b=S.length,k=M.length,h=0,I+=2,(f=ra(a/(M[0]+1)))>1&&(M=t(M,f,a),S=t(S,f,a),k=M.length,b=S.length),x=k,_=(y=S.slice(0,k)).length;_<k;y[_++]=0);w=[0].concat(w=M.slice()),E=M[0],M[1]>=a/2&&E++;do{if(f=0,(u=e(M,y,k,_))<0){if(m=y[0],k!=_&&(m=m*a+(y[1]||0)),(f=ra(m/E))>1)for(f>=a&&(f=a-1),p=(d=t(M,f,a)).length,_=y.length;1==e(d,y,p,_);)f--,n(d,k<p?w:M,p,a),p=d.length,u=1;else 0==f&&(u=f=1),p=(d=M.slice()).length;if(p<_&&(d=[0].concat(d)),n(y,d,_,a),_=y.length,-1==u)for(;1>e(M,y,k,_);)f++,n(y,k<_?w:M,_,a),_=y.length}else 0===u&&(f++,y=[0]);v[h++]=f,y[0]?y[_++]=S[x]||0:(y=[S[x]],_=1)}while((x++<b||null!=y[0])&&I--)c=null!=y[0],v[0]||v.splice(0,1)}if(1e14==a){for(h=1,I=v[0];I>=10;I/=10,h++);T(g,o+(g.e=h+14*l-1)+1,s,c)}else g.e=l,g.r=+c;return g}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,a=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(t,e,n,i){var r,o=n?e:e.replace(h,"");if(l.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(s,function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=r?t:e}),i&&(r=i,o=o.replace(a,"$1").replace(u,"0.$1")),e!=o))return new P(o,r);if(P.DEBUG)throw Error(ru+"Not a"+(i?" base "+i:"")+" number: "+e);t.s=null}t.c=t.e=null},c.absoluteValue=c.abs=function(){var t=new P(this);return t.s<0&&(t.s=1),t},c.comparedTo=function(t,e){return rd(this,new P(t,e))},c.decimalPlaces=c.dp=function(t,e){var n,i,r;if(null!=t)return rp(t,0,1e9),null==e?e=p:rp(e,0,8),T(new P(this),t+this.e+1,e);if(!(n=this.c))return null;if(i=((r=n.length-1)-rc(this.e/14))*14,r=n[r])for(;r%10==0;r/=10,i--);return i<0&&(i=0),i},c.dividedBy=c.div=function(t,e){return n(this,new P(t,e),d,p)},c.dividedToIntegerBy=c.idiv=function(t,e){return n(this,new P(t,e),0,1)},c.exponentiatedBy=c.pow=function(t,e){var n,i,r,o,s,a,u,l,h=this;if((t=new P(t)).c&&!t.isInteger())throw Error(ru+"Exponent not an integer: "+C(t));if(null!=e&&(e=new P(e)),s=t.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!t.c||!t.c[0])return l=new P(Math.pow(+C(h),s?t.s*(2-rg(t)):+C(t))),e?l.mod(e):l;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new P(NaN);(i=!a&&h.isInteger()&&e.isInteger())&&(h=h.mod(e))}else{if(t.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return o=h.s<0&&rg(t)?-0:0,h.e>-1&&(o=1/o),new P(a?1/o:o);E&&(o=rs(E/14+2))}for(s?(n=new P(.5),a&&(t.s=1),u=rg(t)):u=(r=Math.abs(+C(t)))%2,l=new P(f);;){if(u){if(!(l=l.times(h)).c)break;o?l.c.length>o&&(l.c.length=o):i&&(l=l.mod(e))}if(r){if(0===(r=ra(r/2)))break;u=r%2}else if(T(t=t.times(n),t.e+1,1),t.e>14)u=rg(t);else{if(0==(r=+C(t)))break;u=r%2}h=h.times(h),o?h.c&&h.c.length>o&&(h.c.length=o):i&&(h=h.mod(e))}return i?l:(a&&(l=f.div(l)),e?l.mod(e):o?T(l,E,p,void 0):l)},c.integerValue=function(t){var e=new P(this);return null==t?t=p:rp(t,0,8),T(e,e.e+1,t)},c.isEqualTo=c.eq=function(t,e){return 0===rd(this,new P(t,e))},c.isFinite=function(){return!!this.c},c.isGreaterThan=c.gt=function(t,e){return rd(this,new P(t,e))>0},c.isGreaterThanOrEqualTo=c.gte=function(t,e){return 1===(e=rd(this,new P(t,e)))||0===e},c.isInteger=function(){return!!this.c&&rc(this.e/14)>this.c.length-2},c.isLessThan=c.lt=function(t,e){return 0>rd(this,new P(t,e))},c.isLessThanOrEqualTo=c.lte=function(t,e){return -1===(e=rd(this,new P(t,e)))||0===e},c.isNaN=function(){return!this.s},c.isNegative=function(){return this.s<0},c.isPositive=function(){return this.s>0},c.isZero=function(){return!!this.c&&0==this.c[0]},c.minus=function(t,e){var n,i,r,o,s=this.s;if(e=(t=new P(t,e)).s,!s||!e)return new P(NaN);if(s!=e)return t.s=-e,this.plus(t);var a=this.e/14,u=t.e/14,l=this.c,h=t.c;if(!a||!u){if(!l||!h)return l?(t.s=-e,t):new P(h?this:NaN);if(!l[0]||!h[0])return h[0]?(t.s=-e,t):new P(l[0]?this:3==p?-0:0)}if(a=rc(a),u=rc(u),l=l.slice(),s=a-u){for((o=s<0)?(s=-s,r=l):(u=a,r=h),r.reverse(),e=s;e--;r.push(0));r.reverse()}else for(i=(o=(s=l.length)<(e=h.length))?s:e,s=e=0;e<i;e++)if(l[e]!=h[e]){o=l[e]<h[e];break}if(o&&(r=l,l=h,h=r,t.s=-t.s),(e=(i=h.length)-(n=l.length))>0)for(;e--;l[n++]=0);for(e=1e14-1;i>s;){if(l[--i]<h[i]){for(n=i;n&&!l[--n];l[n]=e);--l[n],l[i]+=1e14}l[i]-=h[i]}for(;0==l[0];l.splice(0,1),--u);return l[0]?N(t,l,u):(t.s=3==p?-1:1,t.c=[t.e=0],t)},c.modulo=c.mod=function(t,e){var i,r;return t=new P(t,e),this.c&&t.s&&(!t.c||t.c[0])?t.c&&(!this.c||this.c[0])?(9==b?(r=t.s,t.s=1,i=n(this,t,0,3),t.s=r,i.s*=r):i=n(this,t,0,b),(t=this.minus(i.times(t))).c[0]||1!=b||(t.s=this.s),t):new P(this):new P(NaN)},c.multipliedBy=c.times=function(t,e){var n,i,r,o,s,a,u,l,h,c,f,d,p,g=this.c,v=(t=new P(t,e)).c;if(!(g&&v&&g[0]&&v[0]))return this.s&&t.s&&(!g||g[0]||v)&&(!v||v[0]||g)?(t.s*=this.s,g&&v?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(i=rc(this.e/14)+rc(t.e/14),t.s*=this.s,(u=g.length)<(c=v.length)&&(p=g,g=v,v=p,r=u,u=c,c=r),r=u+c,p=[];r--;p.push(0));for(r=c;--r>=0;){for(n=0,f=v[r]%1e7,d=v[r]/1e7|0,o=r+(s=u);o>r;)n=((l=f*(l=g[--s]%1e7)+(a=d*l+(h=g[s]/1e7|0)*f)%1e7*1e7+p[o]+n)/1e14|0)+(a/1e7|0)+d*h,p[o--]=l%1e14;p[o]=n}return n?++i:p.splice(0,1),N(t,p,i)},c.negated=function(){var t=new P(this);return t.s=-t.s||null,t},c.plus=function(t,e){var n,i=this.s;if(e=(t=new P(t,e)).s,!i||!e)return new P(NaN);if(i!=e)return t.s=-e,this.minus(t);var r=this.e/14,o=t.e/14,s=this.c,a=t.c;if(!r||!o){if(!s||!a)return new P(i/0);if(!s[0]||!a[0])return a[0]?t:new P(s[0]?this:0*i)}if(r=rc(r),o=rc(o),s=s.slice(),i=r-o){for(i>0?(o=r,n=a):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(e=a.length)<0&&(n=a,a=s,s=n,e=i),i=0;e;)i=(s[--e]=s[e]+a[e]+i)/1e14|0,s[e]=1e14===s[e]?0:s[e]%1e14;return i&&(s=[i].concat(s),++o),N(t,s,o)},c.precision=c.sd=function(t,e){var n,i,r;if(null!=t&&!!t!==t)return rp(t,1,1e9),null==e?e=p:rp(e,0,8),T(new P(this),t,e);if(!(n=this.c))return null;if(i=14*(r=n.length-1)+1,r=n[r]){for(;r%10==0;r/=10,i--);for(r=n[0];r>=10;r/=10,i++);}return t&&this.e+1>i&&(i=this.e+1),i},c.shiftedBy=function(t){return rp(t,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+t)},c.squareRoot=c.sqrt=function(){var t,e,i,r,o,s=this.c,a=this.s,u=this.e,l=d+4,h=new P("0.5");if(1!==a||!s||!s[0])return new P(!a||a<0&&(!s||s[0])?NaN:s?this:1/0);if(0==(a=Math.sqrt(+C(this)))||a==1/0?(((e=rf(s)).length+u)%2==0&&(e+="0"),a=Math.sqrt(+e),u=rc((u+1)/2)-(u<0||u%2),i=new P(e=a==1/0?"5e"+u:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+u)):i=new P(a+""),i.c[0]){for((a=(u=i.e)+l)<3&&(a=0);;)if(o=i,i=h.times(o.plus(n(this,o,l,1))),rf(o.c).slice(0,a)===(e=rf(i.c)).slice(0,a)){if(i.e<u&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(T(i,i.e+d+2,1),t=!i.times(i).eq(this));break}if(!r&&(T(o,o.e+d+2,0),o.times(o).eq(this))){i=o;break}l+=4,a+=4,r=1}}return T(i,i.e+d+1,p,t)},c.toExponential=function(t,e){return null!=t&&(rp(t,0,1e9),t++),S(this,t,e,1)},c.toFixed=function(t,e){return null!=t&&(rp(t,0,1e9),t=t+this.e+1),S(this,t,e)},c.toFormat=function(t,e,n){var i;if(null==n)null!=t&&e&&"object"==_(e)?(n=e,e=null):t&&"object"==_(t)?(n=t,t=e=null):n=k;else if("object"!=_(n))throw Error(ru+"Argument not an object: "+n);if(i=this.toFixed(t,e),this.c){var r,o=i.split("."),s=+n.groupSize,a=+n.secondaryGroupSize,u=n.groupSeparator||"",l=o[0],h=o[1],c=this.s<0,f=c?l.slice(1):l,d=f.length;if(a&&(r=s,s=a,a=r,d-=r),s>0&&d>0){for(r=d%s||s,l=f.substr(0,r);r<d;r+=s)l+=u+f.substr(r,s);a>0&&(l+=u+f.slice(r)),c&&(l="-"+l)}i=h?l+(n.decimalSeparator||"")+((a=+n.fractionGroupSize)?h.replace(RegExp("\\d{"+a+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):l}return(n.prefix||"")+i+(n.suffix||"")},c.toFraction=function(t){var e,i,r,o,s,a,u,l,h,c,d,g,v=this.c;if(null!=t&&(!(u=new P(t)).isInteger()&&(u.c||1!==u.s)||u.lt(f)))throw Error(ru+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+C(u));if(!v)return new P(this);for(e=new P(f),h=i=new P(f),r=l=new P(f),g=rf(v),s=e.e=g.length-this.e-1,e.c[0]=rh[(a=s%14)<0?14+a:a],t=!t||u.comparedTo(e)>0?s>0?e:h:u,a=m,m=1/0,u=new P(g),l.c[0]=0;c=n(u,e,0,1),1!=(o=i.plus(c.times(r))).comparedTo(t);)i=r,r=o,h=l.plus(c.times(o=h)),l=o,e=u.minus(c.times(o=e)),u=o;return o=n(t.minus(i),r,0,1),l=l.plus(o.times(h)),i=i.plus(o.times(r)),l.s=h.s=this.s,d=1>n(h,r,s*=2,p).minus(this).abs().comparedTo(n(l,i,s,p).minus(this).abs())?[h,r]:[l,i],m=a,d},c.toNumber=function(){return+C(this)},c.toPrecision=function(t,e){return null!=t&&rp(t,1,1e9),S(this,t,e,2)},c.toString=function(t){var e,n=this,r=n.s,o=n.e;return null===o?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=o<=g||o>=v?rv(rf(n.c),o):ry(rf(n.c),o,"0"):10===t&&I?e=ry(rf((n=T(new P(n),d+o+1,p)).c),n.e,"0"):(rp(t,2,w.length,"Base"),e=i(ry(rf(n.c),o,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},c.valueOf=c.toJSON=function(){return C(this)},c._isBigNumber=!0,c[Symbol.toStringTag]="BigNumber",c[Symbol.for("nodejs.util.inspect.custom")]=c.valueOf,null!=e&&P.set(e),P}(),rm=function(t){function e(t){return r(this,e),i(this,e,[t])}return h(e,t),s(e)}(s(function t(e){r(this,t),u(this,"key",void 0),u(this,"left",null),u(this,"right",null),this.key=e})),rx=function(t){function e(t,n){var o;return r(this,e),u(o=i(this,e),"root",null),u(o,"compare",void 0),u(o,"validKey",void 0),u(o,Symbol.toStringTag,"[object Set]"),o.compare=null!=t?t:o.defaultCompare(),o.validKey=null!=n?n:function(t){return null!=t&&null!=t},o}return h(e,t),s(e,[{key:"delete",value:function(t){return!!this.validKey(t)&&null!=this._delete(t)}},{key:"deleteAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.delete(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"forEach",value:function(t){for(var e,n=this[Symbol.iterator]();!(e=n.next()).done;)t(e.value,e.value,this)}},{key:"add",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new rm(t),e),this}},{key:"addAndReturn",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new rm(t),e),this.root.key}},{key:"addAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isEmpty",value:function(){return null==this.root}},{key:"isNotEmpty",value:function(){return null!=this.root}},{key:"single",value:function(){if(0==this.size)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}},{key:"first",value:function(){if(0==this.size)throw"Bad state: No element";return this._first().key}},{key:"last",value:function(){if(0==this.size)throw"Bad state: No element";return this._last().key}},{key:"lastBefore",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(0>this.splay(t))return this.root.key;var e=this.root.left;if(null==e)return null;for(var n=e.right;null!=n;)n=(e=n).right;return e.key}},{key:"firstAfter",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)>0)return this.root.key;var e=this.root.right;if(null==e)return null;for(var n=e.left;null!=n;)n=(e=n).left;return e.key}},{key:"retainAll",value:function(t){var n,i=new e(this.compare,this.validKey),r=this.modificationCount,o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&0==this.splay(s)&&i.add(this.root.key)}}catch(t){o.e(t)}finally{o.f()}i.size!=this.size&&(this.root=i.root,this.size=i.size,this.modificationCount++)}},{key:"lookup",value:function(t){return this.validKey(t)?0!=this.splay(t)?null:this.root.key:null}},{key:"intersection",value:function(t){var n,i=new e(this.compare,this.validKey),r=a(this);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.has(o)&&i.add(o)}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"difference",value:function(t){var n,i=new e(this.compare,this.validKey),r=a(this);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.has(o)||i.add(o)}}catch(t){r.e(t)}finally{r.f()}return i}},{key:"union",value:function(t){var e=this.clone();return e.addAll(t),e}},{key:"clone",value:function(){var t=new e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}},{key:"copyNode",value:function(t){if(null==t)return null;var e=new rm(t.key);return function t(e,n){var i,r;do{if(i=e.left,r=e.right,null!=i){var o=new rm(i.key);n.left=o,t(i,o)}if(null!=r){var s=new rm(r.key);n.right=s,e=r,n=s}}while(null!=r)}(t,e),e}},{key:"toSet",value:function(){return this.clone()}},{key:"entries",value:function(){return new rk(this.wrap())}},{key:"keys",value:function(){return this[Symbol.iterator]()}},{key:"values",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new rE(this.wrap())}}])}(s(function t(){r(this,t),u(this,"size",0),u(this,"modificationCount",0),u(this,"splayCount",0)},[{key:"splay",value:function(t){var e=this.root;if(null==e)return this.compare(t,t),-1;for(var n,i=null,r=null,o=null,s=null,a=e,u=this.compare;;)if((n=u(a.key,t))>0){var l=a.left;if(null==l||(n=u(l.key,t))>0&&(a.left=l.right,l.right=a,null==(l=(a=l).left)))break;null==i?r=a:i.left=a,i=a,a=l}else{if(!(n<0))break;var h=a.right;if(null==h||(n=u(h.key,t))<0&&(a.right=h.left,h.left=a,null==(h=(a=h).right)))break;null==o?s=a:o.right=a,o=a,a=h}return null!=o&&(o.right=a.left,a.left=s),null!=i&&(i.left=a.right,a.right=r),this.root!==a&&(this.root=a,this.splayCount++),n}},{key:"splayMin",value:function(t){for(var e=t,n=e.left;null!=n;){var i=n;e.left=i.right,i.right=e,n=(e=i).left}return e}},{key:"splayMax",value:function(t){for(var e=t,n=e.right;null!=n;){var i=n;e.right=i.left,i.left=e,n=(e=i).right}return e}},{key:"_delete",value:function(t){if(null==this.root||0!=this.splay(t))return null;var e=this.root,n=e,i=e.left;if(this.size--,null==i)this.root=e.right;else{var r=e.right;(e=this.splayMax(i)).right=r,this.root=e}return this.modificationCount++,n}},{key:"addNewRoot",value:function(t,e){this.size++,this.modificationCount++;var n=this.root;null!=n&&(e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null)),this.root=t}},{key:"_first",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMin(t),this.root)}},{key:"_last",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMax(t),this.root)}},{key:"clear",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:"has",value:function(t){return this.validKey(t)&&0==this.splay(t)}},{key:"defaultCompare",value:function(){return function(t,e){return t<e?-1:+(t>e)}}},{key:"wrap",value:function(){var t=this;return{getRoot:function(){return t.root},setRoot:function(e){t.root=e},getSize:function(){return t.size},getModificationCount:function(){return t.modificationCount},getSplayCount:function(){return t.splayCount},setSplayCount:function(e){t.splayCount=e},splay:function(e){return t.splay(e)},has:function(e){return t.has(e)}}}}])),rb=s(function t(e){r(this,t),u(this,"tree",void 0),u(this,"path",[]),u(this,"modificationCount",null),u(this,"splayCount",void 0),this.tree=e,this.splayCount=e.getSplayCount()},[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:"current",value:function(){if(!this.path.length)return null;var t=this.path[this.path.length-1];return this.getValue(t)}},{key:"rebuildPath",value:function(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:"findLeftMostDescendent",value:function(t){for(;null!=t;)this.path.push(t),t=t.left}},{key:"moveNext",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var t=this.tree.getRoot();null!=t;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var e=this.path[this.path.length-1],n=e.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}}]),rE=function(t){function e(){return r(this,e),i(this,e,arguments)}return h(e,t),s(e,[{key:"getValue",value:function(t){return t.key}}])}(rb),rk=function(t){function e(){return r(this,e),i(this,e,arguments)}return h(e,t),s(e,[{key:"getValue",value:function(t){return[t.key,t.key]}}])}(rb),rw=function(t){return function(){return t}},rI=function(t){var e=t?function(e,n){return n.minus(e).abs().isLessThanOrEqualTo(t)}:rw(!1);return function(t,n){return e(t,n)?0:t.comparedTo(n)}},rL=function(t){return t},rP=function(t){if(t){var e=new rx(rI(t)),n=new rx(rI(t)),i=function(t,e){return e.addAndReturn(t)},r=function(t){return{x:i(t.x,e),y:i(t.y,n)}};return r({x:new r_(0),y:new r_(0)}),r}return rL},rS=function(t){var e;return{set:function(t){rM=rS(t)},reset:function(){return rS(t)},compare:rI(t),snap:rP(t),orient:(e=t?function(e,n,i,r,o){return e.exponentiatedBy(2).isLessThanOrEqualTo(r.minus(n).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t))}:rw(!1),function(t,n,i){var r=t.x,o=t.y,s=i.x,a=i.y,u=o.minus(a).times(n.x.minus(s)).minus(r.minus(s).times(n.y.minus(a)));return e(u,r,o,s,a)?0:u.comparedTo(0)})}},rM=rS(),rN=function(t,e){return t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y)},rT=function(t,e){if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;var n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,i=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y}}},rC=function(t,e){return t.x.times(e.y).minus(t.y.times(e.x))},rO=function(t,e){return t.x.times(e.x).plus(t.y.times(e.y))},rR=function(t){return rO(t,t).sqrt()},rA=function(t,e,n){var i={x:e.x.minus(t.x),y:e.y.minus(t.y)},r={x:n.x.minus(t.x),y:n.y.minus(t.y)};return rO(r,i).div(rR(r)).div(rR(i))},rD=function(t,e,n){return e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n}},rz=function(t,e,n){return e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))}},rB=function(){function t(e,n){r(this,t),u(this,"point",void 0),u(this,"isLeft",void 0),u(this,"segment",void 0),u(this,"otherSE",void 0),u(this,"consumedBy",void 0),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return s(t,[{key:"link",value:function(t){if(t.point===this.point)throw Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,s,a,u,l=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,s=l.point,a={x:o.x.minus(r.x),y:o.y.minus(r.y)},rC(u={x:s.x.minus(r.x),y:s.y.minus(r.y)},a).div(rR(u)).div(rR(a))),cosine:rA(e.point,t.point,l.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,s=r.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o.isGreaterThanOrEqualTo(0)&&u.isGreaterThanOrEqualTo(0)?s.isLessThan(l)?1:s.isGreaterThan(l)?-1:0:o.isLessThan(0)&&u.isLessThan(0)?s.isLessThan(l)?-1:+!!s.isGreaterThan(l):u.isLessThan(o)?-1:+!!u.isGreaterThan(o)}}}],[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:rY.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x.isLessThan(e.x)?-1:t.x.isGreaterThan(e.x)?1:t.y.isLessThan(e.y)?-1:+!!t.y.isGreaterThan(e.y)}}])}(),rF=function(){function t(e){r(this,t),u(this,"events",void 0),u(this,"poly",void 0),u(this,"_isExteriorRing",void 0),u(this,"_enclosingRing",void 0),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return s(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==rM.orient(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===rM.orient(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],f=l;f!=h;f+=u)c.push([e[f].x.toNumber(),e[f].y.toNumber()]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t,e,n=this.events[0],i=1,r=this.events.length;i<r;i++){var o=this.events[i];rB.compare(n,o)>0&&(n=o)}for(var s=n.segment.prevInResult(),a=s?s.prevInResult():null;;){if(!s)return null;if(!a)return s.ringOut;if(a.ringOut!==s.ringOut)return(null===(t=a.ringOut)||void 0===t?void 0:t.enclosingRing())!==s.ringOut?s.ringOut:null===(e=s.ringOut)||void 0===e?void 0:e.enclosingRing();a=(s=a.prevInResult())?s.prevInResult():null}}}],[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,a=u,l.push(a),a.point!==h;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var d=l[0].point,p=l[l.length-1].point;throw Error("Unable to complete output ring starting at [".concat(d.x,", ").concat(d.y,"]. Last matching segment found ends at [").concat(p.x,", ").concat(p.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,v=0,y=c.length;v<y;v++)if(c[v].point===a.point){g=v;break}if(null===g){c.push({index:l.length,point:a.point});var _=a.getLeftmostComparator(s);u=f.sort(_)[0].otherSE;break}var m=c.splice(g)[0],x=l.splice(m.index);x.unshift(x[0].otherSE),n.push(new t(x.reverse()))}n.push(new t(l))}}return n}}])}(),rq=s(function t(e){r(this,t),u(this,"exteriorRing",void 0),u(this,"interiorRings",void 0),this.exteriorRing=e,e.poly=this,this.interiorRings=[]},[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=this.exteriorRing.getGeom();if(null===t)return null;for(var e=[t],n=0,i=this.interiorRings.length;n<i;n++){var r=this.interiorRings[n].getGeom();null!==r&&e.push(r)}return e}}]),rV=s(function t(e){r(this,t),u(this,"rings",void 0),u(this,"polys",void 0),this.rings=e,this.polys=this._composePolys(e)},[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly){if(r.isExteriorRing())e.push(new rq(r));else{var o,s=r.enclosingRing();null!=s&&s.poly||e.push(new rq(s)),null==s||null===(o=s.poly)||void 0===o||o.addInterior(r)}}}return e}}]),rG=s(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rY.compare;r(this,t),u(this,"queue",void 0),u(this,"tree",void 0),u(this,"segments",void 0),this.queue=e,this.tree=new rx(n),this.segments=[]},[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);var i=e,r=e;do i=this.tree.lastBefore(i);while(null!=i&&null!=i.consumedBy)do r=this.tree.firstAfter(r);while(null!=r&&null!=r.consumedBy)if(t.isLeft){var o=null;if(i){var s=i.getIntersection(e);if(null!==s&&(e.isAnEndpoint(s)||(o=s),!i.isAnEndpoint(s)))for(var a=this._splitSafely(i,s),u=0,l=a.length;u<l;u++)n.push(a[u])}var h=null;if(r){var c=r.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(h=c),!r.isAnEndpoint(c)))for(var f=this._splitSafely(r,c),d=0,p=f.length;d<p;d++)n.push(f[d])}if(null!==o||null!==h){var g=null;g=null===o?h:null===h?o:0>=rB.comparePoints(o,h)?o:h,this.queue.delete(e.rightSE),n.push(e.rightSE);for(var v=e.split(g),y=0,_=v.length;y<_;y++)n.push(v[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&r){var m=i.getIntersection(r);if(null!==m){if(!i.isAnEndpoint(m))for(var x=this._splitSafely(i,m),b=0,E=x.length;b<E;b++)n.push(x[b]);if(!r.isAnEndpoint(m))for(var k=this._splitSafely(r,m),w=0,I=k.length;w<I;w++)n.push(k[w])}}this.tree.delete(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.delete(t);var n=t.rightSE;this.queue.delete(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.add(t),i}}]),rZ=new(s(function t(){r(this,t),u(this,"type",void 0),u(this,"numMultiPolys",void 0)},[{key:"run",value:function(t,e,n){rZ.type=t;for(var i=[new rH(e,!0)],r=0,o=n.length;r<o;r++)i.push(new rH(n[r],!1));if(rZ.numMultiPolys=i.length,"difference"===rZ.type)for(var s=i[0],a=1;a<i.length;)null!==rT(i[a].bbox,s.bbox)?a++:i.splice(a,1);if("intersection"===rZ.type){for(var u=0,l=i.length;u<l;u++)for(var h=i[u],c=u+1,f=i.length;c<f;c++)if(null===rT(h.bbox,i[c].bbox))return[]}for(var d=new rx(rB.compare),p=0,g=i.length;p<g;p++)for(var v=i[p].getSweepEvents(),y=0,_=v.length;y<_;y++)d.add(v[y]);var m=new rG(d),x=null;for(0!=d.size&&(x=d.first(),d.delete(x));x;){for(var b=m.process(x),E=0,k=b.length;E<k;E++){var w=b[E];void 0===w.consumedBy&&d.add(w)}0!=d.size?(x=d.first(),d.delete(x)):x=null}return rM.reset(),new rV(rF.factory(m.segments)).getGeom()}}])),rj=0,rY=function(){function t(e,n,i,o){r(this,t),u(this,"id",void 0),u(this,"leftSE",void 0),u(this,"rightSE",void 0),u(this,"rings",void 0),u(this,"windings",void 0),u(this,"ringOut",void 0),u(this,"consumedBy",void 0),u(this,"prev",void 0),u(this,"_prevInResult",void 0),u(this,"_beforeState",void 0),u(this,"_afterState",void 0),u(this,"_isInResult",void 0),this.id=++rj,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=o}return s(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(e)?t:e},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(e)?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:"isAnEndpoint",value:function(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}},{key:"comparePoint",value:function(t){return rM.orient(this.leftSE.point,t,this.rightSE.point)}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=rT(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=rN(e,s)&&0===this.comparePoint(s),l=rN(n,r)&&0===t.comparePoint(r),h=rN(e,a)&&0===this.comparePoint(a),c=rN(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&r.x.eq(a.x)&&r.y.eq(a.y)?null:r;if(u)return c&&o.x.eq(s.x)&&o.y.eq(s.y)?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var f=function(t,e,n,i){if(e.x.isZero())return rz(n,i,t.x);if(i.x.isZero())return rz(t,e,n.x);if(e.y.isZero())return rD(n,i,t.y);if(i.y.isZero())return rD(t,e,n.y);var r=rC(e,i);if(r.isZero())return null;var o={x:n.x.minus(t.x),y:n.y.minus(t.y)},s=rC(o,e).div(r),a=rC(o,i).div(r),u=t.x.plus(a.times(e.x)),l=n.x.plus(s.times(i.x)),h=t.y.plus(a.times(e.y)),c=n.y.plus(s.times(i.y));return{x:u.plus(l).div(2),y:h.plus(c).div(2)}}(r,this.vector(),s,t.vector());return null===f?null:rN(i,f)?rM.snap(f):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new rB(e,!0),o=new rB(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var a=new t(r,s,this.rings.slice(),this.windings.slice());return rB.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),rB.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var s=n;n=i,i=s}for(var a=0,u=i.rings.length;a<u;a++){var l=i.rings[a],h=i.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var d=e[c],p=d.poly;if(-1===h.indexOf(p)){if(d.isExterior)l.push(p);else{-1===h.indexOf(p)&&h.push(p);var g=l.indexOf(d.poly);-1!==g&&l.splice(g,1)}}}for(var v=0,y=l.length;v<y;v++){var _=l[v].multiPoly;-1===i.indexOf(_)&&i.push(_)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t,e,n=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(rZ.type){case"union":var r=0===n.length,o=0===i.length;this._isInResult=r!==o;break;case"intersection":n.length<i.length?(t=n.length,e=i.length):(t=i.length,e=n.length),this._isInResult=e===rZ.numMultiPolys&&t<e;break;case"xor":var s=Math.abs(n.length-i.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(n)!==a(i)}return this._isInResult}}],[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o.isLessThan(n))return 1;if(r.isLessThan(i))return -1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n.isLessThan(i)){if(a.isLessThan(s)&&a.isLessThan(u))return 1;if(a.isGreaterThan(s)&&a.isGreaterThan(u))return -1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return -1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n.isGreaterThan(i)){if(s.isLessThan(a)&&s.isLessThan(l))return -1;if(s.isGreaterThan(a)&&s.isGreaterThan(l))return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s.isLessThan(a))return -1;if(s.isGreaterThan(a))return 1;if(r.isLessThan(o)){var p=e.comparePoint(t.rightSE.point);if(0!==p)return p}if(r.isGreaterThan(o)){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return -1}if(!r.eq(o)){var v=u.minus(s),y=r.minus(n),_=l.minus(a),m=o.minus(i);if(v.isGreaterThan(y)&&_.isLessThan(m))return 1;if(v.isLessThan(y)&&_.isGreaterThan(m))return -1}return r.isGreaterThan(o)?1:r.isLessThan(o)||u.isLessThan(l)?-1:u.isGreaterThan(l)?1:t.id<e.id?-1:+(t.id>e.id)}},{key:"fromRing",value:function(e,n,i){var r,o,s,a=rB.comparePoints(e,n);if(a<0)r=e,o=n,s=1;else{if(!(a>0))throw Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,s=-1}return new t(new rB(r,!0),new rB(o,!1),[i],[s])}}])}(),rU=s(function t(e,n,i){if(r(this,t),u(this,"poly",void 0),u(this,"isExterior",void 0),u(this,"segments",void 0),u(this,"bbox",void 0),!Array.isArray(e)||0===e.length||(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1]))throw Error("Input geometry is not a valid Polygon or MultiPolygon");var o=rM.snap({x:new r_(e[0][0]),y:new r_(e[0][1])});this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=e.length;a<l;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw Error("Input geometry is not a valid Polygon or MultiPolygon");var h=rM.snap({x:new r_(e[a][0]),y:new r_(e[a][1])});h.x.eq(s.x)&&h.y.eq(s.y)||(this.segments.push(rY.fromRing(s,h,this)),h.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.x),h.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.y),h.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.x),h.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.y),s=h)}o.x.eq(s.x)&&o.y.eq(s.y)||this.segments.push(rY.fromRing(s,o,this))},[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),rX=s(function t(e,n){if(r(this,t),u(this,"multiPoly",void 0),u(this,"exteriorRing",void 0),u(this,"interiorRings",void 0),u(this,"bbox",void 0),!Array.isArray(e))throw Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new rU(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=e.length;i<o;i++){var s=new rU(e[i],this,!1);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n},[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),rH=s(function t(e,n){if(r(this,t),u(this,"isSubject",void 0),u(this,"polys",void 0),u(this,"bbox",void 0),!Array.isArray(e))throw Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:new r_(Number.POSITIVE_INFINITY),y:new r_(Number.POSITIVE_INFINITY)},ur:{x:new r_(Number.NEGATIVE_INFINITY),y:new r_(Number.NEGATIVE_INFINITY)}};for(var i=0,o=e.length;i<o;i++){var s=new rX(e[i],this);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n},[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),rW=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rZ.run("union",t,n)},rK=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rZ.run("intersection",t,n)},rJ=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rZ.run("difference",t,n)},rQ=Object.freeze({__proto__:null,difference:rJ,intersection:rK,setPrecision:rM.set,union:rW,xor:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rZ.run("xor",t,n)}});function r$(t){if(!t)throw Error("geojson is required");var e=[];return tx(t,function(t){e.push(t)}),T(e)}function r0(t,e){var n,i,r=(e=e||{}).threshold||1e4,o=e.p||2,s=null!=(n=e.binary)&&n,a=e.alpha||-1,u=null!=(i=e.standardization)&&i,l=[];tg(t,function(t){l.push(ih(t))});for(var h=[],c=0;c<l.length;c++)h[c]=[];for(var f=0;f<l.length;f++)for(var d=f;d<l.length;d++){f===d&&(h[f][d]=0);var p=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=J(t),r=J(e),o=i[0]-r[0],s=i[1]-r[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}(l[f],l[d],o);h[f][d]=p,h[d][f]=p}for(var g=0;g<l.length;g++)for(var v=0;v<l.length;v++){var y=h[g][v];0!==y&&(h[g][v]=s?+(y<=r):y<=r?Math.pow(y,a):0)}if(u)for(var _=0;_<l.length;_++)for(var m=h[_].reduce(function(t,e){return t+e},0),x=0;x<l.length;x++)h[_][x]=h[_][x]/m;return h}function r1(t,e,n){var i,r,o,s,a,u,l,h,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=j(Math.abs(e),c.units,"meters");e<0&&(f=-Math.abs(f));var d=J(t),p=(r=f/(i=void 0===i?6371008.8:Number(i)),o=d[0]*Math.PI/180,Math.abs(l=(s=Z(d[1]))+(u=r*Math.cos(a=Z(n))))>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l),[(180*(o+r*Math.sin(a)/(Math.abs(h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)))>1e-11?u/h:Math.cos(s)))/Math.PI+540)%360-180,180*l/Math.PI]);return p[0]+=p[0]-d[0]>180?-360:360*(d[0]-p[0]>180),w(p,c.properties)}function r2(t,e){var n,i,r,o,s,a,u,l,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=J(t),f=J(e);return f[0]+=f[0]-c[0]>180?-360:360*(c[0]-f[0]>180),j((i=n=void 0===n?6371008.8:Number(n),r=c[1]*Math.PI/180,s=(o=f[1]*Math.PI/180)-r,(a=Math.abs(f[0]-c[0])*Math.PI/180)>Math.PI&&(a-=2*Math.PI),l=Math.abs(u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)))>1e-11?s/u:Math.cos(r),Math.sqrt(s*s+l*l*a*a)*i),"meters",h.units)}function r3(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("angle is required");if(0===e)return t;var o=null!=i?i:ih(t);return!1!==r&&void 0!==r||(t=iN(t)),tc(t,function(t){var n=tl(o,t)+e,i=r2(o,t),r=Q(r1(o,i,n));t[0]=r[0],t[1]=r[1]}),t}function r4(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,u=i.properties||{};if(!t)throw Error("center is required");if(!e)throw Error("xSemiAxis is required");if(!n)throw Error("ySemiAxis is required");if(!X(i))throw Error("options must be an object");if(!U(r))throw Error("steps must be a number");if(!U(s))throw Error("angle must be a number");var l=J(t);if("degrees"!==o){var h=r1(t,e,90,{units:o}),c=r1(t,n,0,{units:o});e=J(h)[0]-l[0],n=J(c)[1]-l[1]}for(var f=[],d=0;d<r;d+=1){var p=-360*d/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(r8(p),2)),v=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(r8(p),2));if(p<-90&&p>=-270&&(g=-g),p<-180&&p>=-360&&(v=-v),"degrees"===o){var y=Z(s),_=g*Math.cos(y)+v*Math.sin(y),m=v*Math.cos(y)-g*Math.sin(y);g=_,v=m}f.push([g+l[0],v+l[1]])}return f.push(f[0]),"degrees"===o?P([f],u):r3(P([f],u),s,{pivot:a})}function r8(t){return Math.tan(t*Math.PI/180)}function r6(t){return tB(tR(t))}function r5(t){var e=[];return"FeatureCollection"===t.type?tg(t,function(t){tc(t,function(n){e.push(w(n,t.properties))})}):"Feature"===t.type?tc(t,function(n){e.push(w(n,t.properties))}):tc(t,function(t){e.push(w(t))}),T(e)}var r7=Math.PI/180,r9=180/Math.PI,ot=function(t,e){this.lon=t,this.lat=e,this.x=r7*t,this.y=r7*e};ot.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ot.prototype.antipode=function(){var t=-1*this.lat;return new ot(this.lon<0?180+this.lon:-1*(180-this.lon),t)};var oe=function(){this.coords=[],this.length=0};oe.prototype.move_to=function(t){this.length++,this.coords.push(t)};var on=function(t){this.properties=t||{},this.geometries=[]};on.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},on.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var oi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y||!e||void 0===e.x||void 0===e.y)throw Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ot(t.x,t.y),this.end=new ot(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(r)),this.g===Math.PI)throw Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw Error("could not calculate great circle between "+t+" and "+e)};/*!
   * Copyright (c) 2019, Dane Springmeyer
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are
   * met:
   *
   *     * Redistributions of source code must retain the above copyright
   *       notice, this list of conditions and the following disclaimer.
   *     * Redistributions in binary form must reproduce the above copyright
   *       notice, this list of conditions and the following disclaimer in
   *       the documentation and/or other materials provided with the
   *       distribution.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
   * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */function or(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(t_(t,function(t){n.push(t.coordinates)}),n.length<2)throw Error("Must specify at least 2 geometries");var i=rK.apply(rQ,[n[0]].concat(v(n.slice(1))));return 0===i.length?null:1===i.length?P(i[0],e.properties):R(i,e.properties)}function oo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=JSON.stringify(n.properties||{}),r=g(t,4),o=r[0],s=r[1],a=r[2],u=r[3],l=(s+u)/2,h=(o+a)/2,c=2*e/tu([o,l],[a,l],n)*(a-o),f=2*e/tu([h,s],[h,u],n)*(u-s),d=c/2,p=2*d,v=Math.sqrt(3)/2*f,y=a-o,_=u-s,m=3/4*p,x=Math.floor((y-p)/(p-d/2)),b=(x*m-d/2-y)/2-d/2+m/2,E=Math.floor((_-v)/v),k=(_-E*v)/2,w=E*v-_>v/2;w&&(k-=v/4);for(var I=[],S=[],M=0;M<6;M++){var N=2*Math.PI/6*M;I.push(Math.cos(N)),S.push(Math.sin(N))}for(var C=[],O=0;O<=x;O++)for(var R=0;R<=E;R++){var A=O%2==1;if((0!==R||!A)&&(0!==R||!w)){var D=O*m+o-b,z=R*v+s+k;if(A&&(z-=v/2),!0===n.triangles)(function(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*r[a],t[1]+n*o[a]]),u.push([t[0]+e*r[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(P([u],i))}return s})([D,z],c/2,f/2,JSON.parse(i),I,S).forEach(function(t){n.mask?or(T([n.mask,t]))&&C.push(t):C.push(t)});else{var B=function(t,e,n,i,r,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*r[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),P([s],i)}([D,z],c/2,f/2,JSON.parse(i),I,S);n.mask?or(T([n.mask,B]))&&C.push(B):C.push(B)}}}return T(C)}function os(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units="kilometers");for(var i=[],r=t[0],o=t[1],s=t[2],a=t[3],u=e/tu([r,o],[s,o],n)*(s-r),l=e/tu([r,o],[r,a],n)*(a-o),h=s-r,c=a-o,f=Math.floor(h/u),d=(c-Math.floor(c/l)*l)/2,p=r+(h-f*u)/2;p<=s;){for(var g=o+d;g<=a;){var v=w([p,g],n.properties);n.mask?e6(v,n.mask)&&i.push(v):i.push(v),g+=l}p+=u}return T(i)}function oa(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=[],o=t[0],s=t[1],a=t[2],u=t[3],l=a-o,h=j(e,i.units,"degrees"),c=u-s,f=j(n,i.units,"degrees"),d=Math.floor(Math.abs(l)/h),p=Math.floor(Math.abs(c)/f),g=(c-p*f)/2,v=o+(l-d*h)/2,y=0;y<d;y++){for(var _=s+g,m=0;m<p;m++){var x=P([[[v,_],[v,_+f],[v+h,_+f],[v+h,_],[v,_]]],i.properties);i.mask?ev(i.mask,x)&&r.push(x):r.push(x),_+=f}v+=h}return T(r)}function ou(t,e){return oa(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ol(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],r=e/tu([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/tu([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,c=null;s%2==0&&u%2==0?(h=P([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),c=P([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=P([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties),c=P([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=P([[[a,l],[a,l+o],[a+r,l+o],[a,l]]],n.properties),c=P([[[a,l],[a+r,l+o],[a+r,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=P([[[a,l],[a,l+o],[a+r,l],[a,l]]],n.properties),c=P([[[a,l+o],[a+r,l+o],[a+r,l],[a,l+o]]],n.properties)),n.mask?(or(T([n.mask,h]))&&i.push(h),or(T([n.mask,c]))&&i.push(c)):(i.push(h),i.push(c)),l+=o,u++}s++,a+=r}return T(i)}/*!
  * MarchingSquaresJS
  * version 1.3.3
  * https://github.com/RaumZeit/MarchingSquares.js
  *
  * @license GNU Affero General Public License.
  * Copyright (c) 2015-2019 Ronny Lorenz <ronny@tbi.univie.ac.at>
  */function oh(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function oc(t,e,n,i){var r;return n>i&&(r=n,n=i,i=r),t<e?t<n?(n-t)/(e-t):(i-t)/(e-t):t>i?(t-i)/(t-e):(t-n)/(t-e)}function of(t,e,n,i){return t<e?(n-t)/(e-t):(t-i)/(t-e)}function od(t,e,n,i){return t<e?(i-t)/(e-t):(t-n)/(t-e)}function op(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function og(t,e,n,i){var r=[];return t.polygons.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=n}),i.linearRing&&t.push(t[0]),r.push(t)}),r}function ov(t,e,n,i){return 0===n?(t+=1,e+=i[0][1]):1===n?t+=i[0][0]:2===n?e+=i[0][1]:3===n&&(t+=i[0][0],e+=1),[t,e]}function oy(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function o_(t,e,n,i,r){var o=i,s=r,a=0,u=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===i&&1===r)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(i>1){for(;0!==o;)o>>=1,a++;i===1<<a-1&&a--,o=1<<a-1}if(r>1){for(;0!==s;)s>>=1,u++;r===1<<u-1&&u--,s=1<<u-1}this.childA=new o_(t,e,n,o,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,i-o>0&&(this.childB=new o_(t,e+o,n,i-o,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),r-s>0&&(this.childC=new o_(t,e+o,n+s,i-o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),r-s>0&&(this.childD=new o_(t,e,n+s,o,r-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function om(t){var e,n;if(!t)throw Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw Error("data must contain at least two rows");if((n=t[0].length)<2)throw Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw Error("Row "+e+" is not an array");if(t[e].length!=n)throw Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new o_(t,0,0,t[0].length-1,t.length-1)}function ox(t,e,n,i){var r,o,s,a,u,l,h=0,c=t[n+1][e],f=t[n+1][e+1],d=t[n][e+1],p=t[n][e],g=i.threshold;if(!(isNaN(p)||isNaN(d)||isNaN(f)||isNaN(c))){switch(h|=8*(c>=g),h|=4*(f>=g),h|=2*(d>=g),l={cval:h=+(h|=+(p>=g)),polygons:[],edges:{},x0:p,x1:d,x2:f,x3:c},h){case 0:i.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:r=i.interpolate(p,c,g),a=i.interpolate(p,d,g),i.polygons_full&&(l.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&l.polygons.push([[0,0],[0,r],[a,0]]);break;case 13:a=i.interpolate(p,d,g),o=i.interpolate(d,f,g),i.polygons_full&&(l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&l.polygons.push([[a,0],[1,o],[1,0]]);break;case 11:o=i.interpolate(d,f,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&l.polygons.push([[1,o],[s,1],[1,1]]);break;case 7:r=i.interpolate(p,c,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&l.polygons.push([[s,1],[0,r],[0,1]]);break;case 1:r=i.interpolate(p,c,g),a=i.interpolate(p,d,g),i.polygons_full&&(l.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&l.polygons.push([[a,0],[0,r],[0,1],[1,1],[1,0]]);break;case 2:a=i.interpolate(p,d,g),o=i.interpolate(d,f,g),i.polygons_full&&(l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,o],[a,0]]);break;case 4:o=i.interpolate(d,f,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[1,o],[1,0]]);break;case 8:r=i.interpolate(p,c,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&l.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,0]]);break;case 12:r=i.interpolate(p,c,g),o=i.interpolate(d,f,g),i.polygons_full&&(l.edges.left={path:[[0,r],[1,o]],move:{x:1,y:0,enter:"left"}}),i.polygons&&l.polygons.push([[0,0],[0,r],[1,o],[1,0]]);break;case 9:a=i.interpolate(p,d,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"bottom"}}),i.polygons&&l.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:r=i.interpolate(p,c,g),o=i.interpolate(d,f,g),i.polygons_full&&(l.edges.right={path:[[1,o],[0,r]],move:{x:-1,y:0,enter:"right"}}),i.polygons&&l.polygons.push([[0,r],[0,1],[1,1],[1,o]]);break;case 6:a=i.interpolate(p,d,g),s=i.interpolate(c,f,g),i.polygons_full&&(l.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"top"}}),i.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:r=i.interpolate(p,c,g),o=i.interpolate(d,f,g),a=i.interpolate(p,d,g),s=i.interpolate(c,f,g),u=(p+d+f+c)/4,i.polygons_full&&(u<g?(l.edges.left={path:[[0,r],[s,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}):(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.left={path:[[0,r],[a,0]],move:{x:0,y:-1,enter:"top"}})),i.polygons&&(u<g?l.polygons.push([[0,0],[0,r],[s,1],[1,1],[1,o],[a,0]]):(l.polygons.push([[0,0],[0,r],[a,0]]),l.polygons.push([[s,1],[1,1],[1,o]])));break;case 5:r=i.interpolate(p,c,g),o=i.interpolate(d,f,g),a=i.interpolate(p,d,g),s=i.interpolate(c,f,g),u=(p+d+f+c)/4,i.polygons_full&&(u<g?(l.edges.bottom={path:[[a,0],[0,r]],move:{x:-1,y:0,enter:"right"}},l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(l.edges.top={path:[[s,1],[0,r]],move:{x:-1,y:0,enter:"right"}},l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}})),i.polygons&&(u<g?l.polygons.push([[0,r],[0,1],[s,1],[1,o],[1,0],[a,0]]):(l.polygons.push([[0,r],[0,1],[s,1]]),l.polygons.push([[a,0],[1,o],[1,0]])))}return l}}oi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=r9*Math.atan2(e*Math.sin(this.start.y)+n*Math.sin(this.end.y),Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[r9*Math.atan2(r,i),o]},oi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,f=360-l,d=1;d<n.length;++d){var p=n[d-1][0],g=n[d][0],v=Math.abs(g-p);v>f&&(g>h&&p<c||p>h&&g<c)?a=!0:v>u&&(u=v)}var y=[];if(a&&u<l){var _=[];y.push(_);for(var m=0;m<n.length;++m){var x=parseFloat(n[m][0]);if(m>0&&Math.abs(x-n[m-1][0])>f){var b=parseFloat(n[m-1][0]),E=parseFloat(n[m-1][1]),k=parseFloat(n[m][0]),w=parseFloat(n[m][1]);if(b>-180&&b<c&&180===k&&m+1<n.length&&n[m-1][0]>-180&&n[m-1][0]<c){_.push([-180,n[m][1]]),m++,_.push([n[m][0],n[m][1]]);continue}if(b>h&&b<180&&-180===k&&m+1<n.length&&n[m-1][0]>h&&n[m-1][0]<180){_.push([180,n[m][1]]),m++,_.push([n[m][0],n[m][1]]);continue}if(b<c&&k>h){var I=b;b=k,k=I;var P=E;E=w,w=P}if(b>h&&k<c&&(k+=360),b<=180&&k>=180&&b<k){var S=(180-b)/(k-b),M=S*w+(1-S)*E;_.push([n[m-1][0]>h?180:-180,M]),(_=[]).push([n[m-1][0]>h?-180:180,M]),y.push(_)}else _=[],y.push(_);_.push([x,n[m][1]])}else _.push([n[m][0],n[m][1]])}}else{var N=[];y.push(N);for(var T=0;T<n.length;++T)N.push([n[T][0],n[T][1]])}for(var C=new on(this.properties),O=0;O<y.length;++O){var R=new oe;C.geometries.push(R);for(var A=y[O],D=0;D<A.length;++D)R.move_to(A[D])}return C},o_.prototype.cellsInBand=function(t,e,n){var i=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(i=i.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(i=i.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(i=i.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(i=i.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&i.push({x:this.x,y:this.y})),i},o_.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var ob={square:function(t,e,n,i,r,o){o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,a],[s,0],[0,0]])},triangle_br:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[1,a],[1,0]])},triangle_tr:function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[1,s],[a,1],[1,1]])},triangle_tl:function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1]])},tetragon_t:function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[1,1],[1,s]])},tetragon_r:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[a,1],[1,1],[1,0]])},tetragon_b:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,0]])},tetragon_l:function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[a,0]])},tetragon_bl:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[a,0]])},tetragon_br:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV),l=o.interpolate_b(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[1,l],[1,u],[a,0]])},tetragon_tr:function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate_b(n,i,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rb={path:[[1,l],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}}),o.polygons&&t.polygons.push([[1,l],[s,1],[a,1],[1,u]])},tetragon_tl:function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate_a(e,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[a,1],[0,l],[0,u],[s,1]])},tetragon_lr:function(t,e,n,i,r,o){var s=o.interpolate_a(e,r,o.minV,o.maxV),a=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate_b(n,i,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[1,u],[1,l]])},tetragon_tb:function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[l,0],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[l,0],[s,1],[a,1],[u,0]])},pentagon_tr:function(t,e,n,i,r,o){var s=o.interpolate(r,i,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[1,a],[1,0]])},pentagon_tl:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,0]])},pentagon_br:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,a],[s,0]])},pentagon_bl:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[1,1],[1,0],[a,0]])},pentagon_tr_rl:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate_b(n,i,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[1,u],[1,l]])},pentagon_rb_bt:function(t,e,n,i,r,o){var s=o.interpolate(n,i,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[u,0],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[l,1],[1,1],[1,s],[a,0],[u,0]])},pentagon_bl_lr:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[1,l],[1,0]])},pentagon_lt_tb:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_a(r,i,o.minV,o.maxV),u=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[l,0]])},pentagon_bl_tb:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[l,0],[0,s]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[u,0],[l,0]])},pentagon_lt_rl:function(t,e,n,i,r,o){var s=o.interpolate_a(e,r,o.minV,o.maxV),a=o.interpolate_b(e,r,o.minV,o.maxV),u=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[u,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[u,1],[1,1],[1,l]])},pentagon_tr_bt:function(t,e,n,i,r,o){var s=o.interpolate_a(r,i,o.minV,o.maxV),a=o.interpolate_b(r,i,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[l,0],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,1],[a,1],[1,u],[1,0],[l,0]])},pentagon_rb_lr:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_b(n,i,o.minV,o.maxV),u=o.interpolate_a(n,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,u],[l,0]])},hexagon_lt_tr:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate_a(r,i,o.minV,o.maxV),u=o.interpolate_b(r,i,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[1,l],[1,0]])},hexagon_bl_lt:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate(r,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[1,1],[1,0]])},hexagon_bl_rb:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,r,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},t.edges.rt={path:[[1,l],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[1,1],[1,l],[a,0]])},hexagon_tr_rb:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate_b(n,i,o.minV,o.maxV),l=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[1,u],[1,l],[s,0]])},hexagon_lt_rb:function(t,e,n,i,r,o){var s=o.interpolate(e,r,o.minV,o.maxV),a=o.interpolate(r,i,o.minV,o.maxV),u=o.interpolate(n,i,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,u],[l,0]])},hexagon_bl_tr:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV),u=o.interpolate(r,i,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,1],[u,1],[1,l],[1,0]])},heptagon_tr:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),h=o.interpolate(r,i,o.minV,o.maxV),c=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[1,1],[1,c],[a,0]])},heptagon_bl:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,r,o.minV,o.maxV),u=o.interpolate_a(r,i,o.minV,o.maxV),l=o.interpolate_b(r,i,o.minV,o.maxV),h=o.interpolate_b(n,i,o.minV,o.maxV),c=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[u,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[u,1],[l,1],[1,h],[1,c],[s,0]])},heptagon_tl:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,r,o.minV,o.maxV),l=o.interpolate(r,i,o.minV,o.maxV),h=o.interpolate_b(n,i,o.minV,o.maxV),c=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[l,1],[1,h],[1,c],[a,0]])},heptagon_br:function(t,e,n,i,r,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,r,o.minV,o.maxV),u=o.interpolate_b(e,r,o.minV,o.maxV),l=o.interpolate_a(r,i,o.minV,o.maxV),h=o.interpolate_b(r,i,o.minV,o.maxV),c=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[h,1],[1,c]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[h,1],[1,c],[1,0]])},octagon:function(t,e,n,i,r,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,r,o.minV,o.maxV),l=o.interpolate_b(e,r,o.minV,o.maxV),h=o.interpolate_a(r,i,o.minV,o.maxV),c=o.interpolate_b(r,i,o.minV,o.maxV),f=o.interpolate_b(n,i,o.minV,o.maxV),d=o.interpolate_a(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[c,1],[1,f]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,d],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[c,1],[1,f],[1,d],[a,0]])}};function oE(t,e,n,i,r,o){var s=(i+n+e+t)/4;return s>o?2:s<r?0:1}function ok(t,e,n,i){var r,o,s=0,a=t[n+1][e],u=t[n+1][e+1],l=t[n][e+1],h=t[n][e],c=i.minV,f=i.maxV;if(!(isNaN(h)||isNaN(l)||isNaN(u)||isNaN(a))){switch(s|=a<c?0:a>f?128:64,s|=u<c?0:u>f?32:16,s|=l<c?0:l>f?8:4,o=0,r={cval:s=+(s|=h<c?0:h>f?2:1),polygons:[],edges:{},x0:h,x1:l,x2:u,x3:a,x:e,y:n},s){case 85:ob.square(r,h,l,u,a,i);case 0:case 170:break;case 169:case 1:ob.triangle_bl(r,h,l,u,a,i);break;case 166:case 4:ob.triangle_br(r,h,l,u,a,i);break;case 154:case 16:ob.triangle_tr(r,h,l,u,a,i);break;case 106:case 64:ob.triangle_tl(r,h,l,u,a,i);break;case 168:case 2:ob.tetragon_bl(r,h,l,u,a,i);break;case 162:case 8:ob.tetragon_br(r,h,l,u,a,i);break;case 138:case 32:ob.tetragon_tr(r,h,l,u,a,i);break;case 42:case 128:ob.tetragon_tl(r,h,l,u,a,i);break;case 5:case 165:ob.tetragon_b(r,h,l,u,a,i);break;case 20:case 150:ob.tetragon_r(r,h,l,u,a,i);break;case 80:case 90:ob.tetragon_t(r,h,l,u,a,i);break;case 65:case 105:ob.tetragon_l(r,h,l,u,a,i);break;case 160:case 10:ob.tetragon_lr(r,h,l,u,a,i);break;case 130:case 40:ob.tetragon_tb(r,h,l,u,a,i);break;case 101:case 69:ob.pentagon_tr(r,h,l,u,a,i);break;case 149:case 21:ob.pentagon_tl(r,h,l,u,a,i);break;case 86:case 84:ob.pentagon_bl(r,h,l,u,a,i);break;case 89:case 81:ob.pentagon_br(r,h,l,u,a,i);break;case 96:case 74:ob.pentagon_tr_rl(r,h,l,u,a,i);break;case 24:case 146:ob.pentagon_rb_bt(r,h,l,u,a,i);break;case 6:case 164:ob.pentagon_bl_lr(r,h,l,u,a,i);break;case 129:case 41:ob.pentagon_lt_tb(r,h,l,u,a,i);break;case 66:case 104:ob.pentagon_bl_tb(r,h,l,u,a,i);break;case 144:case 26:ob.pentagon_lt_rl(r,h,l,u,a,i);break;case 36:case 134:ob.pentagon_tr_bt(r,h,l,u,a,i);break;case 9:case 161:ob.pentagon_rb_lr(r,h,l,u,a,i);break;case 37:case 133:ob.hexagon_lt_tr(r,h,l,u,a,i);break;case 148:case 22:ob.hexagon_bl_lt(r,h,l,u,a,i);break;case 82:case 88:ob.hexagon_bl_rb(r,h,l,u,a,i);break;case 73:case 97:ob.hexagon_tr_rb(r,h,l,u,a,i);break;case 145:case 25:ob.hexagon_lt_rb(r,h,l,u,a,i);break;case 70:case 100:ob.hexagon_bl_tr(r,h,l,u,a,i);break;case 17:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_bl(r,h,l,u,a,i),ob.triangle_tr(r,h,l,u,a,i)):ob.hexagon_lt_rb(r,h,l,u,a,i);break;case 68:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_tl(r,h,l,u,a,i),ob.triangle_br(r,h,l,u,a,i)):ob.hexagon_bl_tr(r,h,l,u,a,i);break;case 153:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_bl(r,h,l,u,a,i),ob.triangle_tr(r,h,l,u,a,i)):ob.hexagon_lt_rb(r,h,l,u,a,i);break;case 102:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_tl(r,h,l,u,a,i),ob.triangle_br(r,h,l,u,a,i)):ob.hexagon_bl_tr(r,h,l,u,a,i);break;case 152:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_tr(r,h,l,u,a,i),ob.tetragon_bl(r,h,l,u,a,i)):ob.heptagon_tr(r,h,l,u,a,i);break;case 137:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_bl(r,h,l,u,a,i),ob.tetragon_tr(r,h,l,u,a,i)):ob.heptagon_bl(r,h,l,u,a,i);break;case 98:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_tl(r,h,l,u,a,i),ob.tetragon_br(r,h,l,u,a,i)):ob.heptagon_tl(r,h,l,u,a,i);break;case 38:2===(o=oE(h,l,u,a,c,f))?(ob.triangle_br(r,h,l,u,a,i),ob.tetragon_tl(r,h,l,u,a,i)):ob.heptagon_br(r,h,l,u,a,i);break;case 18:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_tr(r,h,l,u,a,i),ob.tetragon_bl(r,h,l,u,a,i)):ob.heptagon_tr(r,h,l,u,a,i);break;case 33:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_bl(r,h,l,u,a,i),ob.tetragon_tr(r,h,l,u,a,i)):ob.heptagon_bl(r,h,l,u,a,i);break;case 72:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_tl(r,h,l,u,a,i),ob.tetragon_br(r,h,l,u,a,i)):ob.heptagon_tl(r,h,l,u,a,i);break;case 132:0===(o=oE(h,l,u,a,c,f))?(ob.triangle_br(r,h,l,u,a,i),ob.tetragon_tl(r,h,l,u,a,i)):ob.heptagon_br(r,h,l,u,a,i);break;case 136:0===(o=oE(h,l,u,a,c,f))?(ob.tetragon_tl(r,h,l,u,a,i),ob.tetragon_br(r,h,l,u,a,i)):1===o?ob.octagon(r,h,l,u,a,i):(ob.tetragon_bl(r,h,l,u,a,i),ob.tetragon_tr(r,h,l,u,a,i));break;case 34:0===(o=oE(h,l,u,a,c,f))?(ob.tetragon_bl(r,h,l,u,a,i),ob.tetragon_tr(r,h,l,u,a,i)):1===o?ob.octagon(r,h,l,u,a,i):(ob.tetragon_tl(r,h,l,u,a,i),ob.tetragon_br(r,h,l,u,a,i))}return r}}var ow=Object.defineProperty,oI=Object.getOwnPropertySymbols,oL=Object.prototype.hasOwnProperty,oP=Object.prototype.propertyIsEnumerable,oS=function(t,e,n){return e in t?ow(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},oM=function(t,e){for(var n in e||(e={}))oL.call(e,n)&&oS(t,n,e[n]);if(oI){var i,r=a(oI(e));try{for(r.s();!(i=r.n()).done;)n=i.value,oP.call(e,n)&&oS(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t},oN=Object.defineProperty,oT=Object.getOwnPropertySymbols,oC=Object.prototype.hasOwnProperty,oO=Object.prototype.propertyIsEnumerable,oR=function(t,e,n){return e in t?oN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},oA=function(t,e){for(var n in e||(e={}))oC.call(e,n)&&oR(t,n,e[n]);if(oT){var i,r=a(oT(e));try{for(r.s();!(i=r.n()).done;)n=i.value,oO.call(e,n)&&oR(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t};function oD(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tk(t,function(t,n){var i=n.geometry.coordinates;return t+tu(i[0],i[1],e)},0)}function oz(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.steps||64,s=oB(n),a=oB(i),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return M(iM(t,e,r).geometry.coordinates[0],u);for(var l=s<a?a:a+360,h=s,c=[],f=0,d=(l-s)/o;h<=l;)c.push(ta(t,e,h,r).geometry.coordinates),h=s+ ++f*d;return M(c,u)}function oB(t){var e=t%360;return e<0&&(e+=360),e}function oF(t,e,n,i){if(!X(i=i||{}))throw Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var s,a,u,l=r.length,h=0,c=0;c<r.length&&!(e>=h&&c===r.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(r[c]),M(o);a=ts(r[c],r[c-1])-180,u=ta(r[c],s,a,i),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=ts(r[c],r[c-1])-180,u=ta(r[c],s,a,i),o.push(u.geometry.coordinates)):o.push(r[c]),M(o);if(h>=e&&o.push(r[c]),c===r.length-1)return M(o);h+=tu(r[c],r[c+1],i)}if(h<e&&r.length===l)throw Error("Start position is beyond line");var f=r[r.length-1];return M([f,f])}function oq(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function oV(t,e){return t[0]*e[1]-e[0]*t[1]}function oG(t,e,n){var i=[],r=F(e,n),o=Q(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n,a,u,l,h=(n=o[e+1],a=Math.sqrt((t[0]-n[0])*(t[0]-n[0])+(t[1]-n[1])*(t[1]-n[1])),u=t[0]+r*(n[1]-t[1])/a,l=n[0]+r*(n[1]-t[1])/a,[[u,t[1]+r*(t[0]-n[0])/a],[l,n[1]+r*(t[0]-n[0])/a]]);if(i.push(h),e>0){var c=i[e-1],f=0!==oV(oq(h),oq(c))&&function(t,e){var n,i,r=t[0],o=oq(t),s=e[0],a=oq(e),u=oV(o,a);return i=[(n=oV([s[0]-r[0],s[1]-r[1]],a)/u)*o[0],n*o[1]],[r[0]+i[0],r[1]+i[1]]}(h,c);!1!==f&&(c[1]=f,h[0]=f),s.push(c[0]),e===o.length-2&&(s.push(h[0]),s.push(h[1]))}2===o.length&&(s.push(h[0]),s.push(h[1]))}}),M(s,t.properties)}function oZ(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(tu(t.slice(0,2),[i,n])>=tu(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var s=(e+i)/2;return[s-(r-n)/2,n,s+(r-n)/2,r]}function oj(t,e){if(!X(e=null!=e?e:{}))throw Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw Error("<geojson> is required");if("number"!=typeof n)throw Error("<precision> must be a number");if("number"!=typeof i)throw Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return tc(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)}),t}function oY(t,e){var n=[],i=eC();return tx(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var r=i.search(e);if(r.features.length){var o=oX(e,r);n=n.filter(function(t){return t.id!==o.id}),i.remove(o),tg(oU(o,e),function(t){n.push(t),i.insert(t)})}}else(n=oU(t,e).features).forEach(function(t){t.bbox||(t.bbox=oZ(tR(t)))}),i.load(T(n))}),T(n)}function oU(t,e){var n=[],i=Q(t)[0],r=Q(t)[t.geometry.coordinates.length-1];if(oH(i,J(e))||oH(r,J(e)))return T([t]);var o=eC(),s=eO(t);o.load(s);var a=o.search(e);if(!a.features.length)return T([t]);var u=oX(e,a),l=tv(s,function(t,i,r){var o=Q(i)[1],s=J(e);return r===u.id?(t.push(s),n.push(M(t)),oH(s,o)?[s]:[s,o]):(t.push(o),t)},[i]);return l.length>1&&n.push(M(l)),T(n)}function oX(t,e){if(!e.features.length)throw Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return tg(e,function(e){var r=eY(e,t).properties.dist;r<i&&(n=e,i=r)}),n}function oH(t,e){return t[0]===e[0]&&t[1]===e[1]}function oW(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var r=ti(t),o=r.coordinates,s=r.type;if(!o.length)throw Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=oK(o)),P([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(n&&(t=oK(t)),i){var e,r,o,s=(r=(e=tR(M(t)))[0],o=e[1],Math.abs(r-e[2])*Math.abs(o-e[3]));s>u?(a.unshift(t),u=s):a.push(t)}else a.push(t)}),P(a,e);default:throw Error("geometry type "+s+" is not supported")}}function oK(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1];return n===o&&i===s||t.push(e),t}function oJ(t){var e,n=0,i=a(t);try{for(i.s();!(e=i.n()).done;)n+=e.value}catch(t){i.e(t)}finally{i.f()}return n/t.length}var oQ=Object.defineProperty,o$=Object.defineProperties,o0=Object.getOwnPropertyDescriptors,o1=Object.getOwnPropertySymbols,o2=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,o4=function(t,e,n){return e in t?oQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},o8=function(t,e){for(var n in e||(e={}))o2.call(e,n)&&o4(t,n,e[n]);if(o1){var i,r=a(o1(e));try{for(r.s();!(i=r.n()).done;)n=i.value,o3.call(e,n)&&o4(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t},o6=function(t,e){return o$(t,o0(e))};function o5(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("targetPoint is required");if(!e)throw Error("points is required");var i=1/0,r=0;tg(e,function(e,o){var s=tu(t,e,n);s<i&&(r=o,i=s)});var o=iN(e.features[r]);return o6(o8({},o),{properties:o6(o8({},o.properties),{featureIndex:r,distanceToPoint:i})})}function o7(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=r.method)?n:"geodesic",s=null!=(i=r.units)?i:"kilometers";if(!t)throw Error("pt is required");if(Array.isArray(t)?t=w(t):"Point"===t.type?t=E(t):te(t,"Point","point"),!e)throw Error("line is required");Array.isArray(e)?e=M(e):"LineString"===e.type?e=E(e):te(e,"LineString","line");var a=1/0,u=t.geometry.coordinates;return tE(e,function(t){if(t){var e=function(t,e,n,i){if("geodesic"===i.method)return eY(M([e,n]).geometry,t,{units:"degrees"}).properties.dist;var r=[n[0]-e[0],n[1]-e[1]],o=o9([t[0]-e[0],t[1]-e[1]],r);if(o<=0)return r2(t,e,{units:"degrees"});var s=o9(r,r);if(s<=o)return r2(t,n,{units:"degrees"});var a=o/s;return r2(t,[e[0]+a*r[0],e[1]+a*r[1]],{units:"degrees"})}(u,t.geometry.coordinates[0],t.geometry.coordinates[1],{method:o});e<a&&(a=e)}}),j(a,"degrees",s)}function o9(t,e){return t[0]*e[0]+t[1]*e[1]}var st=Object.defineProperty,se=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,si=Object.prototype.propertyIsEnumerable,sr=function(t,e,n){return e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},so=function(t,e){for(var n in e||(e={}))sn.call(e,n)&&sr(t,n,e[n]);if(se){var i,r=a(se(e));try{for(r.s();!(i=r.n()).done;)n=i.value,si.call(e,n)&&sr(t,n,e[n])}catch(t){r.e(t)}finally{r.f()}}return t};function ss(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function sa(t,e){var n=[];return tg(t,function(t){var i=!1;if("Point"===t.geometry.type)t_(e,function(e){tV(t,e)&&(i=!0)}),i&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw Error("Input geometry must be a Point or MultiPoint");var r=[];t_(e,function(e){tc(t,function(t){tV(t,e)&&(i=!0,r.push(t))})}),i&&n.push(O(r,t.properties))}}),T(n)}function su(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0];return((i=r*(n[1]-e[1])-s*o)>0)-(i<0)||+i}function sl(t,e){return e.geometry.coordinates[0].every(function(e){return tV(w(e),t)})}var sh=s(function t(e){r(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1},[{key:"removeInnerEdge",value:function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})}},{key:"removeOuterEdge",value:function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})}},{key:"addOuterEdge",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return -1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=su(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:"addInnerEdge",value:function(t){this.innerEdges.push(t)}}],[{key:"buildId",value:function(t){return t.join(",")}}]),sc=function(){function t(e,n){r(this,t),this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return s(t,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return M([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(t){return su(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}])}(),sf=s(function t(){r(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0},[{key:"push",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:"get",value:function(t){return this.edges[t]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(t){this.edges.forEach(t)}},{key:"map",value:function(t){return this.edges.map(t)}},{key:"some",value:function(t){return this.edges.some(t)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var t=this,e=this.edges.reduce(function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e},0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=su(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0}},{key:"toMultiPoint",value:function(){return O(this.edges.map(function(t){return t.from.coordinates}))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=P([t])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=r6(this.toPolygon())}},{key:"inside",value:function(t){return tV(t,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(t,e){var n,i,r=t.getEnvelope();return e.forEach(function(e){var o,s,u,l,h=e.getEnvelope();if(i&&(n=i.getEnvelope()),o=h.geometry.coordinates[0].map(function(t){return t[0]}),s=h.geometry.coordinates[0].map(function(t){return t[1]}),u=r.geometry.coordinates[0].map(function(t){return t[0]}),l=r.geometry.coordinates[0].map(function(t){return t[1]}),(Math.max.apply(null,o)!==Math.max.apply(null,u)||Math.max.apply(null,s)!==Math.max.apply(null,l)||Math.min.apply(null,o)!==Math.min.apply(null,u)||Math.min.apply(null,s)!==Math.min.apply(null,l))&&sl(h,r)){var c,f,d=a(t.map(function(t){return t.from.coordinates}));try{for(d.s();!(f=d.n()).done;)(function(){var t=f.value;e.some(function(e){var n;return n=e.from.coordinates,t[0]===n[0]&&t[1]===n[1]})||(c=t)})()}catch(t){d.e(t)}finally{d.f()}c&&e.inside(w(c))&&(i&&!sl(n,h)||(i=e))}}),i}}]),sd=function(){function t(){r(this,t),this.edges=[],this.nodes={}}return s(t,[{key:"getNode",value:function(t){var e=sh.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new sh(t)),n}},{key:"addEdge",value:function(t,e){var n=new sc(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)}},{key:"deleteDangles",value:function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})}},{key:"_removeIfDangle",value:function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}}},{key:"deleteCutEdges",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})}},{key:"_computeNextCWEdges",value:function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})}},{key:"_computeNextCCWEdges",value:function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(i=l),u&&(i&&(i.next=u,i=void 0),n||(n=u)))}i&&(i.next=n)}},{key:"_findLabeledEdgeRings",value:function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do i.label=e,i=i.next;while(!n.isEqual(i))e++}}),t}},{key:"getEdgeRings",value:function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e}},{key:"_findIntersectionNodes",value:function(t){var e=[],n=t;do!function(){var i=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++i}),i>1&&e.push(n.from),n=n.next}();while(!t.isEqual(n))return e}},{key:"_findEdgeRing",value:function(t){var e=t,n=new sf;do n.push(e),e.ring=n,e=e.next;while(!t.isEqual(e))return n}},{key:"removeNode",value:function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]}},{key:"removeEdge",value:function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}],[{key:"fromGeoJson",value:function(e){!function(t){if(!t)throw Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw Error("Invalid input type '".concat(t.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(e);var n=new t;return tx(e,function(t){te(t,"LineString","Graph::fromGeoJson"),tf(t,function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e})}),n}}])}();function sp(t,e,n,i,r){for(var o=0;o<t.length;o++){var s=t[o],a=t[o+1];o===t.length-1&&(a=t[0]);var u=sg(s,a,e);n<=0&&u>0?0>sg(e,s,i)||(i=s):n>0&&u<=0&&(sg(e,s,r)>0||(r=s)),n=u}return[i,r]}function sg(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function sv(t){return s_(t,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function sy(t){return s_(t,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function s_(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(n=n||{}).mutate;if(!t)throw Error("geojson is required");return Array.isArray(t)&&U(t[0])?t="mercator"===e?sm(t):sx(t):(!0!==i&&(t=iN(t)),tc(t,function(t){var n="mercator"===e?sm(t):sx(t);t[0]=n[0],t[1]=n[1]})),t}function sm(t){var e,n=Math.PI/180,i=[6378137*(180>=Math.abs(t[0])?t[0]:t[0]-360*((e=t[0])<0?-1:+(e>0)))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return i[0]>20037508.342789244&&(i[0]=20037508.342789244),i[0]<-20037508.342789244&&(i[0]=-20037508.342789244),i[1]>20037508.342789244&&(i[1]=20037508.342789244),i[1]<-20037508.342789244&&(i[1]=-20037508.342789244),i}function sx(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}var sb=Object.freeze({__proto__:null,toMercator:sv,toWgs84:sy}),sE={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function sk(t){return sI(t),sw(t)}function sw(t){return Array.isArray(t)?sN(t):t&&t.bbox?sN(t.bbox):[360*sM(),180*sM()]}function sI(t){null!=t&&(Array.isArray(t)?H(t):null!=t.bbox&&H(t.bbox))}function sL(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sI(e.bbox),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(w(sw(e.bbox)));return T(n)}function sP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sI(e.bbox),null==t&&(t=1),void 0!==e.bbox&&null!==e.bbox||(e.bbox=[-180,-90,180,90]),U(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),U(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);var n=Math.min(Math.abs(e.bbox[0]-e.bbox[2])/2,Math.abs(e.bbox[1]-e.bbox[3])/2);if(e.max_radial_length>n)throw Error("max_radial_length is greater than the radius of the bbox");for(var i=[e.bbox[0]+e.max_radial_length,e.bbox[1]+e.max_radial_length,e.bbox[2]-e.max_radial_length,e.bbox[3]-e.max_radial_length],r=[],o=0;o<t;o++)!function(){var t,n=[],o=v(Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var i=Math.random();n.push([i*(e.max_radial_length||10)*Math.sin(t),i*(e.max_radial_length||10)*Math.cos(t)])}),n[n.length-1]=n[0],n=n.reverse().map((t=sw(i),function(e){return[e[0]+t[0],e[1]+t[1]]})),r.push(P([n]))}();return T(r)}function sS(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw Error("options is invalid");var n=e.bbox;sI(n);var i=e.num_vertices,r=e.max_length,o=e.max_rotation;null==t&&(t=1),(!U(i)||void 0===i||i<2)&&(i=10),U(r)&&void 0!==r||(r=1e-4),U(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[sw(n)],l=0;l<i-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*r;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(M(u))}return T(s)}function sM(){return Math.random()-.5}function sN(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var sT=Object.freeze({__proto__:null,randomLineString:sS,randomPoint:sL,randomPolygon:sP,randomPosition:sk});function sC(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return t_(t,function(t){sC(t,e)}),t;case"LineString":return sO(Q(t),e),t;case"Polygon":return sR(Q(t),e),t;case"MultiLineString":return Q(t).forEach(function(t){sO(t,e)}),t;case"MultiPolygon":return Q(t).forEach(function(t){sR(t,e)}),t;case"Point":case"MultiPoint":return t}}function sO(t,e){tq(t)===e&&t.reverse()}function sR(t,e){tq(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)tq(t[n])===e&&t[n].reverse()}function sA(t){var e=t%360;return e<0&&(e+=360),e}function sD(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i=n.origin||"centroid",r=n.mutate||!1;if(!t)throw Error("geojson required");if("number"!=typeof e||e<=0)throw Error("invalid factor");var o=Array.isArray(i)||"object"===_(i);return!0!==r&&(t=iN(t)),"FeatureCollection"!==t.type||o?sz(t,e,i):(tg(t,function(n,r){t.features[r]=sz(n,e,i)}),t)}function sz(t,e,n){var i="Point"===tr(t),r=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"===_(e))return J(e);var n=t.bbox?t.bbox:tR(t,{recompute:!0}),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return w([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return w([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return w([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return w([o,s]);case"center":return e9(t);case void 0:case null:case"centroid":return ih(t);default:throw Error("invalid origin")}}(t,n);return 1===e||i||(tc(t,function(t){var n=r2(r,t),i=tl(r,t),o=Q(r1(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),delete t.bbox),t}function sB(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var sF={search:function(t,e,n,i){t.cleanDirty();var r,o=(i=i||{}).heuristic||sF.heuristics.manhattan,s=null!=(r=i.closest)&&r,a=new sG(function(t){return t.f}),u=e;for(e.h=o(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return sB(l);l.closed=!0;for(var h=t.neighbors(l),c=0,f=h.length;c<f;++c){var d=h[c];if(!d.closed&&!d.isWall()){var p=l.g+d.getCost(l),g=d.visited;(!g||p<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||o(d,n),d.g=p,d.f=d.g+d.h,t.markDirty(d),s&&(d.h<u.h||d.h===u.h&&d.g<u.g)&&(u=d),g?a.rescoreElement(d):a.push(d))}}}return s?sB(u):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return+(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function sq(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new sV(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function sV(t,e,n){this.x=t,this.y=e,this.weight=n}function sG(t){this.content=[],this.scoreFunction=t}function sZ(t,e,n){if(t.length<=2)return t;var i,r,o,s=void 0!==e?e*e:1;return r=(i=t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)n=t[l],r=a,o=void 0,s=void 0,(o=(i=n)[0]-r[0])*o+(s=i[1]-r[1])*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,s)).length-1,o=[i[0]],function t(e,n,i,r,o){for(var s,a=r,u=n+1;u<i;u++){var l=function(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}(e[u],e[n],e[i]);l>a&&(s=u,a=l)}a>r&&(s-n>1&&t(e,n,s,r,o),o.push(e[s]),i-s>1&&t(e,s,i,r,o))}(i,0,r,s,o),o.push(i[r]),t=o}function sj(t,e,n){return t.map(function(t){if(t.length<4)throw Error("invalid polygon");for(var i,r=e,o=sZ(t,r,n);(i=o).length<3||3===i.length&&i[2][0]===i[0][0]&&i[2][1]===i[0][1];)o=sZ(t,r-=.01*r,n);return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o})}function sY(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}sq.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)sF.cleanNode(this.nodes[t])},sq.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)sF.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},sq.prototype.markDirty=function(t){this.dirtyNodes.push(t)},sq.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},sq.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},sV.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},sV.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},sV.prototype.isWall=function(){return 0===this.weight},sG.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(r=this.scoreFunction(u))<i&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?i:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var sU,sX={exports:{}},sH=eK(function(){if(sU)return sX.exports;function t(t,l,h){h=h||2;var d,g,v,y,_,m,x,b=l&&l.length,E=b?l[0]*h:t.length,k=e(t,0,E,h,!0),w=[];if(!k||k.next===k.prev)return w;if(b&&(k=function(t,r,a,u){var l,h,d,p=[];for(l=0,h=r.length;l<h;l++)(d=e(t,r[l]*u,l<h-1?r[l+1]*u:t.length,u,!1))===d.next&&(d.steiner=!0),p.push(function(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t)return n}(d));for(p.sort(i),l=0;l<p.length;l++)a=function(t,e){var i=function(t,e){var n,i,r,a=e,u=t.x,l=t.y,h=-1/0;do{if(l<=a.y&&l>=a.next.y&&a.next.y!==a.y){var f=a.x+(l-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(f<=u&&f>h&&(h=f,r=a.x<a.next.x?a:a.next,f===u))return r}a=a.next}while(a!==e)if(!r)return null;var d,p=r,g=r.x,v=r.y,y=1/0;a=r;do{u>=a.x&&a.x>=g&&u!==a.x&&o(l<v?u:h,l,g,v,l<v?h:u,l,a.x,a.y)&&(d=Math.abs(l-a.y)/(u-a.x),c(a,t)&&(d<y||d===y&&(a.x>r.x||a.x===r.x&&(n=r,i=a,0>s(n.prev,n,i.prev)&&0>s(i.next,n,n.next))))&&(r=a,y=d)),a=a.next}while(a!==p)return r}(t,e);if(!i)return e;var r=f(i,t);return n(r,r.next),n(i,i.next)}(p[l],a);return a}(t,l,k,h)),t.length>80*h){d=v=t[0],g=y=t[1];for(var I=h;I<E;I+=h)(_=t[I])<d&&(d=_),(m=t[I+1])<g&&(g=m),_>v&&(v=_),m>y&&(y=m);x=0!==(x=Math.max(v-d,y-g))?32767/x:0}return function t(e,i,l,h,d,g,v){if(e){!v&&g&&function(t,e,n,i){var o=t;do 0===o.z&&(o.z=r(o.x,o.y,e,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t)o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,i,r,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;a>0||u>0&&i;)0!==a&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1)}(o)}(e,h,d,g);for(var y,_,m=e;e.prev!==e.next;)if(y=e.prev,_=e.next,g?function(t,e,n,i){var a=t.prev,u=t.next;if(s(a,t,u)>=0)return!1;for(var l=a.x,h=t.x,c=u.x,f=a.y,d=t.y,p=u.y,g=l<h?l<c?l:c:h<c?h:c,v=f<d?f<p?f:p:d<p?d:p,y=l>h?l>c?l:c:h>c?h:c,_=f>d?f>p?f:p:d>p?d:p,m=r(g,v,e,n,i),x=r(y,_,e,n,i),b=t.prevZ,E=t.nextZ;b&&b.z>=m&&E&&E.z<=x;){if(b.x>=g&&b.x<=y&&b.y>=v&&b.y<=_&&b!==a&&b!==u&&o(l,f,h,d,c,p,b.x,b.y)&&s(b.prev,b,b.next)>=0||(b=b.prevZ,E.x>=g&&E.x<=y&&E.y>=v&&E.y<=_&&E!==a&&E!==u&&o(l,f,h,d,c,p,E.x,E.y)&&s(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;b&&b.z>=m;){if(b.x>=g&&b.x<=y&&b.y>=v&&b.y<=_&&b!==a&&b!==u&&o(l,f,h,d,c,p,b.x,b.y)&&s(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;E&&E.z<=x;){if(E.x>=g&&E.x<=y&&E.y>=v&&E.y<=_&&E!==a&&E!==u&&o(l,f,h,d,c,p,E.x,E.y)&&s(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}(e,h,d,g):function(t){var e=t.prev,n=t.next;if(s(e,t,n)>=0)return!1;for(var i=e.x,r=t.x,a=n.x,u=e.y,l=t.y,h=n.y,c=i<r?i<a?i:a:r<a?r:a,f=u<l?u<h?u:h:l<h?l:h,d=i>r?i>a?i:a:r>a?r:a,p=u>l?u>h?u:h:l>h?l:h,g=n.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=f&&g.y<=p&&o(i,u,r,l,a,h,g.x,g.y)&&s(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(e))i.push(y.i/l|0),i.push(e.i/l|0),i.push(_.i/l|0),p(e),e=_.next,m=_.next;else if((e=_)===m){v?1===v?t(e=function(t,e,i){var r=t;do{var o=r.prev,s=r.next.next;!a(o,s)&&u(o,r,r.next,s)&&c(o,s)&&c(s,o)&&(e.push(o.i/i|0),e.push(r.i/i|0),e.push(s.i/i|0),p(r),p(r.next),r=t=s),r=r.next}while(r!==t)return n(r)}(n(e),i,l),i,l,h,d,g,2):2===v&&function(e,i,r,o,l,h){var d=e;do{for(var p,g,v=d.next.next;v!==d.prev;){if(d.i!==v.i&&(p=d,g=v,p.next.i!==g.i&&p.prev.i!==g.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&u(n,n.next,t,e))return!0;n=n.next}while(n!==t)return!1}(p,g)&&(c(p,g)&&c(g,p)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t)return i}(p,g)&&(s(p.prev,p,g.prev)||s(p,g.prev,g))||a(p,g)&&s(p.prev,p,p.next)>0&&s(g.prev,g,g.next)>0))){var y=f(d,v);return d=n(d,d.next),y=n(y,y.next),t(d,i,r,o,l,h,0),void t(y,i,r,o,l,h,0)}v=v.next}d=d.next}while(d!==e)}(e,i,l,h,d,g):t(n(e),i,l,h,d,g,1);break}}}(k,w,h,d,g,x,0),w}function e(t,e,n,i,r){var o,s;if(r===v(t,e,n,i)>0)for(o=e;o<n;o+=i)s=d(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=d(o,t[o],t[o+1],s);return s&&a(s,s.next)&&(p(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!a(i,i.next)&&0!==s(i.prev,i,i.next))i=i.next;else{if(p(i),(i=e=i.prev)===i.next)break;n=!0}while(n||i!==e)return e}function i(t,e){return t.x-e.x}function r(t,e,n,i,r){return(t=0x55555555&((t=0x33333333&((t=0xf0f0f0f&((t=0xff00ff&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=0x55555555&((e=0x33333333&((e=0xf0f0f0f&((e=0xff00ff&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function o(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function s(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function a(t,e){return t.x===e.x&&t.y===e.y}function u(t,e,n,i){var r=h(s(t,e,n)),o=h(s(t,e,i)),a=h(s(n,i,t)),u=h(s(n,i,e));return r!==o&&a!==u||!(0!==r||!l(t,n,e))||!(0!==o||!l(t,i,e))||!(0!==a||!l(n,t,i))||!(0!==u||!l(n,e,i))}function l(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function h(t){return t>0?1:t<0?-1:0}function c(t,e){return 0>s(t.prev,t,t.next)?s(t,e,t.next)>=0&&s(t,t.prev,e)>=0:0>s(t,e,t.prev)||0>s(t,t.next,e)}function f(t,e){var n=new g(t.i,t.x,t.y),i=new g(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function d(t,e,n,i){var r=new g(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function p(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function g(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}return sU=1,sX.exports=t,sX.exports.default=t,t.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(v(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(v(t,l,h,n))}var c=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,d=i[a+1]*n,p=i[a+2]*n;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},sX.exports}());function sW(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=sH(e.vertices,e.holes,2),i=[],r=[];n.forEach(function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<r.length;o+=3){var s=r.slice(o,o+3);s.push(r[o]),i.push(P([s]))}return i}function sK(t,e){if(!t||!e||t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!sK(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}var sJ=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},sQ=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function s$(t,e){if(void 0===e&&(e=!0),3!=t.length)throw Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function s0(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!s0(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function s1(t,e){return(t%e+e)%e}function s2(t){return function(){return t}}function s3(t){return t[0]}function s4(t){return t[1]}function s8(){this._=null}function s6(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function s5(t,e){var n=e.R,i=e.U;i?i.L===e?i.L=n:i.R=n:t._=n,n.U=i,e.U=n,e.R=n.L,e.R&&(e.R.U=e),n.L=e}function s7(t,e){var n=e.L,i=e.U;i?i.L===e?i.L=n:i.R=n:t._=n,n.U=i,e.U=n,e.L=n.R,e.L&&(e.L.U=e),n.R=e}function s9(t){for(;t.L;)t=t.L;return t}function at(t,e,n,i){var r=[null,null],o=ay.push(r)-1;return r.left=t,r.right=e,n&&an(r,t,e,n),i&&an(r,e,t,i),ag[t.index].halfedges.push(o),ag[e.index].halfedges.push(o),r}function ae(t,e,n){var i=[e,n];return i.left=t,i}function an(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function ai(t,e){return e[+(e.left!==t.site)]}s8.prototype={constructor:s8,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=s9(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(s5(this,n),n=(t=n).U),n.C=!1,i.C=!0,s7(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(s7(this,n),n=(t=n).U),n.C=!1,i.C=!0,s5(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?s9(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,s5(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,s7(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,s5(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,s7(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,s5(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,s7(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C)t&&(t.C=!1)}}}};var ar,ao=[];function as(){s6(this),this.x=this.y=this.arc=this.site=this.cy=null}function aa(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r[0],a=r[1],u=i[0]-s,l=i[1]-a,h=o[0]-s,c=o[1]-a,f=2*(u*c-l*h);if(!(f>=-a_)){var d=u*u+l*l,p=h*h+c*c,g=(c*d-l*p)/f,v=(u*p-h*d)/f,y=ao.pop()||new as;y.arc=t,y.site=r,y.x=g+s,y.y=(y.cy=v+a)+Math.sqrt(g*g+v*v),t.circle=y;for(var _=null,m=av._;m;)if(y.y<m.y||y.y===m.y&&y.x<=m.x){if(!m.L){_=m.P;break}m=m.L}else{if(!m.R){_=m;break}m=m.R}av.insert(_,y),_||(ar=y)}}}}function au(t){var e=t.circle;e&&(e.P||(ar=e.N),av.remove(e),ao.push(e),s6(e),t.circle=null)}var al=[];function ah(){s6(this),this.edge=this.site=this.circle=null}function ac(t){var e=al.pop()||new ah;return e.site=t,e}function af(t){au(t),ap.remove(t),al.push(t),s6(t)}function ad(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-i,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+r-o/2)))/c+i:(i+a)/2}var ap,ag,av,ay,a_=1e-12;function am(t,e){return e[1]-t[1]||e[0]-t[0]}function ax(t,e){var n,i,r,o=t.sort(am).pop();for(ay=[],ag=Array(t.length),ap=new s8,av=new s8;;)if(r=ar,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(function(t){for(var e,n,i,r,o=t[0],s=t[1],a=ap._;a;)if((i=ad(a,s)-o)>1e-6)a=a.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return ad(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(a,s))>1e-6)){i>-1e-6?(e=a.P,n=a):r>-1e-6?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}ag[t.index]={site:t,halfedges:[]};var u=ac(t);if(ap.insert(e,u),e||n){if(e===n)return au(e),n=ac(e.site),ap.insert(u,n),u.edge=n.edge=at(e.site,u.site),aa(e),void aa(n);if(n){au(e),au(n);var l=e.site,h=l[0],c=l[1],f=t[0]-h,d=t[1]-c,p=n.site,g=p[0]-h,v=p[1]-c,y=2*(f*v-d*g),_=f*f+d*d,m=g*g+v*v,x=[(v*_-d*m)/y+h,(f*m-g*_)/y+c];an(n.edge,l,p,x),u.edge=at(l,t,null,x),n.edge=at(t,p,null,x),aa(e),aa(n)}else u.edge=at(e.site,u.site)}}(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;!function(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t];af(t);for(var u=o;u.circle&&1e-6>Math.abs(n-u.circle.x)&&1e-6>Math.abs(i-u.circle.cy);)o=u.P,a.unshift(u),af(u),u=o;a.unshift(u),au(u);for(var l=s;l.circle&&1e-6>Math.abs(n-l.circle.x)&&1e-6>Math.abs(i-l.circle.cy);)s=l.N,a.push(l),af(l),l=s;a.push(l),au(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],an(l.edge,u.site,l.site,r);u=a[0],(l=a[c-1]).edge=at(u.site,l.site,null,r),aa(u),aa(l)}(r.arc)}if(function(){for(var t,e,n,i,r=0,o=ag.length;r<o;++r)if((t=ag[r])&&(i=(e=t.halfedges).length)){var s=Array(i),a=Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=function(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}(t,ay[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];(function(t,e,n,i){for(var r,o=ay.length;o--;)(function(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],f=l[1],d=h[0],p=h[1],g=(c+d)/2;if(p===f){if(g<e||g>=i)return;if(c>d){if(u){if(u[1]>=r)return}else u=[g,n];o=[g,r]}else{if(u){if(u[1]<n)return}else u=[g,r];o=[g,n]}}else if(a=(f+p)/2-(s=(c-d)/(p-f))*g,s<-1||s>1){if(c>d){if(u){if(u[1]>=r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(u){if(u[1]<n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}}else if(f<p){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0})(r=ay[o],t,e,n,i)&&function(t,e,n,i,r){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,f=a[0]-u,d=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=i-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>h&&(h=o)}if(o=r-l,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*f,l+h*d]),c<1&&(t[1]=[u+c*f,l+c*d]),!0)}}}}}(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>1e-6||Math.abs(r[0][1]-r[1][1])>1e-6)||delete ay[o]})(s,a,u,l),function(t,e,n,i){var r,o,s,a,u,l,h,c,f,d,p,g,v=ag.length,y=!0;for(r=0;r<v;++r)if(o=ag[r]){for(s=o.site,a=(u=o.halfedges).length;a--;)ay[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)p=(_=o,d=(m=ay[u[a]])[+(m.left===_.site)])[0],g=d[1],c=(h=ai(o,ay[u[++a%l]]))[0],f=h[1],(Math.abs(p-c)>1e-6||Math.abs(g-f)>1e-6)&&(u.splice(a,0,ay.push(ae(s,d,1e-6>Math.abs(p-t)&&i-g>1e-6?[t,1e-6>Math.abs(c-t)?f:i]:1e-6>Math.abs(g-i)&&n-p>1e-6?[1e-6>Math.abs(f-i)?c:n,i]:1e-6>Math.abs(p-n)&&g-e>1e-6?[n,1e-6>Math.abs(c-n)?f:e]:1e-6>Math.abs(g-e)&&p-t>1e-6?[1e-6>Math.abs(f-e)?c:t,e]:null))-1),++l);l&&(y=!1)}if(y){var _,m,x,b,E,k=1/0;for(r=0,y=null;r<v;++r)(o=ag[r])&&(E=(x=(s=o.site)[0]-t)*x+(b=s[1]-e)*b)<k&&(k=E,y=o);if(y){var w=[t,e],I=[t,i],P=[n,i],S=[n,e];y.halfedges.push(ay.push(ae(s=y.site,w,I))-1,ay.push(ae(s,I,P))-1,ay.push(ae(s,P,S))-1,ay.push(ae(s,S,w))-1)}}for(r=0;r<v;++r)(o=ag[r])&&(o.halfedges.length||delete ag[r])}(s,a,u,l)}this.edges=ay,this.cells=ag,ap=av=ay=ag=null}ax.prototype={constructor:ax,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return ai(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,u=n.site,l=-1,h=e[r[o-1]],c=h.left===u?h.right:h.left;++l<o;)s=c,c=(h=e[r[l]]).left===u?h.right:h.left,s&&c&&i<s.index&&i<c.index&&(a=c,(u[0]-a[0])*(s[1]-u[1])-(u[0]-s[0])*(a[1]-u[1])<0)&&t.push([u.data,s.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var u=t-r.site[0],l=e-r.site[1],h=u*u+l*l;do r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var u=t-a[0],l=e-a[1],c=u*u+l*l;c<h&&(h=c,s=a.index)}});while(null!==s)return o._found=i,null==n||h<=n*n?r.site:null}},t.along=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ti(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var s=e-r;if(s){var a=ts(i[o],i[o-1])-180;return ta(i[o],s,a,n)}return w(i[o])}r+=tu(i[o],i[o+1],n)}return w(i[i.length-1])},t.angle=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!X(i))throw Error("options is invalid");if(!t)throw Error("startPoint is required");if(!e)throw Error("midPoint is required");if(!n)throw Error("endPoint is required");var r=q(!0!==i.mercator?ts(e,t):tl(e,t)),o=q(!0!==i.mercator?ts(e,n):tl(e,n));o<r&&(o+=360);var s=o-r;return!0===i.explementary?360-s:s},t.applyFilter=iB,t.area=tM,t.areaFactors=b,t.azimuthToBearing=V,t.bbox=tR,t.bboxClip=function(t,e){var n=ti(t),i=n.type,r="Feature"===t.type?t.properties:{},o=n.coordinates;switch(i){case"LineString":case"MultiLineString":var s=[];return"LineString"===i&&(o=[o]),o.forEach(function(t){!function(t,e,n){var i,r,o,s,a,u=t.length,l=tD(t[0],e),h=[];for(n||(n=[]),i=1;i<u;i++){for(s=t[i-1],r=o=tD(a=t[i],e);;){if(!(l|r)){h.push(s),r!==o?(h.push(a),i<u-1&&(n.push(h),h=[])):i===u-1&&h.push(a);break}if(l&r)break;l?l=tD(s=tA(s,a,l,e),e):r=tD(a=tA(s,a,r,e),e)}l=o}h.length&&n.push(h)}(t,e,s)}),1===s.length?M(s[0],r):C(s,r);case"Polygon":return P(tz(o,e),r);case"MultiPolygon":return R(o.map(function(t){return tz(t,e)}),r);default:throw Error("geometry "+i+" not supported")}},t.bboxPolygon=tB,t.bearing=ts,t.bearingToAzimuth=q,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resolution||1e4,i=e.sharpness||.85,r=[],o=ti(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new tF({duration:n,points:o,sharpness:i}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&r.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),M(r,e.properties)},t.booleanClockwise=tq,t.booleanConcave=function(t){var e=ti(t).coordinates;if(e[0].length<=4)return!1;for(var n=!1,i=e[0].length-1,r=0;r<i;r++){var o=e[0][(r+2)%i][0]-e[0][(r+1)%i][0],s=e[0][(r+2)%i][1]-e[0][(r+1)%i][1],a=e[0][r][0]-e[0][(r+1)%i][0],u=o*(e[0][r][1]-e[0][(r+1)%i][1])-s*a;if(0===r)n=u>0;else if(n!==u>0)return!0}return!1},t.booleanContains=function(t,e){var n=ti(t),i=ti(e),r=n.type,o=i.type,s=n.coordinates,u=i.coordinates;switch(r){case"Point":if("Point"===o)return tY(s,u);throw Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(tY(t.coordinates[n],e.coordinates)){i=!0;break}return i}(n,i);case"MultiPoint":return function(t,e){var n,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,s=!1,u=a(t.coordinates);try{for(u.s();!(r=u.n()).done;)if(tY(o,r.value)){s=!0;break}}catch(t){u.e(t)}finally{u.f()}if(!s)return!1}}catch(t){i.e(t)}finally{i.f()}return!0}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return tG(i,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){var n,i=!1,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(tG({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(i=!0),!tG({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){r.e(t)}finally{r.f()}return i}(n,i);case"MultiPoint":return function(t,e){var n,i=!1,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(tG(o,t,{ignoreEndVertices:!0})&&(i=!0),!tG(o,t))return!1}}catch(t){r.e(t)}finally{r.f()}return!!i}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return tV(i,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n,i,r=!1,o=0;if(!tj(tR(t),tR(e)))return!1;for(;o<e.coordinates.length-1;o++)if(tV({type:"Point",coordinates:(n=e.coordinates[o],i=e.coordinates[o+1],[(n[0]+i[0])/2,(n[1]+i[1])/2])},t,{ignoreBoundary:!0})){r=!0;break}return r}(n,i);case"Polygon":return tZ(n,i);case"MultiPoint":return function(t,e){var n,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;)if(!tV(n.value,t,{ignoreBoundary:!0}))return!1}catch(t){i.e(t)}finally{i.f()}return!0}(n,i);default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return n.coordinates.some(function(t){return tZ({type:"Polygon",coordinates:t},i)});throw Error("feature2 "+o+" geometry not supported");default:throw Error("feature1 "+r+" geometry not supported")}},t.booleanCrosses=t6,t.booleanDisjoint=ee,t.booleanEqual=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw Error("precision must be a positive number");return ti(t).type===ti(e).type&&el(ef(t),ef(e),{precision:n})},t.booleanIntersects=ev,t.booleanOverlap=function(t,e){var n=ti(t),i=ti(e),r=n.type,o=i.type;if("MultiPoint"===r&&"MultiPoint"!==o||("LineString"===r||"MultiLineString"===r)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===r||"MultiPolygon"===r)&&"Polygon"!==o&&"MultiPolygon"!==o)throw Error("features must be of the same type");if("Point"===r)throw Error("Point geometry not supported");if(el(t,e,{precision:6}))return!1;var s=0;switch(r){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<i.coordinates.length;u++){var l=n.coordinates[a],h=i.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":tE(t,function(t){tE(e,function(e){e$(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":tE(t,function(t){tE(e,function(e){t3(t,e).features.length&&s++})})}return s>0},t.booleanParallel=function(t,e){if(!t)throw Error("line1 is required");if(!e)throw Error("line2 is required");if("LineString"!==e1(t,"line1"))throw Error("line1 must be a LineString");if("LineString"!==e1(e,"line2"))throw Error("line2 must be a LineString");for(var n=eO(ef(t)).features,i=eO(ef(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!function(t,e){var n=q(tl(t[0],t[1])),i=q(tl(e[0],e[1]));return n===i||(i-n)%180==0}(o,i[r].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=tV,t.booleanPointOnLine=tG,t.booleanTouches=function(t,e){var n=ti(t),i=ti(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"LineString":return e2(n,i);case"MultiLineString":for(var s=!1,a=0;a<i.coordinates.length;a++)e2(n,{type:"LineString",coordinates:i.coordinates[a]})&&(s=!0);return s;case"Polygon":for(var u=0;u<i.coordinates.length;u++)if(tG(n,{type:"LineString",coordinates:i.coordinates[u]}))return!0;return!1;case"MultiPolygon":for(u=0;u<i.coordinates.length;u++)for(a=0;a<i.coordinates[u].length;a++)if(tG(n,{type:"LineString",coordinates:i.coordinates[u][a]}))return!0;return!1;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||e2({type:"Point",coordinates:n.coordinates[u]},i)&&(s=!0),tG({type:"Point",coordinates:n.coordinates[u]},i,{ignoreEndVertices:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<i.coordinates.length;a++)if(s||e2({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[a]})&&(s=!0),tG({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||tG({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[u]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<i.coordinates.length;a++)if(s||tG({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[a][0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[u]},{type:"Polygon",coordinates:i.coordinates[a]},{ignoreBoundary:!0}))return!1;return s;default:throw Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return e2(i,n);case"MultiPoint":for(s=!1,u=0;u<i.coordinates.length;u++)if(s||e2({type:"Point",coordinates:i.coordinates[u]},n)&&(s=!0),tG({type:"Point",coordinates:i.coordinates[u]},n,{ignoreEndVertices:!0}))return!1;return s;case"LineString":var l=!1;if(e2({type:"Point",coordinates:n.coordinates[0]},i)&&(l=!0),e2({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},i)&&(l=!0),!1===l)return!1;for(u=0;u<n.coordinates.length;u++)if(tG({type:"Point",coordinates:n.coordinates[u]},i,{ignoreEndVertices:!0}))return!1;return l;case"MultiLineString":for(l=!1,u=0;u<i.coordinates.length;u++)for(e2({type:"Point",coordinates:n.coordinates[0]},{type:"LineString",coordinates:i.coordinates[u]})&&(l=!0),e2({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},{type:"LineString",coordinates:i.coordinates[u]})&&(l=!0),a=0;a<n.coordinates[u].length;a++)if(tG({type:"Point",coordinates:n.coordinates[a]},{type:"LineString",coordinates:i.coordinates[u]},{ignoreEndVertices:!0}))return!1;return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||tG({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[u]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++){for(a=0;a<i.coordinates.length;a++)s||tG({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:i.coordinates[a][0]})&&(s=!0);if(tV({type:"Point",coordinates:n.coordinates[u]},i,{ignoreBoundary:!0}))return!1}return s;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(e2(i,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<i.coordinates.length;a++)if(s||e2({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]})&&(s=!0),tG({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"LineString":for(l=!1,u=0;u<n.coordinates.length;u++)for(e2({type:"Point",coordinates:n.coordinates[u][0]},i)&&(l=!0),e2({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},i)&&(l=!0),a=0;a<i.coordinates.length;a++)if(tG({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[u]},{ignoreEndVertices:!0}))return!1;return l;case"MultiLineString":for(l=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<i.coordinates.length;a++){e2({type:"Point",coordinates:n.coordinates[u][0]},{type:"LineString",coordinates:i.coordinates[a]})&&(l=!0),e2({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},{type:"LineString",coordinates:i.coordinates[a]})&&(l=!0);for(var h=0;h<n.coordinates[u].length;h++)if(tG({type:"Point",coordinates:n.coordinates[u][h]},{type:"LineString",coordinates:i.coordinates[a]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<n.coordinates.length;a++)if(s||tG({type:"Point",coordinates:n.coordinates[u][a]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[u][a]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<i.coordinates[0].length;u++)for(a=0;a<n.coordinates.length;a++)for(h=0;h<n.coordinates[a].length;h++)if(s||tG({type:"Point",coordinates:n.coordinates[a][h]},{type:"LineString",coordinates:i.coordinates[0][u]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[a][h]},{type:"Polygon",coordinates:[i.coordinates[0][u]]},{ignoreBoundary:!0}))return!1;return s;default:throw Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(tG(i,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":case"LineString":for(s=!1,u=0;u<i.coordinates.length;u++)if(s||tG({type:"Point",coordinates:i.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:i.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<i.coordinates.length;u++)for(a=0;a<i.coordinates[u].length;a++)if(s||tG({type:"Point",coordinates:i.coordinates[u][a]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:i.coordinates[u][a]},n,{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)if(s||tG({type:"Point",coordinates:n.coordinates[0][u]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[0][u]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<i.coordinates[0].length;u++)for(a=0;a<n.coordinates[0].length;a++)if(s||tG({type:"Point",coordinates:n.coordinates[0][a]},{type:"LineString",coordinates:i.coordinates[0][u]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[0][a]},{type:"Polygon",coordinates:i.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;default:throw Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(u=0;u<n.coordinates[0].length;u++)if(tG(i,{type:"LineString",coordinates:n.coordinates[0][u]}))return!0;return!1;case"MultiPoint":case"LineString":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<i.coordinates.length;a++)if(s||tG({type:"Point",coordinates:i.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(s=!0),tV({type:"Point",coordinates:i.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<i.coordinates.length;a++)for(h=0;h<i.coordinates[a].length;h++)if(s||tG({type:"Point",coordinates:i.coordinates[a][h]},{type:"LineString",coordinates:n.coordinates[u][0]})&&(s=!0),tV({type:"Point",coordinates:i.coordinates[a][h]},{type:"Polygon",coordinates:[n.coordinates[u][0]]},{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<n.coordinates[0][u].length;a++)if(s||tG({type:"Point",coordinates:n.coordinates[0][u][a]},{type:"LineString",coordinates:i.coordinates[0]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[0][u][a]},i,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<i.coordinates[0].length;a++)for(h=0;h<n.coordinates[0].length;h++)if(s||tG({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"LineString",coordinates:i.coordinates[0][a]})&&(s=!0),tV({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"Polygon",coordinates:i.coordinates[0][a]},{ignoreBoundary:!0}))return!1;return s;default:throw Error("feature2 "+o+" geometry not supported")}default:throw Error("feature1 "+r+" geometry not supported")}},t.booleanValid=function(t){if(!t.type)return!1;var e=ti(t),n=e.type,i=e.coordinates;switch(n){case"Point":return i.length>1;case"MultiPoint":for(var r=0;r<i.length;r++)if(i[r].length<2)return!1;return!0;case"LineString":case"MultiLineString":if(i.length<2)return!1;for(r=0;r<i.length;r++)if(i[r].length<2)return!1;return!0;case"Polygon":for(r=0;r<e.coordinates.length;r++)if(i[r].length<4||!e4(i[r])||e8(i[r])||r>0&&t3(P([i[0]]),P([i[r]])).features.length>1)return!1;return!0;case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)for(var o=e.coordinates[r],s=0;s<o.length;s++)if(o[s].length<4||!e4(o[s])||e8(o[s])||0===s&&!function(t,e,n){for(var i=P(t),r=n+1;r<e.length;r++)if(!ee(i,P(e[r]))&&t6(i,M(e[r][0])))return!1;return!0}(o,e.coordinates,r)||s>0&&t3(P([o[0]]),P([o[s]])).features.length>1)return!1;return!0;default:return!1}},t.booleanWithin=e6,t.buffer=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw Error("geojson is required");if("object"!==_(n))throw Error("options must be an object");if("number"!=typeof r)throw Error("steps must be an number");if(void 0===e)throw Error("radius is required");if(r<=0)throw Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return t_(t,function(t){var n=iu(t,e,i,r);n&&o.push(n)}),T(o);case"FeatureCollection":return tg(t,function(t){var n=iu(t,e,i,r);n&&tg(n,function(t){t&&o.push(t)})}),T(o)}return iu(t,e,i,r)},t.center=e9,t.centerMean=il,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw Error("options is invalid");var n=e.counter||10;if(!U(n))throw Error("counter must be a number");var i=e.weight,r=il(t,{weight:e.weight}),o=T([]);tg(t,function(t){var e;o.features.push(ih(t,{properties:{weight:null==(e=t.properties)?void 0:e[i]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return function t(e,n,i,r,o){var s=r.tolerance||.001,a=0,u=0,l=0,h=0;if(tg(i,function(t){var n,i=null==(n=t.properties)?void 0:n.weight,r=null==i?1:i;if(!U(r=Number(r)))throw Error("weight value must be a number");if(r>0){h+=1;var o=r*tu(t,e);0===o&&(o=1);var s=r/o;a+=t.geometry.coordinates[0]*s,u+=t.geometry.coordinates[1]*s,l+=s}}),h<1)throw Error("no features to measure");var c=a/l,f=u/l;return 1===h||0===o||Math.abs(c-n[0])<s&&Math.abs(f-n[1])<s?w([c,f],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([c,f]),t([c,f],e,i,r,o-1))}(r.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(tr(e)){case"Point":return w(J(e),n.properties);case"Polygon":var i=[];tc(e,function(t){i.push(t)});var r,o,s,a,u,l,h,c,f=ih(e,{properties:n.properties}),d=f.geometry.coordinates,p=0,g=0,v=0,y=i.map(function(t){return[t[0]-d[0],t[1]-d[1]]});for(r=0;r<i.length-1;r++)a=(o=y[r])[0],l=o[1],u=(s=y[r+1])[0],v+=c=a*(h=s[1])-u*l,p+=(a+u)*c,g+=(l+h)*c;if(0===v)return f;var _=1/(.5*v*6);return w([d[0]+_*p,d[1]+_*g],n.properties);default:var m=iS(e);return m?t(m,{properties:n.properties}):ih(e,{properties:n.properties})}},t.centroid=ih,t.circle=iM,t.cleanCoords=ef,t.clone=iN,t.cloneProperties=iC,t.clusterEach=iA,t.clusterReduce=iD,t.clusters=iX,t.clustersDbscan=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==n.mutate&&(t=iN(t));var i=n.minPoints||3,r=F(e,n.units),o=new em(t.features.length),s=t.features.map(function(t){return!1}),a=t.features.map(function(t){return!1}),u=t.features.map(function(t){return!1}),l=t.features.map(function(t){return -1});o.load(t.features.map(function(t,e){var n=g(t.geometry.coordinates,2),i=n[0],r=n[1];return{minX:i,minY:r,maxX:i,maxY:r,index:e}}));var h=function(n){var i=t.features[n],s=g(i.geometry.coordinates,2),a=s[0],u=s[1],l=Math.max(u-r,-90),h=Math.min(u+r,90),c=l<0&&h>0?r:Math.abs(l)<Math.abs(h)?r/Math.cos(Z(h)):r/Math.cos(Z(l)),f=Math.max(a-c,-360),d=Math.min(a+c,360);return o.search({minX:f,minY:l,maxX:d,maxY:h}).filter(function(n){var r=n.index;return tu(i,t.features[r],{units:"kilometers"})<=e})},c=0;return t.features.forEach(function(t,e){if(!s[e]){var n=h(e);if(n.length>=i){var r=c;c++,s[e]=!0,function(t,e){for(var n=0;n<e.length;n++){var r=e[n].index;if(!s[r]){s[r]=!0;var o=h(r);o.length>=i&&e.push.apply(e,v(o))}a[r]||(a[r]=!0,l[r]=t)}}(r,n)}else u[e]=!0}}),t.features.forEach(function(e,n){var i=t.features[n];i.properties||(i.properties={}),l[n]>=0?(i.properties.dbscan=u[n]?"edge":"core",i.properties.cluster=l[n]):i.properties.dbscan="noise"}),t},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=iN(t));var i=ty(t),r=i.slice(0,e.numberOfClusters),o=iW(i,e.numberOfClusters,r),s={};return o.centroids.forEach(function(t,e){s[e]=t}),tg(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},t.collect=function(t,e,n,i){var r=new em(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[n]}});return r.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=tR(t),n=r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){tV([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[i]=o}),t},t.collectionOf=tn,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return tg(t,function(t){var n,i,r,o;switch(null==(o=t.geometry)?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,v(t.geometry.coordinates)),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,v(t.geometry.coordinates)),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,v(t.geometry.coordinates)),e.MultiPolygon.properties.push(t.properties)}}),T(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return E({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},t.concave=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.maxEdge||1/0,o=iK((e=[],n={},tg(t,function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,i)||(e.push(t),n[i]=!0)}}),T(e)));if(o.features=o.features.filter(function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=tu(e,n,i),a=tu(n,o,i),u=tu(e,o,i);return s<=r&&a<=r&&u<=r}),o.features.length<1)return null;var s=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(i=i||{}))throw Error("options is invalid");var r=i.mutate;if("FeatureCollection"!==tr(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==r&&void 0!==r||(t=iN(t));var o=(e={},tx(t,function(t){e[t.geometry.type]=!0}),1===(n=Object.keys(e)).length?n[0]:null);if(!o)throw Error("geojson must be homogenous");var s=t;switch(o){case"LineString":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==tr(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==n&&void 0!==n||(t=iN(t));var i=[],r=tI(t,function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=rr(i[0]),s=rr(i[i.length-1]),a=rr(r[0]),u=rr(r[r.length-1]);if(o===u)n=r.concat(i.slice(1));else if(a===s)n=i.concat(r.slice(1));else if(o===a)n=i.slice(1).reverse().concat(r);else{if(s!==u)return null;n=i.concat(r.reverse().slice(1))}return M(n)}(t,e)||(i.push(t),e)});return r&&i.push(r),i.length?1===i.length?i[0]:C(i.map(function(t){return t.coordinates})):null}(s,i);case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==tr(t))throw Error("geojson must be a FeatureCollection");if(!t.features.length)throw Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=iN(t));var n=[];tx(t,function(t){n.push(t.geometry)});var i=function(t,e){var n=function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;function o(t){null!=t&&i2.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>i&&(i=o),s<n&&(n=s),s>r&&(r=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)o(t[h]);return i>=e&&r>=n?[e,n,i,r]:void 0}(t=function(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(rt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===n.type?rt:re)(n);return i}(t)),i=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,i=0,r=s.length;i<r;++i)for(e=s[i];e=e.next;)++u;for(i=0,r=a.length;i<r;++i)for(n=a[i];n=n.next;)++u;var l=i3(2*u*1.4,i7,i4),h=t.arcs=[];for(i=0,r=s.length;i<r;++i){e=s[i];do c(e);while(e=e.next)}for(i=0,r=a.length;i<r;++i)if((n=a[i]).next)do c(n);while(n=n.next)else(function(t){var e,n,i,r,s;if(n=l.get(o[t[0]]))for(r=0,s=n.length;r<s;++r){if(f(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(d(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=l.get(e=o[t[0]+p(t)]))for(r=0,s=n.length;r<s;++r){if(f(i=n[r],t))return t[0]=i[0],void(t[1]=i[1]);if(d(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):l.set(e,[t]),h.push(t)})(n);function c(t){var e,n,i,r,s,a,u,c;if(i=l.get(e=o[t[0]])){for(u=0,c=i.length;u<c;++u)if(function(t,e){var n=t[0],i=e[0],r=t[1];if(n-r!=i-e[1])return!1;for(;n<=r;++n,++i)if(!i4(o[n],o[i]))return!1;return!0}(r=i[u],t))return t[0]=r[0],void(t[1]=r[1])}if(s=l.get(n=o[t[1]])){for(u=0,c=s.length;u<c;++u)if(function(t,e){var n=t[0],i=e[0],r=t[1],s=e[1];if(n-r!=i-s)return!1;for(;n<=r;++n,--s)if(!i4(o[n],o[s]))return!1;return!0}(a=s[u],t))return t[1]=a[0],void(t[0]=a[1])}i?i.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),h.push(t)}function f(t,e){var n=t[0],i=e[0],r=t[1]-n;if(r!==e[1]-i)return!1;for(var s=p(t),a=p(e),u=0;u<r;++u)if(!i4(o[n+(u+s)%r],o[i+(u+a)%r]))return!1;return!0}function d(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],a=r-n;if(a!==s-i)return!1;for(var u=p(t),l=a-p(e),h=0;h<a;++h)if(!i4(o[n+(h+u)%a],o[s-(h+l)%a]))return!1;return!0}function p(t){for(var e=t[0],n=t[1],i=e,r=i,s=o[i];++i<n;){var a=o[i];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(r=i,s=a)}return r-e}return t}(function(t){var e,n,i,r,o=function(t){var e,n,i,r,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=i3(1.4*o.length,b,E,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,i=o.length;n<i;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),d=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var p=s[e],g=p[0],v=p[1];for(i=u[g],r=u[++g],++d,f[i]=1;++g<=v;)x(e,i,i=r,r=u[g]);++d,f[r]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],_=y[0]+1,m=y[1];for(x(e,u[m-1],i=u[_-1],r=u[_]);++_<=m;)x(e,i,i=r,r=u[_])}function x(t,e,n,i){if(l[n]!==t){l[n]=t;var r=h[n];if(r>=0){var o=c[n];r===e&&o===i||r===i&&o===e||(++d,f[n]=1)}else h[n]=e,c[n]=i}}function b(t){return i7(o[t])}function E(t,e){return i4(o[t],o[e])}l=h=c=null;var k,w=function(t,e,n,i,r){3==arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r;return{add:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=r;){if(n(u,i))return!0;if(++l>=t)throw Error("full hashset");u=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,u=o[a],l=0;u!=r;){if(n(u,i))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*d,i7,i4);for(e=0,n=o.length;e<n;++e)f[k=u[e]]&&w.add(o[k]);return w}(t),s=t.coordinates,a=t.lines,u=t.rings;for(i=0,r=a.length;i<r;++i)for(var l=a[i],h=l[0],c=l[1];++h<c;)o.has(s[h])&&(n={0:h,1:l[1]},l[1]=h,l=l.next=n);for(i=0,r=u.length;i<r;++i)for(var f=u[i],d=f[0],p=d,g=f[1],v=o.has(s[d]);++p<g;)o.has(s[p])&&(v?(n={0:p,1:f[1]},f[1]=p,f=f.next=n):(e=g-p,i9(s,d,g),i9(s,d,d+e),i9(s,d+e,g),s[g]=s[d],v=!0,p=d));return t}(function(t){var e=-1,n=[],i=[],r=[];function o(t){t&&i2.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var i=0,o=t.length;i<o;++i)r[++e]=t[i];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)r[++e]=t[n];var s={0:e-o+1,1:e};return i.push(s),s}function l(t){return t.map(u)}for(var h in t)o(t[h]);return{type:"Topology",coordinates:r,lines:n,rings:i,objects:t}}(t))),r=i.coordinates,o=i3(1.4*i.arcs.length,rn,ri);function s(t){t&&i2.call(a,t.type)&&a[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map(function(t,e){return o.set(t,e),r.slice(t[0],t[1]+1)}),delete i.coordinates,r=null;var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function u(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next)return e}function l(t){return t.map(u)}for(var h in t)s(t[h]);return i}({geoms:A(n).geometry});return function(t){return i0(t,i1.apply(this,arguments))}(i,i.objects.geoms.geometries)}(s,i);default:throw Error(o+" is not supported")}}(o);return 1===s.coordinates.length&&(s.coordinates=s.coordinates[0],s.type="Polygon"),E(s)},t.containsNumber=$,t.convertArea=Y,t.convertLength=j,t.convex=iS,t.coordAll=ty,t.coordEach=tc,t.coordReduce=tf,t.createBins=iz,t.degreesToRadians=Z,t.destination=ta,t.difference=function(t){var e=[];if(t_(t,function(t){e.push(t.coordinates)}),e.length<2)throw Error("Must have at least two features");var n=t.features[0].properties||{},i=rJ.apply(rQ,[e[0]].concat(v(e.slice(1))));return 0===i.length?null:1===i.length?P(i[0],n):R(i,n)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(e=e||{}))throw Error("options is invalid");var n=e.propertyName;tn(t,"Polygon","dissolve");var i=[];if(!n)return r$(R(rW.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var r={};tg(t,function(t){t.properties&&(Object.prototype.hasOwnProperty.call(r,t.properties[n])||(r[t.properties[n]]=[]),r[t.properties[n]].push(t))});for(var o=Object.keys(r),s=0;s<o.length;s++){var a=R(rW.apply(null,r[o[s]].map(function(t){return t.geometry.coordinates})));a&&a.properties&&(a.properties[n]=o[s],i.push(a))}return r$(T(i))},t.distance=tu,t.distanceWeight=r0,t.earthRadius=6371008.8,t.ellipse=r4,t.envelope=r6,t.explode=r5,t.factors=x,t.feature=E,t.featureCollection=T,t.featureEach=tg,t.featureOf=te,t.featureReduce=tv,t.filterProperties=iq,t.findPoint=tP,t.findSegment=tL,t.flatten=r$,t.flattenEach=tx,t.flattenReduce=tb,t.flip=function(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=null!=(n=e.mutate)&&n;if(!t)throw Error("geojson is required");return!1!==i&&void 0!==i||(t=iN(t)),tc(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.geojsonRbush=eC,t.geojsonType=tt,t.geomEach=t_,t.geomReduce=tm,t.geometry=k,t.geometryCollection=A,t.getCluster=iR,t.getCoord=J,t.getCoords=Q,t.getGeom=ti,t.getType=tr,t.greatCircle=function(t,e,n){if("object"!==_(n=n||{}))throw Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;if(t=J(t),e=J(e),i=i||{},r=r||100,t[0]===e[0]&&t[1]===e[1]){var s=Array(r);return s.fill([t[0],t[1]]),M(s,i)}return o=o||10,new oi({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},t.helpers=K,t.hexGrid=oo,t.interpolate=function(t,e,n){if("object"!==_(n=n||{}))throw Error("options is invalid");var i,r=n.gridType,o=n.property,s=n.weight,a=n.bbox;if(!t)throw Error("points is required");if(tn(t,"Point","input must contain Points"),!e)throw Error("cellSize is required");if(void 0!==s&&"number"!=typeof s)throw Error("weight must be a number");switch(o=o||"elevation",r=r||"square",s=s||1,H(a=null!=a?a:tR(t)),r){case"point":case"points":i=os(a,e,n);break;case"square":case"squares":i=ou(a,e,n);break;case"hex":case"hexes":i=oo(a,e,n);break;case"triangle":case"triangles":i=ol(a,e,n);break;default:throw Error("invalid gridType")}var u=[];return tg(i,function(e){var i=0,a=0;tg(t,function(t){var u,l=tu("point"===r?e:ih(e),t,n);if(void 0!==o&&(u=t.properties[o]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw Error("zValue is missing");0===l&&(i=u);var h=1/Math.pow(l,s);a+=h,i+=h*u});var l=iN(e);l.properties[o]=i/a,u.push(l)}),T(u)},t.intersect=or,t.invariant=to,t.isNumber=U,t.isObject=X,t.isobands=function(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i,r,o,s,a,l,h,c,f,d,p=n.zProperty||"elevation",g=n.commonProperties||{},v=n.breaksProperties||[];if(tn(t,"Point","Input must contain Points"),!e)throw Error("breaks is required");if(!Array.isArray(e))throw Error("breaks is not an Array");if(!X(g))throw Error("commonProperties is not an Object");if(!Array.isArray(v))throw Error("breaksProperties is not an Array");var y=function(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=e.zProperty||"elevation",r=e.flip,o=e.flags;tn(t,"Point","input must contain Points");for(var s=(n={},tg(t,function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return Q(t)[0]-Q(e)[0]})}).sort(function(t,e){return r?Q(t[0])[1]-Q(e[0])[1]:Q(e[0])[1]-Q(t[0])[1]})),a=[],u=0;u<s.length;u++){for(var l=s[u],h=[],c=0;c<l.length;c++){var f=l[c];f.properties[i]?h.push(f.properties[i]):h.push(0),!0===o&&(f.properties.matrixPosition=[u,c])}a.push(h)}return a}(t,{zProperty:p,flip:!0}),m=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=P([e[i].lrCoordinates]),s=i+1;s<e.length;s++)!e[s].grouped&&function(t,e){for(var n=r5(t),i=0;i<n.features.length;i++)if(!tV(n.features[i],e))return!1;return!0}(P([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(r)}return n}(function(t){var e=t.map(function(t){return{ring:t,area:tM(P([t]))}});return e.sort(function(t,e){return e.area-t.area}),e.map(function(t){return t.ring})}(function(t,e,n,i){var r,o,s,a=!1,u=null,l=null,h=null,c=null,f=!1,d=[],p=[],g=[];if(!t)throw Error("data is required");if(null==e)throw Error("lowerBound is required");if(null==n)throw Error("bandWidth is required");if(s=function(t){var e,n,i,r,o;for(r=new op,t=t||{},o=Object.keys(r),e=0;e<o.length;e++)null!=(i=t[n=o[e]])&&(r[n]=i);return r.polygons_full=!r.polygons,r.interpolate=oc,r.interpolate_a=of,r.interpolate_b=od,r}(void 0),t instanceof om)u=t,l=t.root,h=t.data,s.noQuadTree||(a=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(f=!0,s.noQuadTree||(a=!0),r=0;r<e.length;r++)if(isNaN(+e[r]))throw Error("lowerBound["+r+"] is not a number");if(Array.isArray(n)){if(e.length!==n.length)throw Error("lowerBound and bandWidth have unequal lengths");for(r=0;r<n.length;r++)if(isNaN(+n[r]))throw Error("bandWidth["+r+"] is not a number")}else{if(isNaN(+n))throw Error("bandWidth must be a number");for(d=[],r=0;r<e.length;r++)d.push(n);n=d}}else{if(isNaN(+e))throw Error("lowerBound must be a number");if(e=[e],isNaN(+n))throw Error("bandWidth must be a number");n=[n]}return a&&!l&&(l=(u=new om(h)).root,h=u.data),s.verbose&&(s.polygons?console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"):console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),f&&console.log("MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band")),e.forEach(function(t,e){if(p=[],s.minV=t,s.maxV=t+n[e],s.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+n[e])+"]"),s.polygons){if(a)l.cellsInBand(s.minV,s.maxV,!0).forEach(function(t){p=p.concat(og(ok(h,t.x,t.y,s),t.x,t.y,s))});else for(o=0;o<h.length-1;++o)for(r=0;r<h[0].length-1;++r)p=p.concat(og(ok(h,r,o,s),r,o,s))}else{var i,u,d,v,y,m,x,b,E,k,w,I,P,S,M,N,T,C,O,R,A,D,z,B,F,q;for(c=[],r=0;r<h[0].length-1;++r)c[r]=[];if(a)l.cellsInBand(s.minV,s.maxV,!1).forEach(function(t){c[t.x][t.y]=ok(h,t.x,t.y,s)});else for(r=0;r<h[0].length-1;++r)for(o=0;o<h.length-1;++o)c[r][o]=ok(h,r,o,s);i=h,u=c,O=[],R=i.length-1,A=i[0].length-1,D=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],z=[0,-1,0,1],B=[-1,0,1,0],F=["bl","lb","lt","tl","tr","rt","rb","br"],q={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0},function(t,e,n){var i,r,o,s,a;for(i=!0,r=t[0].length,o=t.length,a=0;a<o;a++)if(t[a][0]<e||t[a][0]>n||t[a][r-1]<e||t[a][r-1]>n){i=!1;break}if(i&&(t[o-1][0]<e||t[o-1][0]>n||t[o-1][r-1]<e||t[o-1][r-1]>n)&&(i=!1),i){for(s=0;s<r-1;s++)if(t[0][s]<e||t[0][s]>n||t[o-1][s]<e||t[o-1][s]>n){i=!1;break}}return i}(i,s.minV,s.maxV)&&(s.linearRing?O.push([[0,0],[0,R],[A,R],[A,0],[0,0]]):O.push([[0,0],[0,R],[A,R],[A,0]])),u.forEach(function(t,e){t.forEach(function(t,n){for(d=null,y=0;y<8;y++)if(d=F[y],"object"===_(t.edges[d])){for(v=[],m=t.edges[d],E=d,k=e,w=n,I=!1,P=[e+m.path[0][0],n+m.path[0][1]],v.push(P);!I&&"object"===_((S=u[k][w]).edges[E]);)if(m=S.edges[E],delete S.edges[E],(T=m.path[1])[0]+=k,T[1]+=w,v.push(T),E=m.move.enter,k+=m.move.x,w+=m.move.y,void 0===u[k]||void 0===u[k][w]){if(M=0,N=0,k===A)k--,M=0;else if(k<0)k++,M=2;else if(w===R)w--,M=3;else{if(!(w<0))throw Error("Left the grid somewhere in the interior!");w++,M=1}if(k===e&&w===n&&M===q[d]){I=!0,E=d;break}for(;;){if(C=!1,N>4)throw Error("Direction change counter overflow! This should never happen!");if(void 0!==u[k]&&void 0!==u[k][w]){for(S=u[k][w],x=0;x<D[M].length;x++)if(b=D[M][x],"object"===_(S.edges[b])){m=S.edges[b],v.push(ov(k,w,M,m.path)),E=b,C=!0;break}}if(C)break;if(v.push(oy(k,w,M)),w+=B[M],void 0!==u[k+=z[M]]&&void 0!==u[k][w]||(0===M&&w<0||1===M&&k<0||2===M&&w===R||3===M&&k===A)&&(k-=z[M],w-=B[M],M=(M+1)%4,N++),k===e&&w===n&&M===q[d]){I=!0,E=d;break}}}s.linearRing&&(v[v.length-1][0]!==P[0]||v[v.length-1][1]!==P[1])&&v.push(P),O.push(v)}})}),p=O}f?g.push(p):g=p,"function"==typeof s.successCallback&&s.successCallback(g,t,n[e])}),g}(t,o,s-o)));i.push(u({groupedRings:a},n,o+"-"+s))}return i}(y,e,p);return i=m,o=(r=tR(t))[2]-r[0],s=r[3]-r[1],a=r[0],l=r[1],h=y[0].length-1,c=y.length-1,f=o/h,d=s/c,T((m=i.map(function(t){return t.groupedRings=t.groupedRings.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0]*f+a,t[1]*d+l]})})}),t})).map(function(t,e){if(v[e]&&!X(v[e]))throw Error("Each mappedProperty is required to be an Object");var n=oM(oM({},g),v[e]);return n[p]=t[p],R(t.groupedRings,n)}))},t.isolines=function(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i,r,o,s,a,u,l,h,c,f,d,p=n.zProperty||"elevation",g=n.commonProperties||{},v=n.breaksProperties||[];if(tn(t,"Point","Input must contain Points"),!e)throw Error("breaks is required");if(!Array.isArray(e))throw Error("breaks must be an Array");if(!X(g))throw Error("commonProperties must be an Object");if(!Array.isArray(v))throw Error("breaksProperties must be an Array");var y=function(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=e.zProperty||"elevation",r=e.flip,o=e.flags;tn(t,"Point","input must contain Points");for(var s=(n={},tg(t,function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return Q(t)[0]-Q(e)[0]})}).sort(function(t,e){return r?Q(t[0])[1]-Q(e[0])[1]:Q(e[0])[1]-Q(t[0])[1]})),a=[],u=0;u<s.length;u++){for(var l=s[u],h=[],c=0;c<l.length;c++){var f=l[c];f.properties[i]?h.push(f.properties[i]):h.push(0),!0===o&&(f.properties.matrixPosition=[u,c])}a.push(h)}return a}(t,{zProperty:p,flip:!0});return T((i=function(t,e,n,i,r){for(var o=[],s=0;s<e.length;s++){var a=+e[s],u=oA(oA({},i),r[s]);u[n]=a;var l=C(function(t,e,n){var i,r,o,s=!1,a=!1,u=null,l=null,h=null,c=null,f=null,d=[];if(!t)throw Error("data is required");if(null==e)throw Error("threshold is required");if(n&&"object"!==_(n))throw Error("options must be an object");if(i=function(t){var e,n,i,r,o;for(r=new op,t=t||{},o=Object.keys(r),e=0;e<o.length;e++)null!=(i=t[n=o[e]])&&(r[n]=i);return r.polygons_full=!r.polygons,r.interpolate=oh,r}(n),t instanceof om)u=t,l=t.root,h=t.data,i.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(a=!0,i.noQuadTree||(s=!0),r=0;r<e.length;r++)if(isNaN(+e[r]))throw Error("threshold["+r+"] is not a number")}else{if(isNaN(+e))throw Error("threshold must be a number or array of numbers");e=[e]}return s&&!l&&(l=(u=new om(h)).root,h=u.data),i.verbose&&(i.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),a&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach(function(t,e){if(f=[],i.threshold=t,i.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),i.polygons){if(s)l.cellsBelowThreshold(i.threshold,!0).forEach(function(t){f=f.concat(og(ox(h,t.x,t.y,i),t.x,t.y,i))});else for(o=0;o<h.length-1;++o)for(e=0;e<h[0].length-1;++e)f=f.concat(og(ox(h,e,o,i),e,o,i))}else{var n,r,u,p,g,v,y,m,x,b,E,k,w,I,P,S,M,N,T,C,O,R,A,D;for(c=[],e=0;e<h[0].length-1;++e)c[e]=[];if(s)l.cellsBelowThreshold(i.threshold,!1).forEach(function(t){c[t.x][t.y]=ox(h,t.x,t.y,i)});else for(e=0;e<h[0].length-1;++e)for(o=0;o<h.length-1;++o)c[e][o]=ox(h,e,o,i);n=h,r=c,N=[],T=n.length-1,C=n[0].length-1,O=["right","bottom","left","top"],R=[0,-1,0,1],A=[-1,0,1,0],D={bottom:1,left:2,top:3,right:0},i.noFrame||function(t,e){var n,i,r,o,s;for(n=!0,i=t[0].length,r=t.length,s=0;s<r;s++)if(t[s][0]>=e||t[s][i-1]>=e){n=!1;break}if(n&&(t[r-1][0]>=e||t[r-1][i-1]>=e)&&(n=!1),n){for(o=0;o<i-1;o++)if(t[0][o]>=e||t[r-1][o]>e){n=!1;break}}return n}(n,i.threshold)&&(i.linearRing?N.push([[0,0],[0,T],[C,T],[C,0],[0,0]]):N.push([[0,0],[0,T],[C,T],[C,0]])),r.forEach(function(t,e){t.forEach(function(t,n){for(u=null,p=0;p<4;p++)if(u=O[p],"object"===_(t.edges[u])){for(y=[],g=t.edges[u],m=u,x=e,b=n,E=!1,k=[e+g.path[0][0],n+g.path[0][1]],y.push(k);!E&&"object"===_((v=r[x][b]).edges[m]);)if(g=v.edges[m],delete v.edges[m],(w=g.path[1])[0]+=x,w[1]+=b,y.push(w),m=g.move.enter,x+=g.move.x,b+=g.move.y,void 0===r[x]||void 0===r[x][b]){if(!i.linearRing)break;if(I=0,P=0,x===C?(x--,I=0):x<0?(x++,I=2):b===T?(b--,I=3):b<0&&(b++,I=1),x===e&&b===n&&I===D[u]){E=!0,m=u;break}for(;;){if(S=!1,P>4)throw Error("Direction change counter overflow! This should never happen!");if(void 0!==r[x]&&void 0!==r[x][b]&&(v=r[x][b],M=O[I],"object"===_(v.edges[M]))){g=v.edges[M],y.push(ov(x,b,I,g.path)),m=M,S=!0;break}if(S)break;if(y.push(oy(x,b,I)),b+=A[I],void 0!==r[x+=R[I]]&&void 0!==r[x][b]||(0===I&&b<0||1===I&&x<0||2===I&&b===T||3===I&&x===C)&&(x-=R[I],b-=A[I],I=(I+1)%4,P++),x===e&&b===n&&I===D[u]){E=!0,m=u;break}}}i.linearRing&&(y[y.length-1][0]!==k[0]||y[y.length-1][1]!==k[1])&&y.push(k),N.push(y)}})}),f=N}a?d.push(f):d=f,"function"==typeof i.successCallback&&i.successCallback(d,t)}),d}(t,a,{linearRing:!1,noFrame:!0}),u);o.push(l)}return o}(y,e,p,g,v),o=(r=tR(t))[2]-r[0],s=r[3]-r[1],a=r[0],u=r[1],l=y[0].length-1,h=y.length-1,c=o/l,f=s/h,d=function(t){t[0]=t[0]*c+a,t[1]=t[1]*f+u},i.forEach(function(t){tc(t,d)}),i))},t.kinks=function(t){var e,n,i,r={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)n=[i.coordinates];else if("MultiLineString"===i.type)n=i.coordinates;else if("MultiPolygon"===i.type)n=(e=[]).concat.apply(e,v(i.coordinates));else{if("Polygon"!==i.type)throw Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");n=i.coordinates}return n.forEach(function(t){n.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++)if(t!==e||1!==Math.abs(n-i)&&(0!==n||i!==t.length-2||t[n][0]!==t[t.length-1][0]||t[n][1]!==t[t.length-1][1])){var o=function(t,e,n,i,r,o,s,a){var u,l,h,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(l=e-o)-(i-e)*(h=t-r),l=((s-r)*l-(a-o)*h)/u,h=c/u,f.x=t+l*(n-t),f.y=e+l*(i-e),l>=0&&l<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(w([o[0],o[1]]))}})}),r},t.length=oD,t.lengthToDegrees=F,t.lengthToRadians=B,t.lineArc=oz,t.lineChunk=function(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw Error("geojson is required");if(e<=0)throw Error("segmentLength must be greater than 0");var o=[];return tx(t,function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=oD(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)i(oF(t,e*s,e*(s+1),{units:n}),s)}(t,e,i,function(t){o.push(t)})}),T(o)},t.lineEach=tw,t.lineIntersect=t3,t.lineOffset=function(t,e,n){if(!X(n=n||{}))throw Error("options is invalid");var i=n.units;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("distance is required");var r=tr(t),o=t.properties;switch(r){case"LineString":return oG(t,e,i);case"MultiLineString":var s=[];return tx(t,function(t){s.push(oG(t,e,i).geometry.coordinates)}),C(s,o);default:throw Error("geometry "+r+" is not supported")}},t.lineOverlap=e$,t.lineReduce=tI,t.lineSegment=eO,t.lineSlice=function(t,e,n){var i=Q(n);if("LineString"!==tr(n))throw Error("line must be a LineString");for(var r,o=eY(n,t),s=eY(n,e),a=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=r[0].properties.index+1;u<r[1].properties.index+1;u++)a.push(i[u]);return a.push(r[1].geometry.coordinates),M(a,n.properties)},t.lineSliceAlong=oF,t.lineSplit=function(t,e){if(!t)throw Error("line is required");if(!e)throw Error("splitter is required");var n=tr(t),i=tr(e);if("LineString"!==n)throw Error("line must be LineString");if("FeatureCollection"===i)throw Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw Error("splitter cannot be a GeometryCollection");var r=oj(e,{precision:7});switch(i){case"Point":return oU(t,r);case"MultiPoint":return oY(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return oY(t,t3(t,r,{ignoreSelfIntersections:!0}))}},t.lineString=M,t.lineStrings=N,t.lineToPolygon=function(t){var e,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.properties,s=null==(e=r.autoComplete)||e,a=null==(n=r.orderCoords)||n;if(null!=(i=r.mutate)&&i||(t=iN(t)),"FeatureCollection"===t.type){var u=[];return t.features.forEach(function(t){u.push(Q(oW(t,{},s,a)))}),R(u,o)}return oW(t,o,s,a)},t.mask=function(t,e,n){var i,r,o,s=null!=(o=null==n?void 0:n.mutate)&&o,a=e;e&&!1===s&&(a=iN(e));var u=(r=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],(i=a)&&(r="Feature"===i.type?i.geometry.coordinates:i.coordinates),P(r));return("FeatureCollection"===t.type?R(2===t.features.length?rW(t.features[0].geometry.coordinates,t.features[1].geometry.coordinates):rW.apply(rQ,t.features.map(function(t){return t.geometry.coordinates}))):"Feature"===t.type?R(rW(t.geometry.coordinates)):R(rW(t.coordinates))).geometry.coordinates.forEach(function(t){u.geometry.coordinates.push(t[0])}),u},t.meta=tS,t.midpoint=function(t,e){return ta(t,tu(t,e)/2,ts(t,e))},t.moranIndex=function(t,e){var n,i,r=e.inputField,o=e.threshold||1e5,s=e.p||2,u=null!=(n=e.binary)&&n,l=r0(t,{alpha:e.alpha||-1,binary:u,p:s,standardization:null==(i=e.standardization)||i,threshold:o}),h=[];tg(t,function(t){var e=t.properties||{};h.push(e[r])});for(var c=oJ(h),f=function(t){var e,n=oJ(t),i=0,r=a(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;i+=Math.pow(o-n,2)}}catch(t){r.e(t)}finally{r.f()}return i/t.length}(h),d=0,p=0,g=0,v=0,y=l.length,_=0;_<y;_++){for(var m=0,x=0;x<y;x++)d+=l[_][x]*(h[_]-c)*(h[x]-c),p+=l[_][x],g+=Math.pow(l[_][x]+l[x][_],2),m+=l[_][x]+l[x][_];v+=Math.pow(m,2)}var b=d/p/f,E=-1/(y-1),k=Math.sqrt((y*y*(g*=.5)-y*v+p*p*3)/((y-1)*(y+1)*(p*p))-E*E);return{expectedMoranIndex:E,moranIndex:b,stdNorm:k,zNorm:(b-E)/k}},t.multiLineString=C,t.multiPoint=O,t.multiPolygon=R,t.nearestNeighborAnalysis=function(t,e){var n=(e=e||{}).studyArea||tB(tR(t)),i=e.properties||{},r=e.units||"kilometers",o=[];tg(t,function(t){o.push(ih(t))});var s=o.length,a=o.map(function(t,e){return tu(t,o5(t,T(o.filter(function(t,n){return n!==e}))).geometry.coordinates,{units:r})}).reduce(function(t,e){return t+e},0)/s,u=s/Y(tM(n),"meters",r),l=1/(2*Math.sqrt(u)),h=.26136/Math.sqrt(s*u);return i.nearestNeighborAnalysis={units:r,arealUnits:r+"",observedMeanDistance:a,expectedMeanDistance:l,nearestNeighborIndex:a/l,numberOfPoints:s,zScore:(a-l)/h},n.properties=i,n},t.nearestPoint=o5,t.nearestPointOnLine=eY,t.nearestPointToLine=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.units,r=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return t_(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw Error("points must be a Point Collection")}}(t);if(!o.features.length)throw Error("points must contain features");if(!e)throw Error("line is required");if("LineString"!==tr(e))throw Error("line must be a LineString");var s=1/0,a=null;return tg(o,function(t){var n=o7(t,e,{units:i});n<s&&(s=n,a=t)}),a&&(a.properties=so(so(so({},{dist:s}),a.properties),r)),a},t.planepoint=function(t,e){var n=J(t),i=ti(e).coordinates[0];if(i.length<4)throw Error("OuterRing of a Polygon must have 4 or more Positions.");var r="Feature"===e.type&&e.properties||{},o=r.a,s=r.b,a=r.c,u=n[0],l=n[1],h=i[0][0],c=i[0][1],f=void 0!==o?o:i[0][2],d=i[1][0],p=i[1][1],g=void 0!==s?s:i[1][2],v=i[2][0],y=i[2][1],_=void 0!==a?a:i[2][2];return(_*(u-h)*(l-p)+f*(u-d)*(l-y)+g*(u-v)*(l-c)-g*(u-h)*(l-y)-_*(u-d)*(l-c)-f*(u-v)*(l-p))/((u-h)*(l-p)+(u-d)*(l-y)+(u-v)*(l-c)-(u-h)*(l-y)-(u-d)*(l-c)-(u-v)*(l-p))},t.point=w,t.pointGrid=os,t.pointOnFeature=function(t){for(var e="FeatureCollection"!==t.type?"Feature"!==t.type?T([E(t)]):T([t]):t,n=e9(e),i=!1,r=0;!i&&r<e.features.length;){var o=e.features[r].geometry,s=!1;if("Point"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(i=!0);else if("MultiPoint"===o.type)for(var a=!1,u=0;!a&&u<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[u][0]&&n.geometry.coordinates[1]===o.coordinates[u][1]&&(i=!0,a=!0),u++;else if("LineString"===o.type)for(var l=0;!s&&l<o.coordinates.length-1;)ss(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[l][0],o.coordinates[l][1],o.coordinates[l+1][0],o.coordinates[l+1][1])&&(s=!0,i=!0),l++;else if("MultiLineString"===o.type)for(var h=0;h<o.coordinates.length;){s=!1;for(var c=0,f=o.coordinates[h];!s&&c<f.length-1;)ss(n.geometry.coordinates[0],n.geometry.coordinates[1],f[c][0],f[c][1],f[c+1][0],f[c+1][1])&&(s=!0,i=!0),c++;h++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||tV(n,o)&&(i=!0);r++}if(i)return n;for(var d=T([]),p=0;p<e.features.length;p++)d.features=d.features.concat(r5(e.features[p]).features);return w(o5(n,d).geometry.coordinates)},t.pointToLineDistance=o7,t.pointToPolygonDistance=function t(e,i){var r,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=(r=s.method)?r:"geodesic",u=null!=(o=s.units)?o:"kilometers";if(!e)throw Error("point is required");if(!i)throw Error("polygon or multi-polygon is required");var l=ti(i);if("MultiPolygon"===l.type){var h=l.coordinates.map(function(n){return t(e,P(n),{method:a,units:u})});return Math.min.apply(Math,v(h.map(Math.abs)))*(tV(e,i)?-1:1)}if(l.coordinates.length>1){var c=l.coordinates.map(function(n){return t(e,P([n]),{method:a,units:u})}),p=n(c)||f(c)||m(c)||d(),g=p[0],y=p.slice(1);if(g>=0)return g;var _=Math.min.apply(Math,v(y));return _<0?Math.abs(_):Math.min(_,Math.abs(g))}var x=t4(l),b=1/0;return tx(x,function(t){b=Math.min(b,o7(e,t,{method:a,units:u}))}),tV(e,l)?-b:b},t.points=I,t.pointsWithinPolygon=sa,t.polygon=P,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var n=e.iterations,i=[];if(!t)throw Error("inputPolys is required");return t_(t,function(t,e,r){if("Polygon"===t.type){for(var o=[[]],s=0;s<n;s++){var a=[],u=t;s>0&&(u=P(o).geometry),function(t,e){var n,i;tc(t,function(t,r,o,s,a){if(i!==a)e.push([]);else{var u=n[0],l=n[1],h=t[0],c=t[1];e[a].push([.75*u+.25*h,.75*l+.25*c]),e[a].push([.25*u+.75*h,.25*l+.75*c])}n=t,i=a},!1),e.forEach(function(t){t.push(t[0])})}(u,a),o=a.slice(0)}i.push(P(o,r))}else{if("MultiPolygon"!==t.type)throw Error("geometry is invalid, must be Polygon or MultiPolygon");for(var l=[[[]]],h=0;h<n;h++){var c=[],f=t;h>0&&(f=R(l).geometry),function(t,e){var n,i,r;tc(t,function(t,o,s,a,u){if(i!==a)e.push([[]]);else if(r!==u)e[a].push([]);else{var l=n[0],h=n[1],c=t[0],f=t[1];e[a][u].push([.75*l+.25*c,.75*h+.25*f]),e[a][u].push([.25*l+.75*c,.25*h+.75*f])}n=t,i=a,r=u},!1),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}(f,c),l=c.slice(0)}i.push(R(l,r))}}),T(i)},t.polygonTangents=function(t,e){var n,i=Q(t),r=Q(e),o=[],s=[],a=tR(e),u=0,l=null;switch(i[0]>a[0]&&i[0]<a[2]&&i[1]>a[1]&&i[1]<a[3]&&(u=(l=o5(t,r5(e))).properties.featureIndex),tr(e)){case"Polygon":o=r[0][u],s=r[0][0],null!==l&&l.geometry.coordinates[1]<i[1]&&(s=r[0][u]),n=sg(r[0][0],r[0][r[0].length-1],i);var h=g(sp(r[0],i,n,o,s),2);o=h[0],s=h[1];break;case"MultiPolygon":for(var c=0,f=0,d=0,p=0;p<r[0].length;p++){c=p;for(var v=!1,y=0;y<r[0][p].length;y++){if(f=y,d===u){v=!0;break}d++}if(v)break}o=r[0][c][f],s=r[0][c][f],n=sg(r[0][0][0],r[0][0][r[0][0].length-1],i),r.forEach(function(t){var e=g(sp(t[0],i,n,o,s),2);o=e[0],s=e[1]})}return T([w(o),w(s)])},t.polygonToLine=t4,t.polygonize=function(t){var e=sd.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):i.push(t)}),n.forEach(function(t){sf.findEdgeRingContaining(t,i)&&i.push(t)}),T(i.map(function(t){return t.toPolygon()}))},t.polygons=S,t.projection=sb,t.propEach=td,t.propReduce=tp,t.propertiesContainsFilter=iF,t.quadratAnalysis=function(t,e){for(var n=(e=e||{}).studyBbox||tR(t),i=e.confidenceLevel||20,r=t.features,o=r.length,s=tM(tB(n)),u=ou(n,Math.sqrt(s/o*2),{units:"meters"}).features,l={},h=0;h<u.length;h++)l[h]={box:tR(u[h]),cnt:0};var c,f=0,d=a(r);try{for(d.s();!(c=d.n()).done;)for(var p=c.value,g=0,v=Object.keys(l);g<v.length;g++){var y,_=v[g],m=l[_].box;if(y=J(p),m[0]<=y[0]&&m[1]<=y[1]&&m[2]>=y[0]&&m[3]>=y[1]){l[_].cnt+=1,f+=1;break}}}catch(t){d.e(t)}finally{d.f()}for(var x=0,b=0,E=Object.keys(l);b<E.length;b++){var k=l[E[b]].cnt;k>x&&(x=k)}for(var w=[],I=Object.keys(l).length,P=f/I,S=0,M=0;M<x+1;M++)S+=Math.exp(-P)*Math.pow(P,M)/function(t){var e=[];return function t(n){return 0===n||1===n?1:e[n]>0?e[n]:e[n]=t(n-1)*n}(t)}(M),w.push(S);for(var N=[],T=0,C=0;C<x+1;C++){for(var O=0,R=Object.keys(l);O<R.length;O++)l[R[O]].cnt===C&&(T+=1);var A=T/I;N.push(A)}for(var D=0,z=0;z<x+1;z++){var B=Math.abs(w[z]-N[z]);B>D&&(D=B)}var F=sE[i]/Math.sqrt(I),q={criticalValue:F,isRandom:!0,maxAbsoluteDifference:D,observedDistribution:N};return D>F&&(q.isRandom=!1),q},t.radiansToDegrees=G,t.radiansToLength=z,t.random=sT,t.randomLineString=sS,t.randomPoint=sL,t.randomPolygon=sP,t.randomPosition=sk,t.rectangleGrid=oa,t.rewind=function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(i=i||{}))throw Error("options is invalid");var r=null!=(e=i.mutate)&&e,o=null!=(n=i.reverse)&&n;if(!t)throw Error("<geojson> is required");if("boolean"!=typeof o)throw Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw Error("<mutate> must be a boolean");r||"Point"===t.type||"MultiPoint"===t.type||(t=iN(t));var s=[];switch(t.type){case"GeometryCollection":return t_(t,function(t){sC(t,o)}),t;case"FeatureCollection":return tg(t,function(t){tg(sC(t,o),function(t){s.push(t)})}),T(s)}return sC(t,o)},t.rhumbBearing=tl,t.rhumbDestination=r1,t.rhumbDistance=r2,t.round=D,t.sample=function(t,e){if(!t)throw Error("fc is required");if(null==e)throw Error("num is required");if("number"!=typeof e)throw Error("num must be a number");return T(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))},t.sector=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!X(r=r||{}))throw Error("options is invalid");var o=r.properties;if(!t)throw Error("center is required");if(null==n)throw Error("bearing1 is required");if(null==i)throw Error("bearing2 is required");if(!e)throw Error("radius is required");if("object"!==_(r))throw Error("options must be an object");if(sA(n)===sA(i))return iM(t,e,r);var s=Q(t),a=oz(t,e,n,i,r),u=[[s]];return tc(a,function(t){u[0].push(t)}),u[0].push(s),P(u,o)},t.segmentEach=tE,t.segmentReduce=tk,t.shortestPath=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!X(n=n||{}))throw Error("options is invalid");var i=n.obstacles||T([]),r=n.resolution||100;if(!t)throw Error("start is required");if(!e)throw Error("end is required");if(r&&(!U(r)||r<=0))throw Error("options.resolution must be a number, greater than 0");var o=J(t),s=J(e);if(t=w(o),e=w(s),"FeatureCollection"===i.type){if(0===i.features.length)return M([o,s])}else{if("Polygon"!==i.type)throw Error("invalid obstacles");i=T([E(ti(i))])}var a=i;a.features.push(t),a.features.push(e);var u=g(tR(sD(tB(tR(a)),1.15)),4),l=u[0],h=u[1],c=u[2],f=u[3],d=tu([l,h],[c,h],n)/r;a.features.pop(),a.features.pop();for(var p,v,y=d/tu([l,h],[c,h],n)*(c-l),_=d/tu([l,h],[l,f],n)*(f-h),m=c-l,x=f-h,b=Math.floor(m/y),k=Math.floor(x/_),I=(m-b*y)/2,P=[],S=[],N=1/0,C=1/0,O=f-(x-k*_)/2,R=0;O>=h;){for(var A=[],D=[],z=l+I,B=0;z<=c;){var F=w([z,O]),q=function(t,e){for(var n=0;n<e.features.length;n++)if(tV(t,e.features[n]))return!0;return!1}(F,i);A.push(+!q),D.push(z+"|"+O);var V=tu(F,t);!q&&V<N&&(N=V,p={x:B,y:R});var G=tu(F,e);!q&&G<C&&(C=G,v={x:B,y:R}),z+=y,B++}S.push(A),P.push(D),O-=_,R++}var Z=new sq(S,{diagonal:!0}),j=Z.grid[p.y][p.x],Y=Z.grid[v.y][v.x],H=sF.search(Z,j,Y),W=[o];return H.forEach(function(t){var e=P[t.x][t.y].split("|");W.push([+e[0],+e[1]])}),W.push(s),ef(M(W))},t.simplify=function(t){var e,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!X(r=null!=r?r:{}))throw Error("options is invalid");var o=null!=(e=r.tolerance)?e:1,s=null!=(n=r.highQuality)&&n,a=null!=(i=r.mutate)&&i;if(!t)throw Error("geojson is required");if(o&&o<0)throw Error("invalid tolerance");return!0!==a&&(t=iN(t)),t_(t,function(t){!function(t,e,n){var i=t.type;if("Point"!==i&&"MultiPoint"!==i&&(ef(t,{mutate:!0}),"GeometryCollection"!==i))switch(i){case"LineString":t.coordinates=sZ(t.coordinates,e,n);break;case"MultiLineString":t.coordinates=t.coordinates.map(function(t){return sZ(t,e,n)});break;case"Polygon":t.coordinates=sj(t.coordinates,e,n);break;case"MultiPolygon":t.coordinates=t.coordinates.map(function(t){return sj(t,e,n)})}}(t,o,s)}),t},t.square=oZ,t.squareGrid=ou,t.standardDeviationalEllipse=function(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n,i=e.steps||64,r=e.weight,o=e.properties||{};if(!U(i))throw Error("steps must be a number");if(!X(o))throw Error("properties must be a number");var s=ty(t).length,a=il(t,{weight:r}),u=0,l=0,h=0;tg(t,function(t){var e,n=r&&(null==(e=t.properties)?void 0:e[r])||1,i=sY(Q(t),Q(a));u+=Math.pow(i.x,2)*n,l+=Math.pow(i.y,2)*n,h+=i.x*i.y*n});var c=u-l,f=Math.sqrt(Math.pow(c,2)+4*Math.pow(h,2)),d=Math.atan((c+f)/(2*h)),p=180*d/Math.PI,g=0,v=0,y=0;tg(t,function(t){var e,n=r&&(null==(e=t.properties)?void 0:e[r])||1,i=sY(Q(t),Q(a));g+=Math.pow(i.x*Math.cos(d)-i.y*Math.sin(d),2)*n,v+=Math.pow(i.x*Math.sin(d)+i.y*Math.cos(d),2)*n,y+=n});var _=Math.sqrt(2*g/y),m=Math.sqrt(2*v/y),x=r4(a,_,m,{units:"degrees",angle:p,steps:i,properties:o}),b=sa(t,T([x])),E={meanCenterCoordinates:Q(a),semiMajorAxis:_,semiMinorAxis:m,numberOfFeatures:s,angle:p,percentageWithinEllipse:100*ty(b).length/s};return x.properties=null!=(n=x.properties)?n:{},x.properties.standardDeviationalEllipse=E,x},t.tag=function(t,e,n,i){return t=iN(t),e=iN(e),tg(t,function(t){t.properties||(t.properties={}),tg(e,function(e){t.properties&&e.properties&&void 0===t.properties[i]&&tV(t,e)&&(t.properties[i]=e.properties[n])})}),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=sW(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(sW(t))}),e},t.tin=iK,t.toMercator=sv,t.toWgs84=sy,t.transformRotate=r3,t.transformScale=sD,t.transformTranslate=function(t,e,n,i){if(!X(i=i||{}))throw Error("options is invalid");var r=i.units,o=i.zTranslation,s=i.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=iN(t)),tc(t,function(t){var i=Q(r1(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)}),t},t.triangleGrid=ol,t.truncate=oj,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(t_(t,function(t){n.push(t.coordinates)}),n.length<2)throw Error("Must have at least 2 geometries");var i=rW.apply(rQ,[n[0]].concat(v(n.slice(1))));return 0===i.length?null:1===i.length?P(i[0],e.properties):R(i,e.properties)},t.unkinkPolygon=function(t){var e=[];return tx(t,function(t){"Polygon"===t.geometry.type&&tg(function(t){if("Feature"!=t.type)throw Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var r=t.geometry.coordinates[i];s0(r[0],r[r.length-1])||r.push(r[0]);for(var o=0;o<r.length-1;o++)n.push(r[o])}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){n=0;break}e[t[i]]=1}return n}(n))throw Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var s=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var s=[],a=0;a<i.length;a++)for(var u=0;u<i[a].length-1;u++)s.push(g(a,u));var l=new em;l.load(s)}for(var h=0;h<i.length;h++)for(var c=0;c<i[h].length-1;c++)if(n)l.search(g(h,c)).forEach(function(t){var e=t.ring,n=t.edge;p(h,c,e,n)});else for(var f=0;f<i.length;f++)for(var d=0;d<i[f].length-1;d++)p(h,c,f,d);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function p(t,n,s,a){var u,l,h=i[t][n],c=i[t][n+1],f=i[s][a],d=i[s][a+1],p=function(t,e,n,i){if(sK(t,n)||sK(t,i)||sK(e,n)||sK(i,n))return null;var r=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=i[0],c=i[1],f=(r-s)*(l-c)-(o-a)*(u-h);return 0===f?null:[((r*a-o*s)*(u-h)-(r-s)*(u*c-l*h))/f,((r*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/f]}(h,c,f,d);if(null!==p&&(u=c[0]!==h[0]?(p[0]-h[0])/(c[0]-h[0]):(p[1]-h[1])/(c[1]-h[1]),l=d[0]!==f[0]?(p[0]-f[0])/(d[0]-f[0]):(p[1]-f[1])/(d[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var g=!o[p];g&&(o[p]=!0),e?r.push(e(p,t,n,h,c,u,s,a,f,d,l,g)):r.push(p)}}function g(t,e){var n,r,o,s,a=i[t][e],u=i[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,function(t,e,n,i,r,o,s,a,u,l,h,c){return[t,e,n,i,r,o,s,a,u,l,h,c]}),u=a.length;if(0==u){var l=[];for(i=0;i<e;i++)l.push(P([t.geometry.coordinates[i]],{parent:-1,winding:function(t){for(var e,n,i=0,r=0;r<t.length-1;r++)t[r][0]<t[i][0]&&(i=r);if(s$([t[((i-1)%(e=t.length-1)+e)%e],t[i],t[((i+1)%(n=t.length-1)+n)%n]],!0))var o=1;else o=-1;return o}(t.geometry.coordinates[i])}));var h=T(l);return Z(),j(),h}var c=[],f=[];for(i=0;i<e;i++)for(c.push([]),o=0;o<t.geometry.coordinates[i].length-1;o++){c[i].push([new sJ(t.geometry.coordinates[i][((o+1)%(y=t.geometry.coordinates[i].length-1)+y)%y],1,[i,o],[i,((o+1)%(_=t.geometry.coordinates[i].length-1)+_)%_],void 0)]),f.push(new sQ(t.geometry.coordinates[i][o],[i,((o-1)%(m=t.geometry.coordinates[i].length-1)+m)%m],[i,o],void 0,void 0,!1,!0))}for(i=0;i<u;i++)c[a[i][1]][a[i][2]].push(new sJ(a[i][0],a[i][5],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0)),a[i][11]&&f.push(new sQ(a[i][0],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0,void 0,!0,!0));var d=f.length;for(i=0;i<c.length;i++)for(o=0;o<c[i].length;o++)c[i][o].sort(function(t,e){return t.param<e.param?-1:1});var p=[];for(i=0;i<d;i++)p.push({minX:f[i].coord[0],minY:f[i].coord[1],maxX:f[i].coord[0],maxY:f[i].coord[1],index:i});var g=new em;for(g.load(p),i=0;i<c.length;i++)for(o=0;o<c[i].length;o++)for(var v=0;v<c[i][o].length;v++){E=v==c[i][o].length-1?c[i][((o+1)%(x=t.geometry.coordinates[i].length-1)+x)%x][0].coord:c[i][o][v+1].coord;var y,_,m,x,b=g.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];c[i][o][v].nxtIsectAlongEdgeIn=b.index}for(i=0;i<c.length;i++)for(o=0;o<c[i].length;o++)for(v=0;v<c[i][o].length;v++){var E=c[i][o][v].coord,k=(b=g.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;k<s?f[k].nxtIsectAlongRingAndEdge2=c[i][o][v].nxtIsectAlongEdgeIn:s0(f[k].ringAndEdge1,c[i][o][v].ringAndEdgeIn)?f[k].nxtIsectAlongRingAndEdge1=c[i][o][v].nxtIsectAlongEdgeIn:f[k].nxtIsectAlongRingAndEdge2=c[i][o][v].nxtIsectAlongEdgeIn}var w=[];for(i=0,o=0;o<e;o++){var I=i;for(v=0;v<t.geometry.coordinates[o].length-1;v++)f[i].coord[0]<f[I].coord[0]&&(I=i),i++;var S=f[I].nxtIsectAlongRingAndEdge2;for(v=0;v<f.length;v++)if(f[v].nxtIsectAlongRingAndEdge1==I||f[v].nxtIsectAlongRingAndEdge2==I){var M=v;break}var N=s$([f[M].coord,f[I].coord,f[S].coord],!0)?1:-1;w.push({isect:I,parent:-1,winding:N})}for(w.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}),l=[];w.length>0;){var C=w.pop(),O=C.isect,R=C.parent,A=C.winding,D=l.length,z=[f[O].coord],B=O;if(f[O].ringAndEdge1Walkable)var F=f[O].ringAndEdge1,q=f[O].nxtIsectAlongRingAndEdge1;else F=f[O].ringAndEdge2,q=f[O].nxtIsectAlongRingAndEdge2;for(;!s0(f[O].coord,f[q].coord);){z.push(f[q].coord);var V=void 0;for(i=0;i<w.length;i++)if(w[i].isect==q){V=i;break}if(null!=V&&w.splice(V,1),s0(F,f[q].ringAndEdge1)){if(F=f[q].ringAndEdge2,f[q].ringAndEdge2Walkable=!1,f[q].ringAndEdge1Walkable){var G={isect:q};s$([f[B].coord,f[q].coord,f[f[q].nxtIsectAlongRingAndEdge2].coord],1==A)?(G.parent=R,G.winding=-A):(G.parent=D,G.winding=A),w.push(G)}B=q,q=f[q].nxtIsectAlongRingAndEdge2}else F=f[q].ringAndEdge1,f[q].ringAndEdge1Walkable=!1,f[q].ringAndEdge2Walkable&&(G={isect:q},s$([f[B].coord,f[q].coord,f[f[q].nxtIsectAlongRingAndEdge1].coord],1==A)?(G.parent=R,G.winding=-A):(G.parent=D,G.winding=A),w.push(G)),B=q,q=f[q].nxtIsectAlongRingAndEdge1}z.push(f[q].coord),l.push(P([z],{index:D,parent:R,winding:A,netWinding:void 0}))}function Z(){for(var t=[],e=0;e<h.features.length;e++)-1==h.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<h.features.length;i++)t[e]!=i&&tV(h.features[t[e]].geometry.coordinates[0][0],h.features[i],{ignoreBoundary:!0})&&tM(h.features[i])<1/0&&(n=i);h.features[t[e]].properties.parent=n}}function j(){for(var t=0;t<h.features.length;t++)if(-1==h.features[t].properties.parent){var e=h.features[t].properties.winding;h.features[t].properties.netWinding=e,function t(e,n){for(var i=0;i<h.features.length;i++)if(h.features[i].properties.parent==e){var r=n+h.features[i].properties.winding;h.features[i].properties.netWinding=r,t(i,r)}}(t,e)}}return h=T(l),Z(),j(),h}(t),function(n){e.push(P(n.geometry.coordinates,t.properties))})}),T(e)},t.validateBBox=H,t.validateId=W,t.voronoi=function(t,e){if(!X(e=e||{}))throw Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw Error("points is required");if(!Array.isArray(n))throw Error("bbox is invalid");return tn(t,"Point","points"),T((function(){var t=s3,e=s4,n=null;function i(i){return new ax(i.map(function(n,r){var o=[1e-6*Math.round(t(n,r,i)/1e-6),1e-6*Math.round(e(n,r,i)/1e-6)];return o.index=r,o.data=n,o}),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:s2(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:s2(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i})().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(function(e,n){var i;return Object.assign(((i=(i=e).slice()).push(i[0]),P([i])),{properties:iC(t.features[n].properties)})}))}}(e);const n="STATEFP";async function i(t){let e=await fetch(t);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}function r(t,e){let n=JSON.stringify(t.properties,null,2);e.bindTooltip(n),e.on({mouseover:o,mouseout:s})}function o(t){t.target.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7})}function s(e){t.resetStyle(e.target)}(async()=>{let o=L.map("map");L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(o);let s=function(t,n){let i=t.features.reduce((t,e)=>{let i=e.properties[n];return t[i]||(t[i]=[]),t[i].push(e),t},{}),r=[];return Object.entries(i).forEach(([t,i])=>{if(i.length>1){let o=e.multiPolygon(i.map(t=>t.geometry.coordinates),{[n]:t});r.push(o)}else{let t=i[0];r.push(t)}}),e.featureCollection(r)}(function(t,n){let i=[...t.features.filter(t=>"Polygon"===t.geometry.type),...t.features.filter(t=>"MultiPolygon"===t.geometry.type).flatMap(t=>t.geometry.coordinates.map(e=>({type:"Feature",properties:t.properties,geometry:{type:"Polygon",coordinates:e}})))],r=e.featureCollection(i);return e.dissolve(r,{propertyName:n})}(await i("./assets/sample.geojson"),n),n);t=L.geoJson(s,{onEachFeature:r}).addTo(o),o.fitBounds(t.getBounds())})();
//# sourceMappingURL=index.23acee14.js.map
